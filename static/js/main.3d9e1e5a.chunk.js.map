{"version":3,"sources":["tfw/converter/boolean.ts","tfw/converter/string.ts","tfw/factory/dialog.tsx","tfw/intl.ts","tfw/icons.ts","tfw/view/icon.tsx","tfw/view/button.tsx","tfw/web-service.ts","tfw/escape-handler.ts","tfw/converter/function.ts","tfw/behavior/touchable.ts","tfw/gesture/moves.ts","tfw/gesture/finger.ts","tfw/gesture/basic-handler.ts","tfw/gesture/gesture.ts","tfw/gesture/index.ts","tfw/color.ts","tfw/theme.ts","tfw/converter/integer.ts","tfw/converter/unit.ts","tfw/converter/string-array.ts","tfw/view/label/label.tsx","tfw/view/label/index.ts","tfw/layout/flex.tsx","tfw/converter/array.ts","tfw/view/combo.tsx","install/install.yaml","tfw/factory/dialog.yaml","Login.yaml","tfw/view/input/input.tsx","tfw/storage.ts","Login.tsx","tfw/view/checkbox.tsx","install/install.view.tsx","install/install.tsx","index.tsx"],"names":["castBoolean","v","defaultValue","arguments","length","undefined","text","trim","toLowerCase","num","parseInt","isNaN","__webpack_require__","d","__webpack_exports__","castString","value","t","concat","_","Intl","make","require","alert","content","Promise","resolve","reject","dialog","Dialog","onClose","maxWidth","footer","react__WEBPACK_IMPORTED_MODULE_4__","_view_button__WEBPACK_IMPORTED_MODULE_12__","icon","label","flat","onClick","ex","console","error","hide","show","confirm","caption","title","close","confirmed","btnCancel","key","btnOK","warning","options","wait","_this","this","Object","_home_petitjea_Code_github_web_soins_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__","_screen","_options","assign","closeOnEscape","screen","document","createElement","className","body","appendChild","bind","EscapeHandler","add","_hide","_this2","opt","header","_view_icon__WEBPACK_IMPORTED_MODULE_6__","ReactDOM","render","style","setTimeout","classList","fire","remove","removeChild","requestAnimationFrame","slot","_callee","task","_args","_home_petitjea_Code_github_web_soins_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","wrap","_context","prev","next","abrupt","sent","_layout_flex__WEBPACK_IMPORTED_MODULE_7__","dir","justifyContent","alignItems","animate","then","result","stop","Mode","gCurrentLanguage","localStorage","getItem","navigator","language","split","translations","_home_petitjea_Code_github_web_soins_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__","item","_len","params","Array","_key","translation","addParams","languages","keys","_i","_languages","lang","Error","instance","translate","_home_petitjea_Code_github_web_soins_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__","intl","defaultText","toIntl","_i2","_Object$keys","val","_value","setItem","output","mark","mode","Text","paramIndex","index","c","charAt","Escape","substr","Placeholder","draw","stroke","fill","iconsBook","android","bug","camera","cancel","center","child","code","copy","counter","cut","delete","direction","down","down-double","edit","eraser","export","file","flag-jp","r","flag-fr","flag-it","flag-de","flag-en","folder","font","format-align-center","format-align-justify","format-align-left","format-align-right","format-bold","format-italic","format-float-center","format-float-left","format-float-none","format-float-right","format-header","format-underline","fullscreen","gear","gps","hand","heart","home","image","import","improvement","info","left","left-double","link","location","logout","mail","map","map-layer","menu","minus","minus-o","minus-small","more","movie","ok","pack","pause","play","plug","plus","plus-o","plus-small","print","question","redo","refresh","report","right","right-double","run","search","select","sitemap","unselect","share","skip-next","skip-next2","skip-prev","skip-prev2","speaker","speaker-off","split-vertical","split-horizontal","star","stat","switch","tri-down","tri-left","tri-right","tri-up","twitter","undo","up","up-double","user","zoom-in","zoom-out","synonyms","back","help","save","_Object$keys2","EnumPenColor","Icon","props","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","refIcon","visible","timeoutHandle","React","name","sort","elemIcon","current","window","clearTimeout","onHide","_this3","p","enabled","flipH","flipV","size","castUnit","isArray","castContent","rotate","castInteger","classes","svgContent","createSvgContent","push","transform","width","height","triggerVisibleAnimation","react","join","ref","viewBox","preserveAspectRatio","strokeWidth","strokeLinecap","strokeLinejoin","def","elementName","_parseDef","_ref","attributes","children","_ref2","slicedToArray","arg1","arg2","parseDef","attribs","forEach","attribName","attribValue","toUpperCase","CLASSES","indexOf","PENS","pen","manageColors","objectSpread","Button","_home_petitjea_Code_github_web_soins_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","_home_petitjea_Code_github_web_soins_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","_home_petitjea_Code_github_web_soins_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","touchable","handleClick","_home_petitjea_Code_github_web_soins_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__","Touchable","onTap","element","tag","wide","small","castArray","react__WEBPACK_IMPORTED_MODULE_6__","disabled","_icon__WEBPACK_IMPORTED_MODULE_7__","EnumWebServiceError","EnumLoginError","exec","login","isLocalhost","hostname","create","root","WebService","setRoot","gInstance","gLastSuccessfulLogin","username","password","User","_email","_nickname","_roles","role","slice","url","startsWith","args","callService","response","OK","obj","JSON","parse","data","challenge","h","hash","roles","FormData","append","stringify","init","method","credentials","fetch","HTTP_ERROR","statusText","pwd","pass","i","charCodeAt","j","k1","k2","k3","_callee4","_args4","_context4","_callee5","_context5","listener","initialized","addEventListener","evt","handlers","handler","pop","EMPTY_FUNCTION","_element","_enabled","color","accent","castFunction","that","Gesture","on","keydown","preventDefault","stopPropagation","removeTouchDisk","tap","rect","getBoundingClientRect","getComputedStyle","div","top","createScreen","borderRadius","getPropertyValue","x","y","w","Math","max","radius","ceil","sqrt","ripple","background","Theme","isDark","CAPACITY","Moves","_x0","_y0","_time0","_x","_y","_time","_cursor","now","shift","idx","Date","idx0","idx1","_index","time","time0","time1","time01","idx2","time12","x0","x1","y0","y1","Finger","fingers","identifier","indexOfFirstNull","movingElements","event","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","done","movingElem","cancelBubble","target","handleMove","clientX","clientY","pointer","buttons","translateButtons","clear","createClear","err","return","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","handleUp","splice","BasicHandler","handleDown","mouseType","mouseTypeTime","deviceHandlers","pressed","checkMouseType","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","changedTouches","touch","getIndex","touchstart","mousedown","delay","_this$deviceHandlers","removeEventListener","metaKey","ctrlKey","SYMBOL","ID","STANDARD_EVENTS","elem","pointers","id","rawHandlers","eventName","wheel","deltaX","deltaY","deltaZ","wrapSpecialHandlers","names","_names","isDown","moves","ptr","getPointer","recognizeTap","recognizeSwipe","recognizePan","elapsedTime","abs","startX","startY","recognizePanDown","recognizePanUp","pan","_ptr$moves","hasHandlerFor","sx","speedX","speedY","dx","pandown","panvertical","panup","recognizeSwipeDown","recognizeSwipeUp","recognizeSwipeLeft","swipe","_ptr$moves2","dy","swipedown","swipevertical","swipeup","swipeleft","swipehorizontal","gesture","Color","codeCSS","R","G","B","H","S","L","A","input","parseHexa","parseRGB","parseRGBA","parseHSL","luminance","hexa2","newColor","chroma","min","delta","INV6","INV15","INV255","m","RX_RGB","clamp01","RX_RGBA","parseFloat","RX_HSL","INV359","INV99","hsl2rgb","luminanceStep","rgb","_rgb","newRGB","rgba","_rgba","newRGBA","color1","color2","alpha","beta","colors","newBlack","spacesCount","firstColorIndex","floor","translatedAlpha","mix","red","green","blue","out","toString","register","registerTheme","apply","THEMES","css","get","vars","bg0","makeGetCurrentColor","bg1","bg2","bg3","bgP","bgPD","bgPL","bgS","bgSD","bgSL","black","white","colorName","$isDark","average","isThemeGloballyDark","varName","setFontSize","html","documentElement","normalize","completeWithDefaultValues","COLOR","THEME_COLOR_NAMES","themeName","_style","s","ALPHA_HEXA","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","letter","codeVariables","codeBackground","elevationColor","addAlpha","ELEVATIONS","elevationKey","elevation","codeElevation","depth","fgColorName","bgColorName","styleFgColorName","styleBgColorName","bgClass","fgClass","position","piecesFG","piecesSVG","piecesBG","tail","codeText","styleElement","getElementsByTagName","textContent","0","2","4","6","8","9","10","11","12","16","24","completeBackgrounds","has0","has1","has2","has3","rgb2hsl","darkenBackground","color0","r0","g0","b0","color3","r3","g3","b3","dark","light","rotateHue","bg","hexa","defVal","RX_CSS_UNIT","scalar","unit","castStringArray","_string__WEBPACK_IMPORTED_MODULE_0__","defaultArray","defaultString","Label","react_default","htmlFor","Component","label_Label","Flex","flexWrap","_home_petitjea_Code_github_web_soins_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__","Combo","list","button","bigList","selectedKey","selectedIndex","expand","onChange","_list$getBoundingClie","innerHeight","innerHTML","items","querySelectorAll","scrollTop","_ensureSelectionVisible","_swapItems","_this$_computeDimensi","_computeDimensions","_this$_showList","_showList","handleKeyboard","_handleKeyboard","scroll","goodKeys","minimalLength","k","ensureGoodKeys","_label__WEBPACK_IMPORTED_MODULE_13__","_icon__WEBPACK_IMPORTED_MODULE_12__","module","exports","en","database","db-pwd","db-usr","error-2","error-3","error-4","error-5","error-6","host","install","mandatory","prefix","siteadmin","usr","fr","bad-login","Input","handleKeyDown","_this$props","onEnterPressed","onFocus","type","setSelectionRange","onBlur","placeholder","focus","globalId","inputClassName","view_label","autoFocus","onKeyDown","storage","local","makeStorage","session","sessionStorage","removeItem","set","del","AsyncStart","all","e","App","handleLanguageChange","setState","handleLogin","_this$state","state","email","start","catch","badLogin","handleUsernameChange","handlePasswordChange","Storage","getElementById","default","splash1","splash2","log","input_Input","combo","view_button","Checkbox","handleChange","assertThisInitialized","reverse","Install","onUpdate","handleCreateDatabaseChanged","createDatabase","databaseHost","databaseName","databaseLogin","databasePassword","appAdminLogin","appAdminPassword","appAdminPasswordBis","attributeName","defineProperty","_this$state2","checkbox_Checkbox","check","_callee3","tablesPrefix","regenerator_default","_context3","asyncToGenerator","_callee2","installState","view","_context2","WS","databaseConnectionStatus","dbUsr","dbPwd","t0","install_view_Install","_x2","isInstallationOK","reload","Login_App"],"mappings":"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","file":"static/js/main.3d9e1e5a.chunk.js","sourcesContent":["export default function castBoolean(v: any, defaultValue = false): boolean {\r\n    switch (typeof v) {\r\n        case \"undefined\":\r\n            return defaultValue;\r\n        case \"boolean\":\r\n            return v;\r\n        case \"number\":\r\n            return v !== 0;\r\n        case \"string\":\r\n            const text = v.trim().toLowerCase();\r\n            if (text === 'true' || text === 'yes') return true;\r\n            const num = parseInt(text);\r\n            if (!isNaN(num)) return num !== 0;\r\n            return false;\r\n        default:\r\n            return false;\r\n    }\r\n}\r\n","export default function castString(value: any, defaultValue: string): string {\r\n    const t = typeof value;\r\n    if (t === 'number' && !isNaN(value)) {\r\n        return `${value}`;\r\n    }\r\n    if (t === 'string') return value;\r\n    return defaultValue;\r\n}\r\n","import * as React from \"react\"\r\nimport ReactDOM from 'react-dom'\r\nimport Icon from \"../view/icon\"\r\nimport Flex from \"../layout/flex\"\r\nimport EscapeHandler from \"../escape-handler\"\r\nimport castString from \"../converter/string\"\r\nimport castBoolean from \"../converter/boolean\"\r\nimport \"./dialog.css\"\r\n\r\nimport Button from \"../view/button\"\r\n\r\nimport Intl from \"../intl\";\r\nconst _ = Intl.make(require(\"./dialog.yaml\"));\r\n\r\nexport default {\r\n    /**\r\n    * @param {string|React.ReactElement<any>} message\r\n    * @param {()=>void|null} onClose\r\n    */\r\n    alert,\r\n    /**\r\n    * @param {string} caption - Title and button caption.\r\n    * @param {any} content - Content to display.\r\n    * @return Promise<boolean> Confirmed or not?\r\n    */\r\n    confirm,\r\n    show,\r\n    wait\r\n};\r\n\r\ninterface IOptions {\r\n    onClose?: () => void;\r\n    closeOnEscape?: boolean;\r\n    icon?: string;\r\n    title?: string;\r\n    content?: string | React.ReactElement<any>;\r\n    footer?: React.ReactElement<any>[] | React.ReactElement<any> | null;\r\n    maxWidth?: number;\r\n}\r\n\r\nclass Dialog {\r\n    _screen: HTMLElement;\r\n    _options: IOptions;\r\n    footer: React.ReactElement<any>[] | React.ReactElement<any> | null = null;\r\n\r\n    constructor(options: IOptions = {}) {\r\n        this._options = Object.assign({\r\n            closeOnEscape: true,\r\n            footer: <Button\r\n                icon=\"close\"\r\n                label = { _('close') }\r\n                flat={ true}\r\n                onClick={() => this.hide()}/>\r\n        }, options);\r\n        this._options.closeOnEscape = castBoolean(this._options.closeOnEscape, true);\r\n        this.footer = this._options.footer || null;\r\n        const screen = document.createElement(\"div\");\r\n        screen.className = \"tfw-factory-dialog\";\r\n        document.body.appendChild(screen);\r\n        this._screen = screen;\r\n        this.hide = this.hide.bind(this);\r\n        if (this._options.closeOnEscape) {\r\n            EscapeHandler.add(() => this._hide());\r\n        }\r\n    }\r\n\r\n    set onClose(slot: () => void) {\r\n        this._options.onClose = slot;\r\n    }\r\n\r\n    show() {\r\n        const opt = this._options;\r\n        const title = castString(opt.title, \"\").trim();\r\n        const icon = castString(opt.icon, \"\").trim();\r\n        let footer: React.ReactElement<any> | null =\r\n            this.footer ? (<footer className= \"thm-bg2 thm-ele-button\">{\r\n                this.footer\r\n            }</footer>) : null;\r\n            let header = null;\r\n        if (title.length > 0) {\r\n            header = (\r\n                <header className= \"thm-bgPD\">\r\n                    { icon.length > 0 ? <Icon content={ icon } /> : null}\r\n                    <div>{title}</div>\r\n                </header>\r\n            )\r\n        }\r\n\r\n        ReactDOM.render((\r\n            <div\r\n                className=\"thm-ele-dialog thm-bg1\"\r\n                style={{\r\n                    maxWidth: typeof opt.maxWidth === 'number' ? `${opt.maxWidth}px` : \"auto\"\r\n                }}>\r\n                {header}\r\n                <div>{opt.content}</div>\r\n                {footer}\r\n            </div>\r\n        ), this._screen);\r\n        setTimeout(() => this._screen.classList.add(\"show\"), 10);\r\n    }\r\n\r\n    hide() {\r\n        if (!this._options.closeOnEscape) {\r\n            this._hide();\r\n        } else {\r\n            EscapeHandler.fire();\r\n        }\r\n    }\r\n\r\n    _hide() {\r\n        const screen = this._screen;\r\n        screen.classList.remove(\"show\");\r\n        setTimeout(() => {\r\n            document.body.removeChild(screen);\r\n        }, 200);\r\n        const onClose = this._options.onClose;\r\n        if (typeof onClose === 'function') {\r\n            requestAnimationFrame(onClose);\r\n        }\r\n    }\r\n}\r\n\r\nfunction alert(content: string | React.ReactElement<any>,\r\n               onClose: (() => void) | undefined = undefined): Promise<void> {\r\n    return new Promise((resolve, reject) => {\r\n        const dialog = new Dialog({ onClose: resolve, content, maxWidth: 420 });\r\n        const close = () => {\r\n            try {\r\n                resolve();\r\n            }\r\n            catch( ex ) {\r\n                console.error(\"Error in the resolution of tfw/factory/dialog/alert!\", ex)\r\n                reject( ex );\r\n            }\r\n            finally {\r\n                dialog.hide();\r\n            }\r\n        }\r\n        dialog.footer = (<Button\r\n            icon=\"close\"\r\n            label={_('close')}\r\n            flat={true}\r\n            onClick={close} />);\r\n        dialog.show();\r\n    });\r\n}\r\n\r\n/**\r\n * ```\r\n * const isConfirmed = await Dialog.confirm(\"Delete file\", <p>Are you sure?</p>);\r\n * ```\r\n * @param caption - Title and button caption.\r\n * @param content - Content to display.\r\n */\r\nfunction confirm( caption: string,\r\n                  content: string | React.ReactElement<any>): Promise<boolean> {\r\n    return new Promise( resolve => {\r\n        const dialog = new Dialog({ title: caption, content });\r\n        const close = (confirmed: boolean) => {\r\n            dialog.hide();\r\n            resolve( confirmed );\r\n        };\r\n        dialog.onClose = () => close(false);\r\n        const btnCancel = (<Button\r\n            key=\"cancel\"\r\n            flat={true}\r\n            label={_(\"cancel\")}\r\n            onClick={() => close(false)}/>);\r\n        const btnOK = (<Button\r\n            key=\"ok\"\r\n            warning={true}\r\n            label={caption}\r\n            onClick={() => close(true)}/>);\r\n        dialog.footer = [ btnCancel, btnOK ];\r\n        dialog.show();\r\n    });\r\n}\r\n\r\nfunction show(options: IOptions): Dialog {\r\n    const dialog = new Dialog(options);\r\n    dialog.show();\r\n    return dialog;\r\n}\r\n\r\nasync function wait(label: string, task: Promise<any>, blocking: boolean = true): Promise<any> {\r\n    if (!blocking) {\r\n        return await task;\r\n    }\r\n    const content = (\r\n        <Flex dir=\"row\" justifyContent=\"flex-start\" alignItems=\"center\" >\r\n            <Icon content=\"wait\" animate={true}/>\r\n            <div>{label}</div>\r\n        </Flex>\r\n    );\r\n    const dialog = new Dialog({ content, footer: null, closeOnEscape: false });\r\n    dialog.show();\r\n    const close = dialog.hide.bind( dialog );\r\n    return new Promise( (resolve, reject) => {\r\n        task.then(\r\n            (result: any) => {\r\n                close();\r\n                resolve( result );\r\n            },\r\n            (error: any) => {\r\n                console.error( error );\r\n                close();\r\n                reject( error );\r\n            }\r\n        );\r\n    });\r\n}\r\n","import { IIntlText, IIntlOrString } from \"./types\"\r\n\r\ninterface ITranslations {\r\n    [language: string]: { [key: string]: string }\r\n}\r\n\r\nlet gCurrentLanguage: string =\r\n    localStorage.getItem(\"CurrentLanguage\") || navigator.language.split(\"-\")[0];\r\n\r\nexport default class Intl {\r\n    constructor(private translations: ITranslations) { }\r\n\r\n    static make(translations: ITranslations) {\r\n        const instance = new Intl(translations);\r\n        return instance.translate.bind(instance);\r\n    }\r\n\r\n    static toIntl(text: IIntlOrString | undefined, lang: string | null = null): IIntlText {        \r\n        if (!text) return { [lang || Intl.lang]: \"\" };\r\n        if (typeof text !== 'string') return text;\r\n        return { [lang || Intl.lang]: text };\r\n    }\r\n\r\n    static toText(intl: IIntlOrString | undefined, lang?: string | undefined): string {\r\n        if (!intl) return \"\";\r\n        if (typeof intl === 'string') return intl;\r\n        if (typeof lang === 'undefined') lang = Intl.lang;\r\n        const text = intl[lang];\r\n        if (typeof text === 'string') return text;\r\n        const defaultText = intl[Object.keys(intl)[0]];\r\n        if (typeof defaultText === 'string') return defaultText;\r\n        return \"\";\r\n    }\r\n\r\n    static addTextToIntl(lang: string, text: string, intl: IIntlOrString): IIntlText {\r\n        intl = Intl.toIntl(intl, lang);\r\n        intl[lang] = text;\r\n        const result: IIntlText = {};\r\n        for (const key of Object.keys(intl)) {\r\n            const val = intl[key];\r\n            if (val.trim().length === 0) continue;\r\n            result[key] = val;\r\n        }\r\n        return result;\r\n    }\r\n\r\n    static get lang() { return gCurrentLanguage; }\r\n\r\n    static set lang(_value: string) {\r\n        if (typeof _value !== 'string') return;\r\n        const value = _value.split(\"-\")[0];\r\n        gCurrentLanguage = value;\r\n        localStorage.setItem(\"CurrentLanguage\", value);\r\n    }\r\n\r\n    translate(item: string, ...params: string[]) {\r\n        try {\r\n            if (this.translations[gCurrentLanguage]) {\r\n                const translation = this.translations[gCurrentLanguage][item];\r\n                if (translation) return addParams(translation, params);\r\n            }\r\n\r\n            // If we don't find a translation in the current language,\r\n            // we look in the other languages.\r\n            const languages = Object.keys(this.translations);\r\n            for (const lang of languages) {\r\n                const vocabulary = this.translations[lang];\r\n                const translation = vocabulary[item];\r\n                if (typeof translation !== 'string') continue;\r\n                return addParams(translation, params);\r\n            }\r\n\r\n            console.error(`Missing translation for item \"${item}\"!`, params);\r\n            return \"\";\r\n        }\r\n        catch (ex) {\r\n            throw Error(`Error while looking for a translation of \"${item}\":\\n${ex}`);\r\n        }\r\n    }\r\n}\r\n\r\n// Used for the states automate in order to parse a translation\r\n// with placeholders.\r\nenum Mode { Text, Escape, Placeholder }\r\n\r\n/**\r\n * In a translation, you can find placeholders for potential params.\r\n * They are marked with a dollar and a digit from 1 to 9.\r\n * For instance: \"Welcome mister $1!\".\r\n *\r\n * Order doesn't matter and you can have several occurences of the same\r\n * placeholder.\r\n * For instance: \"Hello $2! Welcome into $1. $1 is the best...\".\r\n *\r\n * @param   {string} translation - A string which can own placeholders.\r\n * @param   {string[]} params - Array of replacements for placeholders.\r\n * @returns The transformed string.\r\n */\r\nfunction addParams(translation: string, params: string[]): string {\r\n    let output = '';\r\n    let mark = 0;\r\n    let mode: Mode = Mode.Text;\r\n    let paramIndex = -1;\r\n    let paramValue = '';\r\n\r\n    for (let index = 0; index < translation.length; index++) {\r\n        const c = translation.charAt(index);\r\n        switch (mode) {\r\n            case Mode.Text:\r\n                if (c === '\\\\') {\r\n                    mode = Mode.Escape;\r\n                    output += translation.substr(mark, index - mark);\r\n                    mark = index + 1;\r\n                }\r\n                else if (c === '$') {\r\n                    mode = Mode.Placeholder;\r\n                    output += translation.substr(mark, index - mark);\r\n                    mark = index + 2;\r\n                }\r\n                break;\r\n            case Mode.Escape:\r\n                mode = Mode.Text;\r\n                break;\r\n            case Mode.Placeholder:\r\n                mode = Mode.Text;\r\n                paramIndex = parseInt(c, 10);\r\n                if (isNaN(paramIndex))\r\n                    throw Error(`Parsing error at position ${index} for translation \"${translation}\"!\r\nEscape \"$\" if you don't want to use a placeholder.`);\r\n                paramValue = params[paramIndex - 1] || \"\";\r\n                output += paramValue;\r\n                break;\r\n            default:\r\n                mode = Mode.Text;\r\n        }\r\n    }\r\n\r\n    return output + translation.substr(mark);\r\n}\r\n","/**\r\n * @module\r\n * This module provides a list of SVG icons definitions.\r\n * You can register new one if you wish.\r\n */\r\n\r\n\r\nexport type TIconDefinition =\r\n    [string, {}] |\r\n    [string, TIconDefinitionArray] |\r\n    [string, {}, TIconDefinitionArray] |\r\n    [string, TIconDefinitionArray, {}];\r\n\r\ninterface TIconDefinitionArray extends Array<TIconDefinition> { }\r\n\r\nexport interface IIconsDefinition {\r\n    [name: string]: TIconDefinition\r\n}\r\n\r\n\r\n\r\n/**\r\n * Register new icons.\r\n * @param {object}  icons - The  keys are the  name of the  icons, the\r\n * value is the object representing an SVG image.\r\n * @returns {undefined}\r\n */\r\nexport function register(icons: IIconsDefinition): void {\r\n    for (const key of Object.keys(icons)) {\r\n        const val: TIconDefinition = icons[key];\r\n        iconsBook[key] = val;\r\n    }\r\n};\r\n\r\n/**\r\n * @param {string} d - Path definition, as in the attribute `d` of the\r\n * SVG tag `path`.\r\n * @returns {array} SVG description.\r\n */\r\nfunction draw(d: string): TIconDefinition {\r\n    return ['path', { d, stroke: 'none', fill: 0 }];\r\n}\r\n\r\n\r\nexport const iconsBook: IIconsDefinition = {\r\n    android: draw('M15,-35H10V-40H15M-10,-35H-15V-40H-10M18,-49L24,-56C25,-57,25,-58,24,-59C23,-60,22,-60,21,-59L13,-52C9,-54,5,-55,0,-55C-5,-55,-9,-54,-13,-52L-21,-59C-22,-60,-23,-60,-24,-59C-25,-58,-25,-57,-24,-56L-18,-49C-25,-44,-30,-35,-30,-25H30C30,-35,25,-44,18,-49M43,-20A8,8,0,0,0,35,-12V23A8,8,0,0,0,43,30A8,8,0,0,0,50,23V-12A8,8,0,0,0,43,-20M-42,-20A8,8,0,0,0,-50,-12V23A8,8,0,0,0,-42,30A8,8,0,0,0,-35,23V-12A8,8,0,0,0,-42,-20M-30,30A5,5,0,0,0,-25,35H-20V53A8,8,0,0,0,-12,60A8,8,0,0,0,-5,53V35H5V53A8,8,0,0,0,13,60A8,8,0,0,0,20,53V35H25A5,5,0,0,0,30,30V-20H-30V30Z'),\r\n    bug: draw(\"M10,0H-10V-10H10M10,20H-10V10H10M40,-20H26C24,-24 21,-27 17,-30L25,-38L18,-45L7,-34C5,-35 3,-35 0,-35C-2,-35 -5,-35 -7,-34L-18,-45L-25,-38L-17,-30C-21,-27 -24,-24 -26,-20H-40V-10H-30C-30,-8 -30,-7 -30,-5V0H-40V10H-30V15C-30,17 -30,18 -30,20H-40V30H-26C-21,39 -11,45 0,45C11,45 21,39 26,30H40V20H30C30,18 30,17 30,15V10H40V0H30V-5C30,-7 30,-8 30,-10H40V-20Z\"),\r\n    camera: draw('M-40,-40H-25L-15,-50H15L25,-40H40A10,10,0,0,1,50,-30V30A10,10,0,0,1,40,40H-40A10,10,0,0,1,-50,30V-30A10,10,0,0,1,-40,-40M0,-25A25,25,0,0,0,-25,0A25,25,0,0,0,0,25A25,25,0,0,0,25,0A25,25,0,0,0,0,-25M0,-15A15,15,0,0,1,15,0A15,15,0,0,1,0,15A15,15,0,0,1,-15,0A15,15,0,0,1,0,-15Z'),\r\n    cancel: draw('M7,0L35,28V35H28L0,7L-28,35H-35V28L-7,0L-35,-28V-35H-28L0,-7L28,-35H35V-28L7,0Z'),\r\n    center: draw(\r\n        'M0,-15A15,15,0,0,0,-15,0A15,15,0,0,0,0,15A15,15,0,0,0,15,0A15,15,0,0,0,0,-15M35,35H15V45H35A10,10,0,0,0,45,35V15H35M35,-45H15V-35H35V-15H45V-35A10,10,0,0,0,35,-45M-35,-35H-15V-45H-35A10,10,0,0,0,-45,-35V-15H-35M-35,15H-45V35A10,10,0,0,0,-35,45H-15V35H-35V15Z'\r\n    ),\r\n    child: draw('M5,-50V-10H45A40,40,0,0,0,5,-50M37,19C42,13,45,4,45,-5H-28L-32,-15H-50V-5H-39C-39,-5,-29,15,-28,17C-34,20,-37,26,-37,33A18,18,0,0,0,-20,50C-11,50,-4,44,-3,35H8C9,44,16,50,25,50A18,18,0,0,0,43,33C43,27,40,23,37,19M-20,40A8,8,0,0,1,-27,33A8,8,0,0,1,-20,25A8,8,0,0,1,-12,33A8,8,0,0,1,-20,40M25,40A8,8,0,0,1,18,33A8,8,0,0,1,25,25A8,8,0,0,1,33,33A8,8,0,0,1,25,40Z'),\r\n    close: draw('M0,-50C28,-50,50,-28,50,0C50,28,28,50,0,50C-28,50,-50,28,-50,0C-50,-28,-28,-50,0,-50M18,-25L0,-7L-18,-25L-25,-18L-7,0L-25,18L-18,25L0,7L18,25L25,18L7,0L25,-18L18,-25Z'),\r\n    code: draw('M13,23L36,0L13,-23L20,-30L50,0L20,30L13,23M-13,23L-36,0L-13,-23L-20,-30L-50,0L-20,30L-13,23Z'),\r\n    copy: draw('M35,45H-20V-25H35M35,-35H-20A10,10,0,0,0,-30,-25V45A10,10,0,0,0,-20,55H35A10,10,0,0,0,45,45V-25A10,10,0,0,0,35,-35M20,-55H-40A10,10,0,0,0,-50,-45V25H-40V-45H20V-55Z'),\r\n    counter: draw('M-40,-40H40A10,10,0,0,1,50,-30V30A10,10,0,0,1,40,40H-40A10,10,0,0,1,-50,30V-30A10,10,0,0,1,-40,-40M-40,-30V30H-5V-30H-40M40,30V-30H34C35,-27,35,-25,35,-24C34,-21,32,-17,31,-16L20,-3L36,-4L36,3L10,2L10,-3C10,-3,25,-19,26,-20C27,-22,30,-30,23,-30C16,-30,17,-23,17,-23L9,-23C9,-23,9,-27,11,-30H5V30H18L18,26L23,26C23,26,27,25,27,20C28,15,23,15,23,15C22,15,17,16,17,20H10C10,20,10,9,23,9C36,9,35,20,35,20C35,20,35,26,29,28L32,30H40M-15,20H-23V-9L-32,-6V-12L-16,-18H-15V20Z'),\r\n    cut: draw('M35,-45L5,-15L15,-5L50,-40V-45M0,3A3,3,0,0,1,-2,0A3,3,0,0,1,0,-2A3,3,0,0,1,3,0A3,3,0,0,1,0,3M-30,40A10,10,0,0,1,-40,30C-40,24,-35,20,-30,20A10,10,0,0,1,-20,30C-20,36,-24,40,-30,40M-30,-20A10,10,0,0,1,-40,-30C-40,-36,-35,-40,-30,-40A10,10,0,0,1,-20,-30C-20,-24,-24,-20,-30,-20M-12,-22C-11,-24,-10,-27,-10,-30A20,20,0,0,0,-30,-50A20,20,0,0,0,-50,-30A20,20,0,0,0,-30,-10C-27,-10,-24,-11,-22,-12L-10,0L-22,12C-24,11,-27,10,-30,10A20,20,0,0,0,-50,30A20,20,0,0,0,-30,50A20,20,0,0,0,-10,30C-10,27,-11,24,-12,22L0,10L35,45H50V40L-12,-22Z'),\r\n    delete: draw(\r\n        'M35,-40H18L13,-45H-12L-17,-40H-35V-30H35M-30,35A10,10,0,0,0,-20,45H20A10,10,0,0,0,30,35V-25H-30V35Z'),\r\n    direction: draw('M10,13V0H-10V15H-20V-5A5,5,0,0,1,-15,-10H10V-22L28,-5M49,-4L4,-49H3C2,-50,-2,-50,-4,-49L-49,-4C-50,-2,-50,2,-49,4L-4,49C-2,50,2,51,4,49L49,4C51,2,51,-2,49,-4Z'),\r\n    down: draw('M-30,-30L0,30,30,-30'),\r\n    'down-double': draw('M-30,-40L0,-10,30,-40M-30,10L0,40,30,10'),\r\n    edit: draw(\r\n        \"M24,-46C22,-46,20,-46,19,-44L8,-34L35,-7L45,-17C48,-21,48,-25,45,-28L29,-44C28,-46,26,-46,24,-46M5,-30L-36,11L-23,12L-22,23L-11,24L-9,37L31,-3M-39,15L-47,49L-14,40L-15,29L-27,28L-28,16\"\r\n    ),\r\n    eraser: draw('M21,-42L46,-17C50,-14,50,-7,46,-3L0,43C-8,50,-20,50,-28,43L-46,25C-50,21,-50,15,-46,11L7,-42C11,-46,17,-46,21,-42M-39,18L-21,36C-17,39,-11,39,-7,36L11,18L-14,-7L-39,18Z'),\r\n    'export': draw('M-35,40H35V30H-35M35,-15H15V-45H-15V-15H-35L0,20L35,-15Z'),\r\n    file: draw('M10,-50H-30A10,10,0,0,0,-40,-40V40A10,10,0,0,0,-30,50H30A10,10,0,0,0,40,40V-20L10,-50M30,40H-30V-40H5V-15H30V40Z'),\r\n    \"flag-jp\": [\"g\", {\r\n        stroke: \"none\"\r\n    },\r\n        [\r\n            [\"path\", {\r\n                fill: \"#000\",\r\n                d: \"M-65,50h130v-100h-130z\"\r\n            }],\r\n            [\"path\", {\r\n                fill: \"#fff\",\r\n                d: \"M-60,45h120v-90h-120z\"\r\n            }],\r\n            [\"circle\", {\r\n                fill: \"#bc002d\",\r\n                r: 24\r\n            }]\r\n        ]\r\n    ],\r\n    \"flag-fr\": [\"g\", {\r\n        stroke: \"none\"\r\n    },\r\n        [\r\n            [\"path\", {\r\n                fill: \"#000\",\r\n                d: \"M-65,50h130v-100h-130z\"\r\n            }],\r\n            [\"path\", {\r\n                fill: \"#002395\",\r\n                d: \"M-60,45h40v-90h-40z\"\r\n            }],\r\n            [\"path\", {\r\n                fill: \"#fff\",\r\n                d: \"M-20,45h40v-90h-40z\"\r\n            }],\r\n            [\"path\", {\r\n                fill: \"#ed2939\",\r\n                d: \"M20,45h40v-90h-40z\"\r\n            }]\r\n        ]\r\n    ],\r\n    \"flag-it\": [\"g\", {\r\n        stroke: \"none\"\r\n    },\r\n        [\r\n            [\"path\", {\r\n                fill: \"#000\",\r\n                d: \"M-65,50h130v-100h-130z\"\r\n            }],\r\n            [\"path\", {\r\n                fill: \"#009246\",\r\n                d: \"M-60,45h40v-90h-40z\"\r\n            }],\r\n            [\"path\", {\r\n                fill: \"#fff\",\r\n                d: \"M-20,45h40v-90h-40z\"\r\n            }],\r\n            [\"path\", {\r\n                fill: \"#ce2b37\",\r\n                d: \"M20,45h40v-90h-40z\"\r\n            }]\r\n        ]\r\n    ],\r\n    \"flag-de\": [\"g\", {\r\n        stroke: \"none\"\r\n    },\r\n        [\r\n            [\"path\", {\r\n                fill: \"#000\",\r\n                d: \"M-65,41h130v-82h-130z\"\r\n            }],\r\n            [\"path\", {\r\n                fill: \"#ffce00\",\r\n                d: \"M-60,36h120v-24h-120z\"\r\n            }],\r\n            [\"path\", {\r\n                fill: \"#dd0000\",\r\n                d: \"M-60,12h120v-24h-120z\"\r\n            }]\r\n        ]\r\n    ],\r\n    \"flag-en\": [\"g\", {\r\n        stroke: \"none\"\r\n    },\r\n        [\r\n            [\"path\", {\r\n                fill: \"#000\",\r\n                d: \"M-65,37h130v-75h-130z\"\r\n            }],\r\n            [\"path\", {\r\n                fill: \"#bb133e\",\r\n                d: \"M-60,32h120v-65h-120z\"\r\n            }],\r\n            [\"path\", {\r\n                fill: \"#fff\",\r\n                d: \"M-60,22h120v5h-120z\"\r\n            }],\r\n            [\"path\", {\r\n                fill: \"#fff\",\r\n                d: \"M-60,12h120v5h-120z\"\r\n            }],\r\n            [\"path\", {\r\n                fill: \"#fff\",\r\n                d: \"M-60,2h120v5h-120z\"\r\n            }],\r\n            [\"path\", {\r\n                fill: \"#fff\",\r\n                d: \"M-60,-8h120v5h-120z\"\r\n            }],\r\n            [\"path\", {\r\n                fill: \"#fff\",\r\n                d: \"M-60,-18h120v5h-120z\"\r\n            }],\r\n            [\"path\", {\r\n                fill: \"#fff\",\r\n                d: \"M-60,-28h120v5h-120z\"\r\n            }],\r\n            [\"path\", {\r\n                fill: \"#002664\",\r\n                d: \"M-60,-33h48v35h-48z\"\r\n            }],\r\n\r\n        ]\r\n    ],\r\n    folder: draw('M40,30H-40V-20H40M40,-30H0L-10,-40H-40C-46,-40,-50,-36,-50,-30V30A10,10,0,0,0,-40,40H40A10,10,0,0,0,50,30V-20C50,-26,46,-30,40,-30Z'),\r\n    font: draw('M25,-20H40V40H45V45H25V40H30V25H10L3,40H10V45H-10V40H-5L25,-20M30,-15L13,20H30V-15M-35,-45H-10C-4,-45,0,-41,0,-35V20H-15V-5H-30V20H-45V-35C-45,-41,-41,-45,-35,-45M-30,-35V-15H-15V-35H-30Z'),\r\n    'format-align-center': draw('M-45,-45H45V-35H-45V-45M-25,-25H25V-15H-25V-25M-45,-5H45V5H-45V-5M-25,15H25V25H-25V15M-45,35H45V45H-45V35Z'),\r\n    'format-align-justify': draw('M-45,-45H45V-35H-45V-45M-45,-25H45V-15H-45V-25M-45,-5H45V5H-45V-5M-45,15H45V25H-45V15M-45,35H45V45H-45V35Z'),\r\n    'format-align-left': draw('M-45,-45H45V-35H-45V-45M-45,-25H15V-15H-45V-25M-45,-5H45V5H-45V-5M-45,15H15V25H-45V15M-45,35H45V45H-45V35Z'),\r\n    'format-align-right': draw(' M-45,-45H45V-35H-45V-45M-15,-25H45V-15H-15V-25M-45,-5H45V5H-45V-5M-15,15H45V25H-15V15M-45,35H45V45H-45V35Z '),\r\n    'format-bold': draw('M8,18H-10V3H8A8,8,0,0,1,15,10A8,8,0,0,1,8,18M-10,-27H5A8,8,0,0,1,13,-20A8,8,0,0,1,5,-12H-10M18,-6C23,-9,26,-15,26,-20C26,-31,18,-40,6,-40H-25V30H10C21,30,29,22,29,11C29,3,24,-3,18,-6Z'),\r\n    'format-italic': draw('M-10,-40V-25H1L-16,15H-30V30H10V15H-1L16,-25H30V-40H-10Z'),\r\n    'format-float-center': draw('M-15,-25H15V5H-15V-25M-45,-45H45V-35H-45V-45M-45,15H45V25H-45V15M-45,35H25V45H-45V35Z'),\r\n    'format-float-left': draw('M-45,-25H-15V5H-45V-25M-45,-45H45V-35H-45V-45M45,-25V-15H-5V-25H45M45,-5V5H-5V-5H45M-45,15H25V25H-45V15M-45,35H45V45H-45V35Z'),\r\n    'format-float-none': draw('M-45,-25H-15V5H-45V-25M-45,-45H45V-35H-45V-45M45,-5V5H-5V-5H45M-45,15H25V25H-45V15M-45,35H45V45H-45V35Z'),\r\n    'format-float-right': draw('M15,-25H45V5H15V-25M-45,-45H45V-35H-45V-45M5,-25V-15H-45V-25H5M-15,-5V5H-45V-5H-15M-45,15H25V25H-45V15M-45,35H45V45H-45V35Z'),\r\n    'format-header': draw('M-40,-40H-30V-10H-10V-40H0V30H-10V0H-30V30H-40V-40M13,-23L31,-5L13,13L20,20L45,-5L20,-30L13,-23Z'),\r\n    'format-underline': draw(\r\n        'M-35,45H35V35H-35V45M0,25A30,30,0,0,0,30,-5V-45H18V-5A18,18,0,0,1,0,13A18,18,0,0,1,-17,-5V-45H-30V-5A30,30,0,0,0,0,25Z'\r\n    ),\r\n    fullscreen: draw('M-35,-35H-10V-25H-25V-10H-35V-35M10,-35H35V-10H25V-25H10V-35M25,10H35V35H10V25H25V10M-10,25V35H-35V10H-25V25H-10Z'),\r\n    gear: draw(\r\n        'M0,18A18,18,0,0,1,-17,0A18,18,0,0,1,0,-17A18,18,0,0,1,18,0A18,18,0,0,1,0,18M37,5C37,3,38,2,38,0C38,-2,37,-3,37,-5L48,-13C49,-14,49,-15,48,-16L38,-34C38,-35,36,-35,35,-35L23,-30C20,-32,18,-33,14,-35L13,-48C12,-49,11,-50,10,-50H-10C-11,-50,-12,-49,-12,-48L-14,-35C-17,-33,-20,-32,-23,-30L-35,-35C-36,-35,-38,-35,-38,-34L-48,-16C-49,-15,-49,-14,-48,-13L-37,-5C-37,-3,-37,-2,-37,0C-37,2,-37,3,-37,5L-48,13C-49,14,-49,15,-48,16L-38,34C-38,35,-36,35,-35,35L-23,30C-20,32,-17,33,-14,35L-12,48C-12,49,-11,50,-10,50H10C11,50,12,49,13,48L14,35C18,33,20,32,23,30L35,35C36,35,38,35,38,34L48,16C49,15,49,14,48,13L37,5Z'\r\n    ),\r\n    gps: draw(\r\n        'M0,-20A20,20,0,0,1,20,0A20,20,0,0,1,0,20A20,20,0,0,1,-20,0A20,20,0,0,1,0,-20M-45,5H-55V-5H-45C-42,-26,-26,-42,-5,-45V-55H5V-45C26,-42,43,-26,45,-5H55V5H45C43,26,26,43,5,45V55H-5V45C-26,43,-42,26,-45,5M0,-35A35,35,0,0,0,-35,0A35,35,0,0,0,0,35A35,35,0,0,0,35,0A35,35,0,0,0,0,-35Z'\r\n    ),\r\n    hand: draw(\r\n        \"M-10,-50A10,10,0,0,1,0,-40V-17C0,-17,10,-19,10,-14C10,-14,20,-15,20,-10C20,-10,30,-11,30,-6C30,-6,40,-7,40,-2V15C40,20,25,45,25,50H-15C-15,50,-25,15,-40,5C-40,5,-45,-25,-20,0V-40A10,10,0,0,1,-10,-50Z\"\r\n    ),\r\n    heart: draw('M0,47L-7,40C-33,17,-50,1,-50,-17C-50,-33,-38,-45,-22,-45C-14,-45,-5,-41,0,-35C5,-41,14,-45,23,-45C38,-45,50,-33,50,-17C50,1,33,17,7,40L0,47Z'),\r\n    hide: draw(\r\n        'M-1,-15L15,1C15,1,15,0,15,0A15,15,0,0,0,0,-15C0,-15,-1,-15,-1,-15M-22,-11L-15,-3C-15,-2,-15,-1,-15,0A15,15,0,0,0,0,15C1,15,2,15,3,15L11,22C8,24,4,25,0,25A25,25,0,0,1,-25,0C-25,-4,-24,-8,-22,-11M-50,-39L-39,-27L-36,-25C-45,-18,-51,-10,-55,0C-46,22,-25,38,0,38C8,38,15,36,22,33L24,35L39,50L45,44L-44,-45M0,-25A25,25,0,0,1,25,0C25,3,24,6,23,9L38,24C45,18,51,9,55,0C46,-22,25,-37,0,-37C-7,-37,-14,-36,-20,-34L-9,-23C-6,-24,-3,-25,0,-25Z'\r\n    ),\r\n    home: draw('M-10,40V10H10V40H35V0H50L0,-45L-50,0H-35V40H-10Z'),\r\n    image: draw('M5,-15H33L5,-42V-15M-30,-50H10L40,-20V40A10,10,0,0,1,30,50H-30C-36,50,-40,46,-40,40V-40C-40,-46,-36,-50,-30,-50M-30,40H15L30,40V0L10,20L0,10L-30,40M-20,-15A10,10,0,0,0,-30,-5A10,10,0,0,0,-20,5A10,10,0,0,0,-10,-5A10,10,0,0,0,-20,-15Z'),\r\n    import: draw('M-15,20V-10H-35L0,-45L35,-10H15V20H-15M-35,40V30H35V40H-35Z'),\r\n    improvement: draw(\"M0,50A50,50,0,0,1,-50,0A50,50,0,0,1,0,-50A50,50,0,0,1,50,0A50,50,0,0,1,0,50M0,-25L-25,0H-10V20H10V0H25L0,-25Z\"),\r\n    info: draw('M8,-40A8,8,0,0,0,0,-32A8,8,0,0,0,8,-25A8,8,0,0,0,15,-32A8,8,0,0,0,8,-40M6,-16C0,-16,-17,-3,-17,-3C-17,-2,-17,-2,-16,-1C-16,1,-16,1,-15,0C-14,0,-12,-2,-9,-3C1,-10,-8,6,-12,32C-14,45,-2,39,1,37C4,35,12,29,13,28C14,28,13,27,12,26C12,25,11,26,11,26C8,28,2,32,1,29C0,27,6,7,9,-6C10,-10,12,-17,6,-16Z'),\r\n    left: ['path', { fill: 0, d: 'M40,-5V5H-20L8,33L0,40L-39,0L0,-40L8,-32L-20,-5H40Z' }],\r\n    'left-double': draw('M-10,-30L-40,0,-10,30M40,-30L10,0,40,30'),\r\n    link: draw('M-7,7C-5,9,-5,12,-7,14C-9,16,-12,16,-14,14C-24,4,-24,-11,-14,-21V-21L4,-39C13,-49,29,-49,39,-39C49,-29,49,-13,39,-4L31,4C32,0,31,-4,29,-8L32,-11C38,-16,38,-26,32,-32C26,-38,16,-38,11,-32L-7,-14C-13,-8,-13,1,-7,7M7,-14C9,-16,12,-16,14,-14C24,-4,24,11,14,21V21L-4,39C-13,49,-29,49,-39,39C-49,29,-49,13,-39,4L-31,-4C-31,0,-31,4,-29,8L-32,11C-38,16,-38,26,-32,32C-26,38,-16,38,-11,32L7,14C13,8,13,-1,7,-7C5,-9,5,-12,7,-14Z'),\r\n    location: draw('M0,-2A13,13,0,0,1,-12,-15A13,13,0,0,1,0,-27A13,13,0,0,1,13,-15A13,13,0,0,1,0,-2M0,-50A35,35,0,0,0,-35,-15C-35,11,0,50,0,50C0,50,35,11,35,-15A35,35,0,0,0,0,-50Z'),\r\n    logout: draw(\r\n        \"M25,26V10H-10V-10H25V-26L51,0L25,26M5,-50A10,10,0,0,1,15,-40V-20H5V-40H-40V40H5V20H15V40A10,10,0,0,1,5,50H-40A10,10,0,0,1,-50,40V-40A10,10,0,0,1,-40,-50H5Z\"\r\n    ),\r\n    mail: draw(\r\n        'M40,-40H-40A10,10,0,0,0,-50,-30V30A10,10,0,0,0,-40,40H40A10,10,0,0,0,50,30V-30A10,10,0,0,0,40,-40M40,30H-40V-20L0,5L40,-20V30M40,-30L0,-5L-40,-30V-30H40V-30Z'\r\n    ),\r\n    map: draw('M15,35L-15,24V-35L15,-24M43,-45C42,-45,42,-45,42,-45L15,-34L-15,-45L-43,-35C-44,-35,-45,-34,-45,-33V43A3,3,0,0,0,-42,45C-42,45,-42,45,-42,45L-15,34L15,45L43,36C44,35,45,34,45,33V-42A3,3,0,0,0,43,-45Z'),\r\n    \"map-layer\": draw('M0,20L37,-9L45,-15L0,-50L-45,-15L-37,-9M0,33L-37,4L-45,10L0,45L45,10L37,4L0,33Z'),\r\n    menu: draw('M-45,-30H45V-20H-45V-30M-45,-5H45V5H-45V-5M-45,20H45V30H-45V20Z'),\r\n    minus: draw('M35,5H-35V-5H35V5Z'),\r\n    \"minus-o\": draw('M0,40C-22,40,-40,22,-40,0C-40,-22,-22,-40,0,-40C22,-40,40,-22,40,0C40,22,22,40,0,40M0,-50A50,50,0,0,0,-50,0A50,50,0,0,0,0,50A50,50,0,0,0,50,0A50,50,0,0,0,0,-50M-25,5H25V-5H-25'),\r\n    \"minus-small\": draw('M35,35V-35H-35V35H35M35,-45A10,10,0,0,1,45,-35V35A10,10,0,0,1,35,45H-35A10,10,0,0,1,-45,35V-35C-45,-41,-40,-45,-35,-45H35M25,-5V5H-25V-5H25Z'),\r\n    more: draw('M20,0A10,10,0,0,1,30,-10A10,10,0,0,1,40,0A10,10,0,0,1,30,10A10,10,0,0,1,20,0M-10,0A10,10,0,0,1,0,-10A10,10,0,0,1,10,0A10,10,0,0,1,0,10A10,10,0,0,1,-10,0M-40,0A10,10,0,0,1,-30,-10A10,10,0,0,1,-20,0A10,10,0,0,1,-30,10A10,10,0,0,1,-40,0Z'),\r\n    movie: draw('M44,-49L25,-45L38,-27L48,-29L44,-49M10,-42L0,-40L14,-23L24,-25L10,-42M-15,-37L-24,-35L-11,-18L-1,-20L-15,-37M-39,-32L-44,-32A10,10,0,0,0,-52,-20L-50,-10L-25,-15L-39,-32M-50,-10V40C-50,46,-45,50,-40,50H40C46,50,50,46,50,40V-10H-50Z'),\r\n    ok: draw('M45,-25L-15,35L-42,8L-35,0L-15,21L38,-32L45,-25Z'),\r\n    pack: ['path', { fill: 0, d: 'M45,23C45,24,44,26,42,27L3,49C2,50,1,50,0,50C-1,50,-2,50,-3,49L-42,27C-44,26,-45,24,-45,23V-22C-45,-24,-44,-26,-42,-27L-3,-49C-2,-50,-1,-50,0,-50C1,-50,2,-50,3,-49L42,-27C44,-26,45,-24,45,-22V23M0,-39L-35,-20V20L0,39L35,20V-20L0,-39M0,-29L24,-15L0,-1L-24,-15L0,-29M25,14L5,26V8L25,-3V14M-5,26L-25,14V-3L-5,8V26Z' }],\r\n    pause: draw('M10,35H30V-35H10M-30,35H-10V-35H-30V35Z'),\r\n    play: draw('M-20,-34V36L35,1L-20,-34Z'),\r\n    plug: draw('M20,-25V-45H10V-25H-10V-45H-20V-25H-20C-25,-25,-30,-20,-30,-15V13L-12,30V45H13V30L30,13V-15C30,-20,25,-25,20,-25Z'),\r\n    plus: draw('M35,5H5V35H-5V5H-35V-5H-5V-35H5V-5H35V5Z'),\r\n    \"plus-o\": draw('M0,40C-22,40,-40,22,-40,0C-40,-22,-22,-40,0,-40C22,-40,40,-22,40,0C40,22,22,40,0,40M0,-50A50,50,0,0,0,-50,0A50,50,0,0,0,0,50A50,50,0,0,0,50,0A50,50,0,0,0,0,-50M5,-25H-5V-5H-25V5H-5V25H5V5H25V-5H5V-25Z'),\r\n    \"plus-small\": draw('M35,35V-35H-35V35H35M35,-45A10,10,0,0,1,45,-35V35A10,10,0,0,1,35,45H-35A10,10,0,0,1,-45,35V-35C-45,-41,-40,-45,-35,-45H35M-5,-25H5V-5H25V5H5V25H-5V5H-25V-5H-5V-25Z'),\r\n    print: ['path', {\r\n        fill: 0,\r\n        d: 'M30,-45H-30V-25H30M35,0A5,5,0,0,1,30,-5A5,5,0,0,1,35,-10A5,5,0,0,1,40,-5A5,5,0,0,1,35,0M20,35H-20V10H20M35,-20H-35A15,15,0,0,0,-50,-5V25H-30V45H30V25H50V-5A15,15,0,0,0,35,-20Z'\r\n    }],\r\n    question: draw(\"M-10,35H5V50H-10V35M0,-50C27,-49,38,-22,23,-2C18,3,12,7,8,11C5,15,5,20,5,25H-10C-10,17,-10,10,-7,5C-3,0,3,-3,8,-7C20,-18,17,-34,0,-35A15,15,0,0,0,-15,-20H-30A30,30,0,0,1,0,-50Z\"),\r\n    redo: draw('M32,-7C23,-15,11,-20,-2,-20C-26,-20,-45,-5,-52,16L-40,20C-35,4,-20,-7,-2,-7C7,-7,16,-4,23,2L5,20H50V-25L32,-7Z'),\r\n    refresh: draw('M28,-28C21,-35,11,-40,0,-40A40,40,0,0,0,-40,0A40,40,0,0,0,0,40C19,40,34,27,39,10H28C24,22,13,30,0,30A30,30,0,0,1,-30,0A30,30,0,0,1,0,-30C8,-30,16,-27,21,-21L5,-5H40V-40L28,-28Z'),\r\n    report: draw('M10,-50H-30A10,10,0,0,0,-40,-40V40A10,10,0,0,0,-30,50H30A10,10,0,0,0,40,40V-20L10,-50M30,40H-30V-40H5V-15H30V40M-10,5H-25V-5H-10V5M10,5H-5V-5H10V5M-10,20H-25V10H-10V20M10,20H-5V10H10V20M-10,35H-25V25H-10V35M10,35H-5V25H10V35Z'),\r\n    right: ['path', { fill: 0, d: 'M-40,-5V5H20L-7,33L0,40L39,0L0,-40L-7,-32L20,-5H-40Z' }],\r\n    'right-double': draw('M10,-30L40,0,10,30M-40,-30L-10,0,-40,30'),\r\n    run: draw('M23,-32A10,10,0,0,0,33,-42A10,10,0,0,0,23,-52A10,10,0,0,0,13,-42A10,10,0,0,0,23,-32M5,37L10,15L20,25V55H30V18L20,8L23,-7C29,0,39,5,50,5V-5C41,-5,33,-9,28,-17L23,-25C22,-28,18,-30,15,-30C13,-30,13,-29,11,-29L-15,-18V5H-5V-12L4,-15L-4,25L-28,20L-30,30L5,37M-40,-15A5,5,0,0,1,-45,-20A5,5,0,0,1,-40,-25H-25V-15H-40M-35,-35A5,5,0,0,1,-40,-40A5,5,0,0,1,-35,-45H-10V-35H-35M-45,5A5,5,0,0,1,-50,0A5,5,0,0,1,-45,-5H-25V5H-45Z'),\r\n    search: draw('M-12,-45A33,33,0,0,1,20,-12C20,-4,17,3,12,9L14,10H18L43,35L35,43L10,18V14L9,12C3,17,-4,20,-12,20A33,33,0,0,1,-45,-12A33,33,0,0,1,-12,-45M-12,-35C-25,-35,-35,-25,-35,-12C-35,0,-25,10,-12,10C0,10,10,0,10,-12C10,-25,0,-35,-12,-35Z'),\r\n    select: draw('M35,35H-35V-35H15V-45H-35C-41,-45,-45,-41,-45,-35V35A10,10,0,0,0,-35,45H35A10,10,0,0,0,45,35V-5H35M-20,-10L-27,-2L-5,20L45,-30L38,-37L-5,6L-20,-10Z'),\r\n    sitemap: draw('M-15,-50V-20H-5V-5H-35C-41,-5,-45,-1,-45,5V20H-55V50H-25V20H-35V5H-5V20H-15V50H15V20H5V5H35V20H25V50H55V20H45V5C45,-1,41,-5,35,-5H5V-20H15V-50H-15Z'),\r\n    unselect: draw('M35,-45H-35C-41,-45,-45,-41,-45,-35V35A10,10,0,0,0,-35,45H35A10,10,0,0,0,45,35V-35C45,-41,41,-45,35,-45M35,-35V35H-35V-35H35Z'),\r\n    share: draw('M30,20C26,20,23,22,20,24L-15,3C-15,2,-15,1,-15,0C-15,-1,-15,-2,-15,-3L20,-24C23,-22,26,-20,30,-20A15,15,0,0,0,45,-35A15,15,0,0,0,30,-50A15,15,0,0,0,15,-35C15,-34,15,-33,15,-31L-20,-11C-22,-13,-26,-15,-30,-15A15,15,0,0,0,-45,0A15,15,0,0,0,-30,15C-26,15,-22,13,-20,11L16,32C16,33,15,34,15,35C15,43,22,50,30,50C38,50,45,43,45,35A15,15,0,0,0,30,20Z'),\r\n    show: draw('M0,-15A15,15,0,0,0,-15,0A15,15,0,0,0,0,15A15,15,0,0,0,15,0A15,15,0,0,0,0,-15M0,25A25,25,0,0,1,-25,0A25,25,0,0,1,0,-25A25,25,0,0,1,25,0A25,25,0,0,1,0,25M0,-37C-25,-37,-46,-22,-55,0C-46,22,-25,38,0,38C25,38,46,22,55,0C46,-22,25,-37,0,-37Z'),\r\n    \"skip-next\": draw('M20,30H30V-30H20M-30,30L13,0L-30,-30V30Z'),\r\n    \"skip-next2\": draw('M-40,-35V35L-5,0M30,-35V35H40V-35M-5,-35V35L30,0'),\r\n    \"skip-prev\": draw('M-30,30V-30H-20V30H-30M-12,0L30,-30V30L-12,0Z'),\r\n    \"skip-prev2\": draw('M40,-35V35L5,0M-30,-35V35H-40V-35M5,-35V35L-30,0'),\r\n    speaker: draw('M40,35L33,28C41,21,45,11,45,0C45,-11,41,-21,33,-28L40,-35C49,-26,55,-14,55,0C55,14,49,26,40,35M26,21L19,14C23,11,25,6,25,0C25,-6,23,-11,19,-14L26,-21C32,-16,35,-8,35,0C35,8,32,16,26,21M-40,-45H0A10,10,0,0,1,10,-35V35A10,10,0,0,1,0,45H-40A10,10,0,0,1,-50,35V-35A10,10,0,0,1,-40,-45M-20,-35A10,10,0,0,0,-30,-25A10,10,0,0,0,-20,-15A10,10,0,0,0,-10,-25A10,10,0,0,0,-20,-35M-20,-5A20,20,0,0,0,-40,15A20,20,0,0,0,-20,35A20,20,0,0,0,0,15A20,20,0,0,0,-20,-5M-20,5A10,10,0,0,1,-10,15A10,10,0,0,1,-20,25A10,10,0,0,1,-30,15A10,10,0,0,1,-20,5Z'),\r\n    \"speaker-off\": draw('M-50,-34L-44,-40L45,49L39,55L31,48C30,49,28,50,25,50H-25C-31,50,-35,46,-35,40V-19L-50,-34M0,30A15,15,0,0,1,-15,15C-15,11,-14,8,-11,5L-18,-2C-22,3,-25,8,-25,15A25,25,0,0,0,0,40C7,40,13,38,17,33L10,26C7,29,4,30,0,30M25,15A25,25,0,0,0,0,-10H-1L-34,-43C-33,-47,-29,-50,-25,-50H25A10,10,0,0,1,35,-40V26L25,16V15M0,-40C-6,-40,-10,-36,-10,-30A10,10,0,0,0,0,-20A10,10,0,0,0,10,-30C10,-36,5,-40,0,-40Z'),\r\n    \"split-vertical\": draw('M30,20V5H15V50H5V-50H15V-5H30V-20L50,0L30,20M-50,0L-30,20V5H-15V50H-5V-50H-15V-5H-30V-20L-50,0Z'),\r\n    \"split-horizontal\": draw('M-20,30H-5V15H-50V5H50V15H5V30H20L0,50L-20,30M0,-50L-20,-30H-5V-15H-50V-5H50V-15H5V-30H20L0,-50Z'),\r\n    star: draw('M0,26L31,45L23,10L50,-14L14,-17L0,-50L-14,-17L-50,-14L-23,10L-31,45L0,26Z'),\r\n    stat: draw('M-45,50V-20H-25V50H-45M-10,50V-50H10V50H-10M25,50V10H45V50H25Z'),\r\n    'switch': draw('M-45,-40V3L-30,-12L-15,5C-10,10,-10,15,-10,15V45H10V10C10,10,10,5,7,0C5,-5,0,-10,0,-10L-15,-27L-2,-40M30,-40L8,-18L10,-15C10,-15,15,-10,17,-5C18,-3,19,-1,19,1L45,-25'),\r\n    'tri-down': draw('M-23,-17L0,6L23,-17L30,-10L0,20L-30,-10L-23,-17Z'),\r\n    'tri-left': draw('M17,23L-6,0L17,-23L10,-30L-20,0L10,30L17,23Z'),\r\n    'tri-right': draw('M-17,23L6,0L-17,-23L-10,-30L20,0L-10,30L-17,23Z'),\r\n    'tri-up': draw('M-23,17L0,-6L23,17L30,10L0,-20L-30,10L-23,17Z'),\r\n    twitter: draw('M52,-30C48,-28,44,-27,40,-27C44,-29,48,-33,49,-38C45,-36,41,-34,36,-33C32,-37,26,-40,20,-40C8,-40,-1,-30,-1,-19C-1,-17,-1,-15,-1,-14C-19,-15,-34,-23,-45,-36C-47,-33,-48,-29,-48,-25C-48,-18,-44,-11,-38,-7C-42,-7,-45,-8,-48,-10C-48,-10,-48,-10,-48,-10C-48,1,-41,9,-31,11C-33,12,-35,12,-37,12C-38,12,-39,12,-41,12C-38,20,-30,26,-21,26C-28,32,-37,36,-47,36C-49,36,-51,36,-52,35C-43,41,-31,45,-19,45C20,45,42,12,42,-16C42,-17,42,-18,42,-19C46,-22,49,-26,52,-30Z'),\r\n    undo: draw('M3,-20C-11,-20,-23,-15,-32,-7L-50,-25V20H-5L-23,2C-16,-4,-7,-7,3,-7C20,-7,35,4,41,20L52,16C45,-5,26,-20,3,-20Z'),\r\n    up: draw('M-30,30L0,-30,30,30'),\r\n    'up-double': draw('M-30,40L0,10,30,40M-30,-10L0,-40,30,-10'),\r\n    user: draw(\r\n        'M0,-40A20,20,0,0,1,20,-20A20,20,0,0,1,0,0A20,20,0,0,1,-20,-20A20,20,0,0,1,0,-40M0,10C22,10,40,19,40,30V40H-40V30C-40,19,-22,10,0,10Z'\r\n    ),\r\n    wait: draw('M0,-5A5,5,0,0,0,-5,0A5,5,0,0,0,0,5A5,5,0,0,0,5,0A5,5,0,0,0,0,-5M3,-50C25,-50,26,-32,14,-26C9,-24,7,-19,6,-14C8,-13,10,-11,12,-9C30,-19,50,-15,50,3C50,25,32,26,26,14C24,9,19,7,14,6C13,8,11,10,9,12C19,30,15,50,-2,50C-25,50,-25,32,-14,26C-9,24,-7,19,-6,14C-8,13,-10,11,-12,9C-30,19,-50,15,-50,-2C-50,-25,-32,-26,-26,-14C-24,-9,-19,-7,-14,-6C-13,-8,-11,-10,-9,-12C-19,-30,-15,-50,3,-50Z'),\r\n    \"zoom-in\": draw('M18,10L43,35L35,43L10,18V14L9,12C3,17,-4,20,-12,20A33,33,0,0,1,-45,-12A33,33,0,0,1,-12,-45A33,33,0,0,1,20,-12C20,-4,17,3,12,9L14,10H18M-12,10C0,10,10,0,10,-12C10,-25,0,-35,-12,-35C-25,-35,-35,-25,-35,-12C-35,0,-25,10,-12,10M0,-10H-10V0H-15V-10H-25V-15H-15V-25H-10V-15H0V-10Z'),\r\n    \"zoom-out\": draw('M18,10H14L12,9C17,3,20,-4,20,-12A33,33,0,0,0,-12,-45A33,33,0,0,0,-45,-12A33,33,0,0,0,-12,20C-4,20,3,17,9,12L10,14V18L35,43L43,35L18,10M-12,10C-25,10,-35,0,-35,-12C-35,-25,-25,-35,-12,-35C0,-35,10,-25,10,-12C10,0,0,10,-12,10M-25,-15H0V-10H-25V-15Z'),\r\n    warning: draw('M0,-50L-55,45H55M0,-30L38,35H-38M-5,-10V10H5V-10M-5,20V30H5V20')\r\n};\r\n\r\n\r\n// Synonyms.\r\nconst synonyms: { [name: string]: string } = {\r\n    add: \"plus\",\r\n    back: \"left\",\r\n    help: \"question\",\r\n    save: \"export\"\r\n};\r\nfor (const key of Object.keys(synonyms)) {\r\n    const val: string = synonyms[key];\r\n    iconsBook[key] = iconsBook[val];\r\n}\r\n","import * as React from \"react\";\r\nimport castBoolean from \"../converter/boolean\";\r\nimport castInteger from \"../converter/integer\";\r\nimport castUnit from \"../converter/unit\";\r\nimport { iconsBook, TIconDefinition } from \"../icons\";\r\nimport \"./icon.css\";\r\n\r\nenum EnumPenColor { B, W, P, PD, PL, S, SD, SL }\r\n\r\ninterface IIconProps {\r\n    visible?: boolean;\r\n    content?: string | TIconDefinition;\r\n    size?: string | number;\r\n    enabled?: boolean;\r\n    animate?: boolean;\r\n    flipH?: boolean;\r\n    flipV?: boolean;\r\n    rotate?: number;\r\n    pen0?: EnumPenColor | string;\r\n    pen1?: EnumPenColor | string;\r\n    pen2?: EnumPenColor | string;\r\n    pen3?: EnumPenColor | string;\r\n    pen4?: EnumPenColor | string;\r\n    pen5?: EnumPenColor | string;\r\n    pen6?: EnumPenColor | string;\r\n    pen7?: EnumPenColor | string;\r\n    onClick?: () => void;\r\n    onHide?: () => void;\r\n}\r\n\r\nexport default class Icon extends React.Component<IIconProps, {}> {\r\n    static isValidIconName(name: string): boolean {\r\n        return typeof iconsBook[name] !== 'undefined';\r\n    }\r\n\r\n    static getAllIconNames(): string[] {\r\n        return Object.keys(iconsBook).sort();\r\n    }\r\n\r\n    private refIcon: any;\r\n    private visible: boolean;\r\n    private timeoutHandle: number;\r\n\r\n    constructor(props: IIconProps) {\r\n        super(props);\r\n        this.refIcon = React.createRef();\r\n        this.visible = false;\r\n        this.timeoutHandle = 0;\r\n    }\r\n\r\n    triggerVisibleAnimation() {\r\n        const\r\n            elemIcon = this.refIcon.current,\r\n            visible = this.visible;\r\n        if( !elemIcon ) return;\r\n        if (this.timeoutHandle) {\r\n            window.clearTimeout(this.timeoutHandle);\r\n            this.timeoutHandle = 0;\r\n        }\r\n        requestAnimationFrame(() => {\r\n            if (visible) elemIcon.classList.remove(\"zero\");\r\n            else {\r\n                elemIcon.classList.add(\"zero\");\r\n                const slot = this.props.onHide;\r\n                if (typeof slot === 'function') {\r\n                    this.timeoutHandle = window.setTimeout(slot, 300);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const\r\n            p = this.props,\r\n            visible = castBoolean(p.visible, true),\r\n            enabled = castBoolean(p.enabled, true),\r\n            animate = castBoolean(p.animate, false),\r\n            flipH = castBoolean(p.flipH, false),\r\n            flipV = castBoolean(p.flipV, false),\r\n            size = castUnit(p.size, \"28px\"),\r\n            content = castContent(p.content),\r\n            rotate = castInteger(p.rotate, 0),\r\n            onClick = p.onClick,\r\n            classes = [\"tfw-view-icon\"];\r\n        const svgContent = createSvgContent(content, p);\r\n        if (!svgContent) return null;\r\n\r\n        if (!enabled) classes.push(\"disabled\");\r\n        if (animate) classes.push(\"animate\");\r\n        if (visible) classes.push(\"zero\");\r\n        if (typeof onClick === 'function' && enabled) classes.push(\"active\");\r\n\r\n        let transform = \"\";\r\n        if (rotate !== 0) {\r\n            transform += `rotate(${rotate}deg) `;\r\n        }\r\n        if (flipH || flipV) {\r\n            transform += `scale(${flipH ? -1 : 1},${flipV ? -1 : 1})`;\r\n        }\r\n        const style: React.CSSProperties = { width: size, height: size };\r\n        if (transform.length > 0) style.transform = transform;\r\n\r\n        requestAnimationFrame(() => this.triggerVisibleAnimation());\r\n        this.visible = visible;\r\n\r\n        return (\r\n            <svg className={classes.join(\" \")}\r\n                ref={this.refIcon}\r\n                viewBox=\"-65 -65 130 130\"\r\n                preserveAspectRatio=\"xMidYMid\"\r\n                width={size}\r\n                height={size}\r\n                onClick={enabled ? onClick : undefined}\r\n                style={style}>\r\n                {svgContent}\r\n                < g strokeWidth=\"6\" fill=\"none\" strokeLinecap=\"round\" strokeLinejoin=\"round\" >\r\n                    {createSvgContent(content, p)}\r\n                </g>\r\n            </svg>\r\n        );\r\n    }\r\n}\r\n\r\nfunction createSvgContent(def: TIconDefinition, props: IIconProps, key: string = \"\"): any {\r\n    const\r\n        elementName = def[0],\r\n        { attributes, children } = parseDef(def);\r\n\r\n    if (typeof elementName === 'undefined') return <g key={key}></g>;\r\n\r\n    const attribs: React.Attributes = manageColors({ ...attributes }, props);\r\n    if (key.length > 0) attribs.key = key;\r\n\r\n    return React.createElement(\r\n        elementName,\r\n        attribs,\r\n        children.map((child, index) => createSvgContent(child, props, `${index}`))\r\n    ) as React.ReactSVGElement;\r\n}\r\n\r\nconst CLASSES = [\"P\", \"PL\", \"PD\", \"S\", \"SL\", \"SD\"];\r\nconst PENS = \"01234567\";\r\n\r\n/**\r\n * If the value of the attribute \"fill\" is an element of CLASSES,\r\n * it will be removed and replace with a class.\r\n * Same thing for the attibute \"stroke\".\r\n *\r\n * @example\r\n * manageColors({ fill: \"1\" }) === { className: \"thn-svg-fill-1\" }\r\n *\r\n * @param   attribs [description]\r\n * @param   props   [description]\r\n * @returns         [description]\r\n */\r\nfunction manageColors(attribs: { [key: string]: any }, props: IIconProps) {\r\n    // @TODO For special forms of \"fill\" and \"stroke\", add classes.\r\n    const classes = (attribs.className || \"\").split(\" \");\r\n\r\n    [\"fill\", \"stroke\"].forEach(attribName => {\r\n        const attribValue = `${attribs[attribName]}`;\r\n        if (typeof attribValue === 'undefined') return;\r\n        if (attribValue === 'undefined') return;\r\n        const key = `${attribValue}`.toUpperCase();\r\n        if (CLASSES.indexOf(key) === -1 && PENS.indexOf(key) === -1) return;\r\n        if (PENS.indexOf(attribValue) !== -1 ) {\r\n            // If we find fill=\"3\", then we must look for property pen3.\r\n            const pen = props[`pen${attribValue}`];\r\n            if( typeof pen === 'string' ) {\r\n                if( CLASSES.indexOf(pen) === -1 ) {\r\n                    attribs[attribName] = pen;\r\n                } else {\r\n                    delete attribs[attribName];\r\n                    classes.push(`thm-svg-${attribName}${pen}`);\r\n                }\r\n                return;\r\n            }\r\n        }\r\n        delete attribs[attribName];\r\n        classes.push(`thm-svg-${attribName}${key}`);\r\n    });\r\n\r\n    attribs.className = classes.join(\" \").trim();\r\n    return attribs;\r\n}\r\n\r\nfunction parseDef([name, arg1, arg2]: TIconDefinition) {\r\n    let attributes: undefined | {},\r\n        children: undefined | any[];\r\n\r\n    if (Array.isArray(arg1)) children = arg1;\r\n    else if (typeof arg1 !== 'undefined') attributes = arg1;\r\n    if (Array.isArray(arg2)) children = arg2;\r\n    else if (typeof arg2 !== 'undefined') attributes = arg2;\r\n\r\n    if (typeof attributes === 'undefined') attributes = {};\r\n    if (typeof children === 'undefined') children = [];\r\n\r\n    return { attributes, children };\r\n}\r\n\r\nfunction castContent(content: string | TIconDefinition = \"ok\"): TIconDefinition {\r\n    if (Array.isArray(content)) return content;\r\n    return iconsBook[content] || [];\r\n}\r\n","import * as React from \"react\"\r\nimport Icon from \"./icon\"\r\nimport \"./button.css\"\r\nimport Touchable from \"../behavior/touchable\"\r\nimport castArray from \"../converter/array\"\r\nimport castString from \"../converter/string\"\r\nimport castBoolean from \"../converter/boolean\"\r\n\r\ninterface IButtonProps {\r\n    label?: string;\r\n    icon?: string;\r\n    wide?: boolean;\r\n    wait?: boolean;\r\n    flat?: boolean;\r\n    small?: boolean;\r\n    warning?: boolean;\r\n    enabled?: boolean;\r\n    classes?: string[] | string;\r\n    tag?: any;\r\n    onClick?: (tag: any) => void;\r\n}\r\n\r\nexport default class Button extends React.Component<IButtonProps, {}> {\r\n    readonly touchable: Touchable;\r\n    readonly ref: React.RefObject<HTMLButtonElement>;\r\n\r\n    constructor(props: IButtonProps) {\r\n        super(props);\r\n        this.handleClick = this.handleClick.bind(this);\r\n        this.touchable = new Touchable({ onTap: this.handleClick });\r\n        this.ref = React.createRef();\r\n    }\r\n\r\n    componentDidMount() {\r\n        const element = this.ref.current;\r\n        if (!element) return;\r\n        this.touchable.element = element;\r\n    }\r\n\r\n    handleClick() {\r\n        const slot = this.props.onClick;\r\n        if (typeof slot !== 'function') return;\r\n        slot(this.props.tag);\r\n    }\r\n\r\n    render() {\r\n        const p = this.props,\r\n            label = castString(p.label, \"\"),\r\n            icon = castString(p.icon, \"\"),\r\n            wide = castBoolean(p.wide, false),\r\n            wait = castBoolean(p.wait, false),\r\n            flat = castBoolean(p.flat, false),\r\n            small = castBoolean(p.small, false),\r\n            enabled = !wait && castBoolean(p.enabled, true),\r\n            warning = castBoolean(p.warning, false),\r\n            classes = [\"tfw-view-button\"].concat(castArray(p.classes));\r\n        if (wide) classes.push(\"wide\");\r\n        if (flat) {\r\n            classes.push(\"flat\");\r\n            classes.push(warning ? \"thm-fgS\" : \"thm-fgP\");\r\n        }\r\n        else {\r\n            if (enabled) classes.push(\"thm-ele-button\");\r\n            classes.push(warning ? \"thm-bgS\" : \"thm-bgP\");\r\n        }\r\n        if (small) classes.push(\"small\");\r\n        if (label.length === 0) classes.push(\"floating\");\r\n\r\n        this.touchable.enabled = enabled;\r\n        return (\r\n            <button ref={this.ref}\r\n                className={classes.join(\" \")}\r\n                disabled={!enabled}>\r\n                {icon.length > 0\r\n                    ? <Icon content={icon}\r\n                        animate={wait}\r\n                        size={`${small ? 1.375 : 1.875}rem`} />\r\n                    : null}\r\n                {label.length > 0\r\n                    ? <div className=\"text\" > {label} </div>\r\n                    : null}\r\n            </button>);\r\n    }\r\n}\r\n","export default {\n    /**\n     * Execute a remote service.\n     * @param {string} name - Service's name.\n     * @param {any} args - Service's arguments.\n     * @return {Promise<any>} Resolves in any data returned by the service.\n     */\n    exec,\n    /**\n     * Authenticate a user.\n     * @param {string} username\n     * @param {string} password\n     * @return {Promise<User>}\n     */\n    login,\n    /**\n     * @return {boolean} `true` if we are working on localhost.\n     */\n    isLocalhost,\n    /**\n     * @param {string} root - URL of another webserver.\n     * @return {WebService} an instance of a WebService bound to another webserver.\n     */\n    create,\n    setRoot\n};\n\nexport enum EnumWebServiceError {\n    OK = 0,\n    BAD_ROLE,\n    BAD_TYPE,\n    CONNECTION_FAILURE,\n    MISSING_AUTOLOGIN,\n    UNKNOWN_USER,\n    HTTP_ERROR\n}\n\nexport enum EnumLoginError {\n    WRONG_CHALLENGE = -1,\n    MISSING_WAITING_STATE = -2, // USER:waiting.\n    MISSING_RESPONSE_STATE = -3, // USER:response.\n    WRONG_LENGTH = -4, // Response has not the correct length.\n    WRONG_PASSWORD = -5,\n    ACCOUNT_DISABLED = -6\n}\n\ninterface ICallResponse {\n    code: EnumWebServiceError;\n    data: any;\n}\n\nconst gLastSuccessfulLogin: { username: string, password: string } = {\n    username: \"\", password: \"\"\n};\n\nclass User {\n    constructor(\n        private _email: string,\n        private _nickname: string,\n        private _roles: string[]) { }\n\n    get email() { return this._email; }\n\n    get nickname() { return this._nickname; }\n\n    get roles() { return this._roles.slice(); }\n\n    hasRole(role: string): boolean {\n        return -1 !== this._roles.indexOf(role);\n    }\n}\n\nclass WebService {\n    constructor(private root: string = \"\") {\n        if (this.root.charAt(this.root.length - 1) !== '/') {\n            this.root += \"/\";\n        }\n    }\n\n    setRoot(root: string) {\n        this.root = root\n    }\n\n    getAbsoluteUrl(url: string): string {\n        if( typeof url !== 'string' ) return url;\n        if( url.startsWith(\"https://\") || url.startsWith(\"http://\") )\n            return url;\n        return `${this.root}${url}`;\n    }\n\n    async exec(name: string, args: any = null): Promise<any> {\n        const response: ICallResponse = await this.callService(name, args);\n        if (response.code === EnumWebServiceError.OK) {\n            const obj = JSON.parse(response.data);\n            return obj;\n        } else {\n            throw response;\n        }\n    }\n\n    async login(username: string, password: string): Promise<User> {\n        const challenge = await this.exec(\"tfw.login.Challenge\", username);\n        const h = hash(challenge, password);\n        const response = await this.exec(\"tfw.login.Response\", h);\n        if (typeof response === 'number') {\n            throw response;\n        }\n        gLastSuccessfulLogin.username = username;\n        gLastSuccessfulLogin.password = password;\n        return new User(response.login, response.name, response.roles);\n    }\n\n    private async callService(name: string, args: {}): Promise<ICallResponse> {\n        const data = new FormData();\n        data.append(\"s\", name);\n        data.append(\"i\", JSON.stringify(args));\n        const\n            url = `${this.root}tfw/svc.php`,\n            init: RequestInit = { method: \"POST\", body: data, credentials: \"include\" },\n            response = await fetch(url, init);\n        if (response.ok) {\n            return {\n                code: EnumWebServiceError.OK,\n                data: await response.text()\n            }\n        }\n        return {\n            code: EnumWebServiceError.HTTP_ERROR,\n            data: response.statusText\n        }\n    }\n}\n\nfunction hash(code: number[], pwd: string): number[] {\n    const output = Array(16).fill(0);\n    const pass = [];\n\n    for (let i = 0; i < pwd.length; i++) {\n        pass.push(pwd.charCodeAt(i));\n    }\n    if (256 % pass.length == 0) {\n        pass.push(0);\n    }\n\n    let j = 0;\n    for (let i = 0; i < 256; i++) {\n        output[i % 16] ^= i + pass[i % pass.length];\n        const k1 = code[j++ % code.length] % 16;\n        const k2 = code[j++ % code.length] % 16;\n        const k3 = code[j++ % code.length] % 16;\n        output[k3] ^= (output[k3] + 16 * k2 + k3) % 256;\n        output[k2] ^= (output[k1] + output[k3]) % 256;\n    }\n\n    return output;\n}\n\n//==================\n// Default instance\n//------------------\n\nconst gInstance = new WebService();\n\nfunction setRoot(root: string) {\n        gInstance.setRoot(root)\n}\n\nasync function exec(name: string, args: any = null): Promise<any> {\n    return await gInstance.exec(name, args);\n}\n\nasync function login(username: string, password: string): Promise<User> {\n    return gInstance.login(username, password);\n}\n\nfunction isLocalhost(): boolean {\n    return location.hostname === 'localhost';\n}\n\nfunction create(root: string): WebService {\n    return new WebService(root);\n}\n","/**\r\n * The ESCAPE key is often used to close a dialog, collapse a combo list, ...\r\n * This module helps you nesting closable things.\r\n *\r\n * @example\r\n * import * from EscapeHandler from \"./tfw/escape-handler\"\r\n * EscapeHandler.add(() => myDialog.close());\r\n * EscapeHandler.fire();\r\n */\r\n\r\nexport default {add, fire};\r\n\r\ntype THandler = ()=>void;\r\n\r\nlet handlers:THandler[] = [];\r\nlet initialized = false;\r\n\r\nexport function add(listener: THandler) {\r\n    if( !initialized) {\r\n        initialized = true;\r\n        addKeyboardListener();\r\n    }\r\n\r\n    handlers.push(listener);\r\n}\r\n\r\nexport function fire() {\r\n    if( handlers.length === 0 ) return;\r\n    const handler = handlers.pop();\r\n    if (typeof handler === 'function') handler();\r\n}\r\n\r\nfunction addKeyboardListener() {\r\n    document.addEventListener(\"keydown\", evt => {\r\n        if( evt.key !== 'Escape') return;\r\n        fire();\r\n    }, true);\r\n}\r\n","const EMPTY_FUNCTION = () => { };\r\n\r\ntype TFunction = () => void;\r\n\r\n\r\nexport default function castBoolean(value: any, defaultValue: TFunction = EMPTY_FUNCTION): TFunction {\r\n    if (typeof value === 'function') return value;\r\n    return defaultValue;\r\n}\r\n","import Gesture from \"../gesture\"\nimport Theme from \"../theme\"\nimport castString from \"../converter/string\"\nimport castBoolean from \"../converter/boolean\"\nimport castFunction from \"../converter/function\"\nimport \"./touchable.css\"\n\ninterface IArgs {\n    element?: HTMLElement;\n    enabled?: boolean;\n    color?: string;\n    onTap?: () => void;\n}\n\ninterface IRect {\n    left: number;\n    top: number;\n    width: number;\n    height: number;\n}\n\nexport default class Touchable {\n    _element: HTMLElement | undefined;\n    _enabled: boolean = true;\n    color: string = \"#000\";\n    accent: boolean = false;\n    onTap: () => void;\n\n    constructor(args: IArgs) {\n        this.element = args.element;\n        this.enabled = castBoolean(args.enabled, true);\n        this.color = castString(args.color, \"\");\n        this.onTap = castFunction(args.onTap);\n    }\n\n    fire() {\n        if (!this.enabled) return;\n\n        const handler = this.onTap;\n        if (typeof handler === 'function') {\n            handler();\n        }\n    }\n\n    get enabled() { return this._enabled; }\n    set enabled(value: boolean) { this._enabled = value; }\n\n    get element() { return this._element; }\n    set element(element: HTMLElement | undefined) {\n        const that = this;\n        if (typeof element === 'undefined') return;\n        Gesture(element).on({\n            keydown(evt: any) {\n                if (!that.enabled) return;\n\n                const key = evt.key;\n                if (key === \" \" || key === \"Enter\") {\n                    evt.preventDefault();\n                    evt.stopPropagation();\n                    that.fire();\n                }\n            },\n\n            down(evt) {\n                if (!that.enabled) return;\n            },\n\n            up(evt) {\n                if (!that.removeTouchDisk) return;\n                that.removeTouchDisk();\n                delete that.removeTouchDisk;\n            },\n\n            tap(evt) {\n                if (!that.enabled) return;\n                that.fire();\n\n                const rect = element.getBoundingClientRect();\n                const style = window.getComputedStyle(element);\n                const screen = createScreen(rect);\n                screen.style.borderRadius = style.getPropertyValue(\"border-radius\");\n                const x = evt.x || 0;\n                const y = evt.y || 0;\n                const w = Math.max(x, rect.width - x);\n                const h = Math.max(y, rect.height - y);\n                const radius = Math.ceil(1.1 * Math.sqrt(w * w + h * h));\n                const ripple = document.createElement(\"div\");\n                screen.appendChild(ripple);\n                ripple.style.left = `${x - radius}px`;\n                ripple.style.top = `${y - radius}px`;\n                ripple.style.width = `${2 * radius}px`;\n                ripple.style.height = `${2 * radius}px`;\n                if (that.color.length > 0) {\n                    ripple.style.background = that.color;\n                } else {\n                    ripple.style.background = Theme.isDark() ? \"#fff\" : \"#000\";\n                }\n                window.setTimeout(() => ripple.className = \"open\");\n                window.setTimeout(() => document.body.removeChild(screen), 500);\n            }\n        })\n    }\n}\n\n\nfunction createScreen(rect: IRect) {\n    const div = document.createElement(\"div\");\n    div.className = \"tfw-behavior-touchable\";\n    div.style.left = `${rect.left}px`;\n    div.style.top = `${rect.top}px`;\n    div.style.width = `${rect.width}px`;\n    div.style.height = `${rect.height}px`;\n    document.body.appendChild(div);\n    return div;\n}\n","const CAPACITY = 3;\r\n\r\n/**\r\n * Helper to manage a pointer move.\r\n * It gives you the location, the speed and the acceleration of your pointer.\r\n *\r\n * @type {[type]}\r\n */\r\nexport default class Moves {\r\n    private _x0: number;\r\n    private _y0: number;\r\n    private _time0: number;\r\n    private _x: number[] = new Array(CAPACITY);\r\n    private _y: number[] = new Array(CAPACITY);\r\n    private _time: number[] = new Array(CAPACITY);\r\n    private _cursor: number = 0;\r\n\r\n    constructor(x: number = 0, y: number = 0) {\r\n        this.init(x, y);\r\n    }\r\n\r\n    init(x: number, y: number) {\r\n        this._time0 = this.now;\r\n        this._x0 = x;\r\n        this._y0 = y;\r\n        this._x = this._x.fill(this._x0, 0, CAPACITY);\r\n        this._y = this._y.fill(this._y0, 0, CAPACITY);\r\n        this._time = this._time.fill(this._time0, 0, CAPACITY);\r\n    }\r\n\r\n    _index(shift: number) {\r\n        return (this._cursor + shift) % CAPACITY;\r\n    }\r\n\r\n    get now() { return Date.now(); }\r\n\r\n    add(x: number, y: number) {\r\n        const idx = (this._cursor + CAPACITY - 1) % CAPACITY;\r\n        this._time[idx] = this.now;\r\n        this._x[idx] = x;\r\n        this._y[idx] = y;\r\n        this._cursor = idx;\r\n    }\r\n\r\n    get elapsedTime() { return this.now - this._time0; }\r\n\r\n    get x() { return this._x[this._cursor]; }\r\n    get y() { return this._y[this._cursor]; }\r\n\r\n    get startX() { return this._x0; }\r\n    get startY() { return this._y0; }\r\n\r\n    get speedX() {\r\n        const idx0 = this._cursor;\r\n        const idx1 = this._index(1);\r\n        const time = this._time[idx0] - this._time[idx1];\r\n        if (time <= 0) return 0;\r\n        return (this._x[idx0] - this._x[idx1]) / time;\r\n    }\r\n\r\n    get speedY() {\r\n        const idx0 = this._cursor;\r\n        const idx1 = this._index(1);\r\n        const time = this._time[idx0] - this._time[idx1];\r\n        if (time <= 0) return 0;\r\n        return (this._y[idx0] - this._y[idx1]) / time;\r\n    }\r\n\r\n    get accelX() {\r\n        const idx0 = this._index(0);\r\n        const time0 = this._time[idx0];\r\n\r\n        const idx1 = this._index(1);\r\n        const time1 = this._time[idx1];\r\n\r\n        const time01 = time0 - time1;\r\n\r\n        if (time01 <= 0) return 0;\r\n\r\n        const idx2 = this._index(2);\r\n        const time2 = this._time[idx2];\r\n\r\n        const time12 = time1 - time2;\r\n\r\n        if (time12 <= 0) return 0;\r\n\r\n        const x0 = this._x[idx0];\r\n        const x1 = this._x[idx1];\r\n        const x2 = this._x[idx2];\r\n\r\n        const speed01 = (x0 - x1) / time01;\r\n        const speed12 = (x1 - x2) / time12;\r\n\r\n        return (speed01 - speed12) / time01;\r\n    }\r\n\r\n    get accelY() {\r\n        const idx0 = this._index(0);\r\n        const time0 = this._time[idx0];\r\n\r\n        const idx1 = this._index(1);\r\n        const time1 = this._time[idx1];\r\n\r\n        const time01 = time0 - time1;\r\n\r\n        if (time01 <= 0) return 0;\r\n\r\n        const idx2 = this._index(2);\r\n        const time2 = this._time[idx2];\r\n\r\n        const time12 = time1 - time2;\r\n\r\n        if (time12 <= 0) return 0;\r\n\r\n        const y0 = this._y[idx0];\r\n        const y1 = this._y[idx1];\r\n        const y2 = this._y[idx2];\r\n\r\n        const speed01 = (y0 - y1) / time01;\r\n        const speed12 = (y1 - y2) / time12;\r\n\r\n        return (speed01 - speed12) / time01;\r\n    }\r\n}\r\n","type TIdentifier = number | null;\r\n\r\nexport default class Finger {\r\n    private fingers: TIdentifier[] = [];\r\n\r\n    getIndex(identifier: number): number {\r\n        const index = this.fingers.indexOf(identifier);\r\n        if (index !== -1) return index;\r\n        const indexOfFirstNull = this.fingers.indexOf(null);\r\n        if (indexOfFirstNull !== -1) {\r\n            this.fingers[indexOfFirstNull] = identifier;\r\n            return indexOfFirstNull;\r\n        }\r\n        this.fingers.push(identifier);\r\n        return this.fingers.length - 1;\r\n    }\r\n\r\n    remove(identifier: number) {\r\n        const index = this.fingers.indexOf(identifier);\r\n        if (index !== -1) this.fingers[index] = null;\r\n    }\r\n}\r\n","/**\r\n * BasicHandler(\r\n *     element: HTMLElement,\r\n *     handleDown: TBasicHandler,\r\n *     handleUp: TBasicHandler,\r\n *     handleMove: TBasicHandler\r\n * )\r\n *\r\n * Deals with three basic events : DOWN, UP and MOVE.\r\n * If the device has several input touches, we will return\r\n * only one event.\r\n *\r\n * A TBasicHandler is a synthetic event object:\r\n *   - x: X coordinate relative to the viewport, not including any scroll offset.\r\n *   - y: Y coordinate relative to the viewport, not including any scroll offset.\r\n *   - startX\r\n *   - startY\r\n *   - index: For multi-touch system. The first one is 0, the second is 1, etc.\r\n *   - buttons: 1 = left, 2 = right.\r\n *   - mouse: \"mouse\" | \"touch\" | \"pen\".\r\n *   - clear(): Call stopPropagation() and preventDefault() on this event.\r\n *\r\n */\r\nimport Finger from \"./finger\"\r\nimport { IBasicEvent } from \"./basic-handler.types\"\r\n\r\ninterface IMovingElement {\r\n    // Coords relative to the element.\r\n    x: number,\r\n    y: number,\r\n    index: number,\r\n    target: HTMLElement,\r\n    handleUp: (event: IBasicEvent) => void,\r\n    handleMove: (event: IBasicEvent) => void\r\n}\r\n\r\nconst movingElements: IMovingElement[] = [];\r\n\r\nwindow.addEventListener(\"mousemove\", (event: MouseEvent) => {\r\n    for (const movingElem of movingElements) {\r\n        if (event.cancelBubble) continue;\r\n        const { target, handleMove, x, y, index } = movingElem;\r\n        if (typeof handleMove !== 'function') continue;\r\n        try {\r\n            handleMove({\r\n                x: event.clientX - x,\r\n                y: event.clientY - y,\r\n                index,\r\n                event,\r\n                pointer: \"mouse\",\r\n                buttons: translateButtons(event),\r\n                target,\r\n                clear: createClear(event)\r\n            })\r\n        }\r\n        catch (ex) {\r\n            console.error(`[tfw.gesture.basic-handler] window.mousemove`, ex)\r\n            console.error(\"    handler=\", handleMove)\r\n            console.error(\"    event=\", event)\r\n        }\r\n    }\r\n}, false);\r\n\r\nwindow.addEventListener(\"mouseup\", (event: MouseEvent) => {\r\n    for (const movingElem of movingElements) {\r\n        if (event.cancelBubble) continue;\r\n        const { target, handleUp, x, y, index } = movingElem;\r\n        if (typeof handleUp !== 'function') continue;\r\n        try {\r\n            handleUp({\r\n                x: event.clientX - x,\r\n                y: event.clientY - y,\r\n                index,\r\n                event,\r\n                pointer: \"mouse\",\r\n                buttons: translateButtons(event),\r\n                target,\r\n                clear: createClear(event)\r\n            })\r\n        }\r\n        catch (ex) {\r\n            console.error(`[tfw.gesture.basic-handler] window.mouseup`, ex)\r\n            console.error(\"    handler=\", handleUp)\r\n            console.error(\"    event=\", event)\r\n        }\r\n    }\r\n    movingElements.splice(0, movingElements.length)\r\n}, false);\r\n\r\n\r\n\r\n\r\ntype TTouchEventHandler = (evt: TouchEvent) => void;\r\n\r\ntype TMouseEventHandler = (evt: MouseEvent) => void;\r\n\r\ntype TBasicHandler = (evt: IBasicEvent) => void | undefined;\r\n\r\ninterface IDeviceHandlers {\r\n    touchstart?: TTouchEventHandler;\r\n    touchend?: TTouchEventHandler;\r\n    touchmove?: TTouchEventHandler;\r\n    mousedown?: TMouseEventHandler;\r\n    mouseup?: TMouseEventHandler;\r\n    mousemove?: TMouseEventHandler;\r\n    mouseout?: TMouseEventHandler;\r\n}\r\n\r\nexport default class BasicHandler {\r\n    readonly element: HTMLElement;\r\n    mouseType: string = \"\";\r\n    mouseTypeTime: number = 0;\r\n    deviceHandlers: IDeviceHandlers = {};\r\n    fingers: Finger = new Finger();\r\n    pressed: boolean = false;\r\n\r\n    constructor(element: HTMLElement,\r\n                handleDown: TBasicHandler,\r\n                handleUp: TBasicHandler,\r\n                handleMove: TBasicHandler) {\r\n        this.element = element;\r\n        attachDownEvent.call(this, handleDown, handleUp, handleMove);\r\n    }\r\n\r\n    /**\r\n     * If you device can hold mouse and touch events, you will receive two events.\r\n     * This function prevent it.\r\n     *\r\n     * @param   mouseType\r\n     * @returns If `false`, we must ignore this event.\r\n     */\r\n    checkMouseType(mouseType: string): boolean {\r\n        const now = Date.now();\r\n        const delay = now - this.mouseTypeTime;\r\n        this.mouseTypeTime = now;\r\n        if (this.mouseType.length === 0 || delay > 500) {\r\n            // If the user waits more than 500ms, he can change of mouse.\r\n            this.mouseType = mouseType;\r\n            return true;\r\n        }\r\n        return this.mouseType === mouseType;\r\n    }\r\n\r\n    detachEvents() {\r\n        const element = this.element;\r\n        const { touchstart, mousedown } = this.deviceHandlers;\r\n\r\n        if (touchstart) element.removeEventListener(\"touchstart\", touchstart, false);\r\n        if (mousedown) element.removeEventListener(\"mousedown\", mousedown, false);\r\n    }\r\n}\r\n\r\n\r\nfunction attachDownEvent(this: BasicHandler,\r\n                         handleDown: TBasicHandler,\r\n                         handleUp: TBasicHandler,\r\n                         handleMove: TBasicHandler) {\r\n    attachDownEventTouch.call(this, handleDown, handleUp, handleMove);\r\n    attachDownEventMouse.call(this, handleDown, handleUp, handleMove);\r\n}\r\n\r\n\r\nfunction attachDownEventTouch(this: BasicHandler,\r\n                              handleDown: TBasicHandler,\r\n                              handleUp: TBasicHandler,\r\n                              handleMove: TBasicHandler) {\r\n    const { element, deviceHandlers } = this;\r\n    const handler = (event: TouchEvent) => {\r\n        if (!this.checkMouseType(\"touch\")) return;\r\n        const rect = element.getBoundingClientRect();\r\n        for (const touch of event.changedTouches) {\r\n            const index = this.fingers.getIndex(touch.identifier)\r\n            const x = touch.clientX - rect.left;\r\n            const y = touch.clientY - rect.top;\r\n            handleDown({\r\n                x,\r\n                y,\r\n                index,\r\n                event,\r\n                buttons: 1,\r\n                pointer: \"touch\",\r\n                target: element,\r\n                clear: createClear(event)\r\n            });\r\n            movingElements.push({\r\n                handleUp, handleMove, index,\r\n                target: element,\r\n                x,\r\n                y\r\n            })\r\n        }\r\n    };\r\n    deviceHandlers.touchstart = handler;\r\n    element.addEventListener(\"touchstart\", handler, false);\r\n}\r\n\r\n\r\nfunction attachDownEventMouse(this: BasicHandler,\r\n                              handleDown: TBasicHandler,\r\n                              handleUp: TBasicHandler,\r\n                              handleMove: TBasicHandler) {\r\n    const { element, deviceHandlers } = this;\r\n    const handler = (event: MouseEvent) => {\r\n        if (!this.checkMouseType(\"mouse\")) return;\r\n        const rect = element.getBoundingClientRect();\r\n        this.pressed = true;\r\n        const x = event.clientX - rect.left;\r\n        const y = event.clientY - rect.top;\r\n        if (typeof handleDown === 'function') {\r\n            handleDown({\r\n                x,\r\n                y,\r\n                index: 0,\r\n                buttons: translateButtons(event),\r\n                pointer: \"mouse\",\r\n                event,\r\n                target: element,\r\n                clear: createClear(event)\r\n            });\r\n        }\r\n        movingElements.push({\r\n            handleUp, handleMove,\r\n            index: 0,\r\n            target: element,\r\n            x: rect.left,\r\n            y: rect.top\r\n        })\r\n    };\r\n    deviceHandlers.mousedown = handler;\r\n    element.addEventListener(\"mousedown\", handler, false);\r\n}\r\n\r\n\r\nfunction createClear(evt: MouseEvent | TouchEvent) {\r\n    return () => {\r\n        evt.preventDefault();\r\n        evt.stopPropagation();\r\n    }\r\n}\r\n\r\n/**\r\n * Some mouses have only one button (on Mac, for instance).\r\n * So we will emulate the other buttons by looking at Ctrl and Meta keys.\r\n */\r\nfunction translateButtons(event: MouseEvent): number {\r\n    const { buttons, metaKey, ctrlKey } = event;\r\n    if (buttons !== 1) return buttons;\r\n    if (metaKey && !ctrlKey) return 2;\r\n    if (!metaKey && ctrlKey) return 4;\r\n    return buttons;\r\n}\r\n","/**\n * Here is the list of all parameters used if all the handlers.\n * * x, y: coord relative to the upper-left corner of the element.\n *\n * tap({ x: number, y: number, index: number })\n *\n */\n\nimport Moves from \"./moves\"\nimport BasicHandler from \"./basic-handler\"\nimport { IBasicEvent } from \"./basic-handler.types\"\nimport { IEvent, IWheelEvent } from \"./types\"\n\nconst SYMBOL = Symbol(\"gesture\");\n\nlet ID = 0;\n\nexport interface IHTMLElementWithGesture extends HTMLElement {\n    // A special attribute to attach Gesture object.\n    [SYMBOL]?: Gesture\n}\n\ntype THandlers = {\n    tap?: (event: IEvent) => void;\n    down?: (event: IEvent) => void;\n    up?: (event: IEvent) => void;\n    pan?: (event: IEvent) => void;\n    pandown?: (event: IEvent) => void;\n    panup?: (event: IEvent) => void;\n    panvertical?: (event: IEvent) => void;\n    swipe?: (event: IEvent) => void;\n    swipedown?: (event: IEvent) => void;\n    swipeup?: (event: IEvent) => void;\n    swipevertical?: (event: IEvent) => void;\n    swipeleft?: (event: IEvent) => void;\n    keydown?: (event: KeyboardEvent) => void;\n    keyup?: (event: KeyboardEvent) => void;\n    wheel?: (event: IWheelEvent) => void;\n    [key: string]: ((evt: any) => void) | undefined;\n};\n\ninterface IPointer {\n    isDown: boolean;\n    moves: Moves;\n    rect: {\n        left: number;\n        top: number;\n        width: number;\n        height: number;\n    };\n    type?: string | null;\n    time?: number;\n    id?: number;\n}\n\nconst STANDARD_EVENTS = [\"keydown\", \"keyup\", \"wheel\"];\n\nclass Gesture {\n    //private readonly basicHandler: BasicHandler;\n    private handlers: THandlers;\n    private element: IHTMLElementWithGesture;\n    private readonly pointers: IPointer[];\n    private readonly id: number;\n\n    constructor(elem: IHTMLElementWithGesture) {\n        elem[SYMBOL] = this;\n        this.id = ID++;\n        this.element = elem;\n        this.handlers = {};\n        new BasicHandler(\n            elem,\n            this.handleDown.bind(this),\n            this.handleUp.bind(this),\n            this.handleMove.bind(this)\n        );\n        this.pointers = new Array(3);\n        elem.addEventListener(\"contextmenu\", (evt) => { evt.preventDefault() }, false);\n    }\n\n    get identifier() { return this.id; }\n\n    on(handlers: THandlers) {\n        this.handlers = wrapSpecialHandlers(Object.assign(this.handlers, handlers));\n        Object.keys(this.handlers).forEach(eventName => {\n            if (STANDARD_EVENTS.indexOf(eventName) === -1) return;\n            // This is a non-pointer event. (i.e., keyboard, resize, ...)\n            const handler = this.handlers[eventName];\n            if (typeof handler === 'function' ) {\n                this.element.addEventListener(eventName, handler, false);\n            }\n        });\n    }\n\n    /**\n     * Returns true if current gesture has at least one of the provided handlers.\n     */\n    private hasHandlerFor(...names: string[]) {\n        for( const name of names ) {\n            if (this.handlers[name]) return true;\n        }\n        return false;\n    }\n\n    private getPointer(index: number) {\n        const pointers = this.pointers;\n        if (typeof pointers[index] === 'undefined') {\n            pointers[index] = {\n                isDown: false,\n                moves: new Moves(0, 0),\n                rect: { left: 0, top: 0, width: 0, height: 0 }\n            }\n        }\n        return pointers[index];\n    }\n\n    private handleDown(event: IBasicEvent) {\n        // We don't want to deal with more than 3 simultaneous touches.\n        if (event.index > 2) return;\n\n        const { x, y } = event;\n        const { element } = this;\n        const ptr = this.getPointer(event.index);\n        ptr.isDown = true;\n        ptr.moves.init(x, y);\n\n        if (this.handlers.down) {\n            this.handlers.down(Object.assign(event, { x, y, target: element }))\n        }\n    }\n\n    private handleUp(event: IBasicEvent) {\n        // We want not deal with more than 3 simultaneous touches.\n        if (event.index > 2) return;\n\n        const { x, y } = event;\n        const ptr = this.getPointer(event.index);\n        ptr.isDown = false;\n        ptr.moves.add(x, y);\n\n        if (this.handlers.up) {\n            this.handlers.up(Object.assign(event, { x, y, target: this.element }));\n        }\n        this.recognizeTap(event, ptr);\n        this.recognizeSwipe(event, ptr);\n    }\n\n    private handleMove(event: IBasicEvent) {\n        // We want not deal with more than 3 simultaneous touches.\n        if (event.index > 2) return;\n\n        const ptr = this.getPointer(event.index);\n        const { x, y } = event;\n        ptr.moves.add(x, y);\n        this.recognizePan(event, ptr);\n    }\n\n    private recognizeTap(evt: IBasicEvent, ptr: IPointer) {\n        // A tap is recognized only if there is less than 400ms\n        // between down and up, and if the pointer has not moves more\n        // than 16px.\n        if (!this.handlers.tap || ptr.moves.elapsedTime > 400) return;\n        const moves = ptr.moves;\n        const dx = Math.abs(moves.x - moves.startX);\n        if (dx > 16) return;\n        const dy = Math.abs(moves.y - moves.startY);\n        if (dy > 16) return;\n\n        evt.clear();\n        this.handlers.tap({ ...evt, x: moves.x, y: moves.y, target: this.element });\n    }\n\n    private recognizePan(evt: IBasicEvent, ptr: IPointer) {\n        if (!ptr.isDown) return;\n        this.recognizePanDown(evt, ptr);\n        this.recognizePanUp(evt, ptr);\n        if (this.handlers.pan) {\n            const { x, y, startX, startY } = ptr.moves;\n            this.handlers.pan(\n                { ...evt, x, y, startX, startY, target: this.element });\n        }\n    }\n\n    private recognizePanDown(evt: IBasicEvent, ptr: IPointer) {\n        if (!this.hasHandlerFor(\"pandown\", \"panvertical\")) return;\n\n        // Check that we are panning down.\n        const moves = ptr.moves;\n        const sx = Math.abs(moves.speedX);\n        const sy = moves.speedY;\n        if (sy < sx) return;\n        // Check that the final point is beneath the initial one.\n        const dx = Math.abs(moves.x - moves.startX);\n        const dy = moves.y - moves.startY;\n        if (dy < dx) return;\n\n        if (this.handlers.pandown) {\n            this.handlers.pandown(\n                { ...evt, x: moves.x, y: moves.y, target: this.element });\n        }\n        if (this.handlers.panvertical) {\n            this.handlers.panvertical(\n                { ...evt, x: moves.x, y: moves.y, target: this.element });\n        }\n    }\n\n    private recognizePanUp(evt: IBasicEvent, ptr: IPointer) {\n        if (!this.hasHandlerFor(\"panup\", \"panvertical\")) return;\n\n        // Check that we are panning up.\n        const moves = ptr.moves;\n        const sx = Math.abs(moves.speedX);\n        const sy = -moves.speedY;\n        if (sy < sx) return;\n        // Check that the final point is beneath the initial one.\n        const dx = Math.abs(moves.x - moves.startX);\n        const dy = moves.startY - moves.y;\n        if (dy < dx) return;\n\n        if (this.handlers.panup) {\n            this.handlers.panup(\n                { ...evt, x: moves.x, y: moves.y, target: this.element });\n        }\n        if (this.handlers.panvertical) {\n            this.handlers.panvertical(\n                { ...evt, x: moves.x, y: moves.y, target: this.element });\n        }\n    }\n\n    private recognizeSwipe(evt: IBasicEvent, ptr: IPointer) {\n        this.recognizeSwipeDown(evt, ptr);\n        this.recognizeSwipeUp(evt, ptr);\n        this.recognizeSwipeLeft(evt, ptr);\n        if (this.handlers.swipe) {\n            const { x, y, startX, startY } = ptr.moves;\n            this.handlers.swipe({ ...evt, x, y, startX, startY, target: this.element });\n        }\n    }\n\n    private recognizeSwipeDown(evt: IBasicEvent, ptr: IPointer) {\n        if (!this.hasHandlerFor(\"swipedown\", \"swipevertical\")) return;\n\n        // Check that we are panning down.\n        const moves = ptr.moves;\n        const sx = Math.abs(moves.speedX);\n        const sy = moves.speedY;\n        if (sy < sx) return;\n        // Check that the final point is beneath the initial one.\n        const dx = Math.abs(moves.x - moves.startX);\n        const dy = moves.y - moves.startY;\n        if (dy < dx) return;\n        // Minimal speed for swipe: 100 pixels/second.\n        const speed = dy / moves.elapsedTime;\n        if (speed < 0.1) return;\n        if (this.handlers.swipedown) {\n            this.handlers.swipedown(\n                { ...evt, x: moves.x, y: moves.y, target: this.element });\n        }\n        if (this.handlers.swipevertical) {\n            this.handlers.swipevertical(\n                { ...evt, x: moves.x, y: moves.y, target: this.element });\n        }\n    }\n\n    private recognizeSwipeUp(evt: IBasicEvent, ptr: IPointer) {\n        if (!this.hasHandlerFor(\"swipeup\", \"swipevertical\")) return;\n\n        // Check that we are panning up.\n        const moves = ptr.moves;\n        const sx = Math.abs(moves.speedX);\n        const sy = moves.speedY;\n        if (sy < sx) return;\n        // Check that the final point is beneath the initial one.\n        const dx = Math.abs(moves.x - moves.startX);\n        const dy = moves.y - moves.startY;\n        if (dy < dx) return;\n        // Minimal speed for swipe: 100 pixels/second.\n        const speed = dy / moves.elapsedTime;\n        if (speed < 0.1) return;\n        if (this.handlers.swipeup) {\n            this.handlers.swipeup({ ...evt, x: moves.x, y: moves.y, target: this.element });\n        }\n        if (this.handlers.swipevertical) {\n            this.handlers.swipevertical(\n                { ...evt, x: moves.x, y: moves.y, target: this.element });\n        }\n    }\n\n    private recognizeSwipeLeft(evt: IBasicEvent, ptr: IPointer) {\n        if (!this.hasHandlerFor(\"swipeleft\", \"swipehorizontal\")) return;\n\n        // Check that we are panning left.\n        const moves = ptr.moves;\n        const sx = -moves.speedX;\n        const sy = Math.abs(moves.speedY);\n        if (sx < sy) return;\n        // Check that the final point is beneath the initial one.\n        const dx = moves.startX - moves.x;\n        const dy = Math.abs(moves.y - moves.startY);\n        if (dx < dy) return;\n        // Minimal speed for swipe: 100 pixels/second.\n        const speed = dx / moves.elapsedTime;\n        if (speed < 0.1) return;\n        if (this.handlers.swipeleft) {\n            this.handlers.swipeleft(\n                { ...evt, x: moves.x, y: moves.y, target: this.element });\n        }\n        if (this.handlers.swipehorizontal) {\n            this.handlers.swipehorizontal(\n                { ...evt, x: moves.x, y: moves.y, target: this.element });\n        }\n    }\n}\n\nexport default function(elem: IHTMLElementWithGesture): Gesture {\n    let gesture = elem[SYMBOL];\n    if( gesture ) return gesture;\n    gesture = new Gesture(elem);\n    elem[SYMBOL] = gesture;\n    return gesture;\n}\n\n\n/**\n * Somw event (like \"wheel\") need their handler to be wrapped in order to\n * map the event is something else.\n */\nfunction wrapSpecialHandlers(rawHandlers: THandlers): THandlers {\n    const handlers: THandlers = {};\n    for( const eventName of Object.keys(rawHandlers) ) {\n        if (eventName === 'wheel') {\n            handlers.wheel = (evt: WheelEvent) => {\n                rawHandlers.wheel({\n                    deltaX: evt.deltaX,\n                    deltaY: evt.deltaY,\n                    deltaZ: evt.deltaZ,\n                    x: 0,\n                    y: 0\n                });\n            }\n            continue;\n        }\n        handlers[eventName] = rawHandlers[eventName];\n    }\n    return handlers;\n}\n","export { default } from \"./gesture\"\n","/**\r\n * @class Color\r\n * Fast color manipulations.\r\n * Attributes R  (red), G  (green), B  (blue), A  (alpha), H  (hue), S\r\n * (saturation), and L (luminance) are all floats between 0 and 1.\r\n */\r\nexport default class Color {\r\n    public R: number;\r\n    public G: number;\r\n    public B: number;\r\n    public H: number;\r\n    public S: number;\r\n    public L: number;\r\n    public A: number;\r\n\r\n    constructor(codeCSS: string = \"#000000\") {\r\n        this.R = 0;\r\n        this.G = 0;\r\n        this.B = 0;\r\n        this.H = 0;\r\n        this.S = 0;\r\n        this.L = 0;\r\n        this.A = 1;\r\n\r\n        this.parse(codeCSS);\r\n    }\r\n\r\n    toArrayRGB(): [number, number, number] {\r\n        return [this.R, this.G, this.B]\r\n    }\r\n\r\n    toArrayRGBA(): [number, number, number, number] {\r\n        return [this.R, this.G, this.B, this.A]\r\n    }\r\n\r\n    static isValid(codeCSS: string) {\r\n        if( typeof codeCSS !== 'string' ) return false;\r\n        if( codeCSS.charAt(0) !== '#' ) return false;\r\n        switch( codeCSS.length ) {\r\n            case 4:  // #RGB\r\n            case 5:  // #RGBA\r\n            case 7:  // #RRGGBB\r\n            case 9:  // #RRGGBBAA\r\n                return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    static normalize(codeCSS: string) {\r\n        const color = new Color(codeCSS);\r\n        return color.stringify();\r\n    }\r\n\r\n    static luminance(codeCSS: string) {\r\n        const color = new Color(codeCSS);\r\n        return color.luminance();\r\n    }\r\n\r\n    /**\r\n     * Returns 1 for bright colors and 0 for dark colors.\r\n     */\r\n    static luminanceStep(codeCSS: string) {\r\n        const color = new Color(codeCSS);\r\n        return color.luminanceStep();\r\n    }\r\n\r\n    static fromArrayRGB(rgb: [number, number, number]): Color {\r\n        const [R, G, B] = rgb\r\n        return this.newRGB(R, G, B)\r\n    }\r\n\r\n    static fromArrayRGBA(rgba: [number, number, number, number]): Color {\r\n        const [R, G, B, A] = rgba\r\n        return this.newRGBA(R, G, B, A)\r\n    }\r\n\r\n    /**\r\n     * Mix two colors. alpha should be between 0 and 1,\r\n     * but there is no check on this.\r\n     * If alpha is 0, the resulting color is `color1`,\r\n     * if alpha is 1, the resulting color is `color2`.\r\n     */\r\n    static mix(color1: Color, color2: Color, alpha: number=.5): Color {\r\n        const beta = 1 - alpha;\r\n        return Color.newRGBA(\r\n            alpha * color2.R + beta * color1.R,\r\n            alpha * color2.G + beta * color1.G,\r\n            alpha * color2.B + beta * color1.B,\r\n            alpha * color2.A + beta * color1.A\r\n        );\r\n    }\r\n\r\n    /**\r\n     * If `colors` has only two elements, this method is the same as `mix()`.\r\n     * Otherwise, it will perform a linear blending through the colors.\r\n     * If alpha is 0, the resulting color is `colors[0]`,\r\n     * If alpha is 1, the resulting color is `colors[colors.length - 1]`,\r\n     */\r\n    static ramp(colors: Color[], alpha: number=.5): Color {\r\n        if (colors.length === 0) return Color.newBlack()\r\n        if (colors.length === 1) return colors[0]\r\n\r\n        const spacesCount = colors.length - 1\r\n        const firstColorIndex = Math.floor(alpha * spacesCount)\r\n        const color1 = colors[firstColorIndex]\r\n        if (firstColorIndex === spacesCount) return color1\r\n        const color2 = colors[firstColorIndex + 1]\r\n        const translatedAlpha = firstColorIndex + alpha / spacesCount\r\n        return Color.mix(color1, color2, translatedAlpha)\r\n    }\r\n\r\n    static newBlack() {\r\n        return Color.newRGB(0, 0, 0);\r\n    }\r\n\r\n    static newWhite() {\r\n        return Color.newRGB(1, 1, 1);\r\n    }\r\n\r\n    /**\r\n     * Create a new Color instance base on R,G,B channels.\r\n     *\r\n     * @param   {number} red - Value between 0 and 1.\r\n     * @param   {number} green - Value between 0 and 1.\r\n     * @param   {number} blue - Value between 0 and 1.\r\n     * @returns {Color} New instance of Color.\r\n     */\r\n    static newRGB(red: number, green: number, blue: number) {\r\n        const color = new Color();\r\n        color.R = red;\r\n        color.G = green;\r\n        color.B = blue;\r\n        color.A = 1;\r\n        return color;\r\n    }\r\n\r\n    /**\r\n     * Create a new Color instance base on R,G,B,A channels.\r\n     *\r\n     * @param   {number} red - Value between 0 and 1.\r\n     * @param   {number} green - Value between 0 and 1.\r\n     * @param   {number} blue - Value between 0 and 1.\r\n     * @param   {number} alpha - Value between 0 and 1.\r\n     * @returns {Color} New instance of Color.\r\n     */\r\n    static newRGBA(red: number, green: number, blue: number, alpha: number) {\r\n        const color = new Color();\r\n        color.R = red;\r\n        color.G = green;\r\n        color.B = blue;\r\n        color.A = alpha;\r\n        return color;\r\n    }\r\n\r\n    /**\r\n     * Parse a color writtent in CSS syntax.\r\n     *\r\n     * @param   {string} code - CSS color.\r\n     * @returns {boolean} `true` if the color has valid syntax.\r\n     */\r\n    parse(code: string = \"#000000\"): boolean {\r\n        const input = code.trim().toUpperCase();\r\n        if (this.parseHexa.call(this, input)) return true;\r\n        if (this.parseRGB.call(this, input)) return true;\r\n        if (this.parseRGBA.call(this, input)) return true;\r\n        if (this.parseHSL.call(this, input)) return true;\r\n        // @TODO parseHSLA.\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * @see https://en.wikipedia.org/wiki/Grayscale\r\n     * @this Color\r\n     * @returns {undefined}\r\n     */\r\n    luminance(): number {\r\n        return (0.2126 * this.R) + (0.7152 * this.G) + (0.0722 * this.B);\r\n    }\r\n\r\n    /**\r\n     * @returns {integer} 0 if the color is dark and 1 if it is light.\r\n     */\r\n    luminanceStep(): number {\r\n        return this.luminance() < .6 ? 0 : 1;\r\n    }\r\n\r\n    /**\r\n     * @this Color\r\n     * @returns {string} String value of the color. `#fd45a7`.\r\n     */\r\n    stringify() {\r\n        let color = hexa2(this.R * 255) + hexa2(this.G * 255) + hexa2(this.B * 255);\r\n        if (this.A < 1) {\r\n            color += hexa2(this.A * 255);\r\n        }\r\n        return `#${color}`;\r\n    }\r\n\r\n    copy() {\r\n        const newColor = new Color();\r\n        newColor.R = this.R;\r\n        newColor.G = this.G;\r\n        newColor.B = this.B;\r\n        newColor.A = this.A;\r\n        newColor.H = this.H;\r\n        newColor.S = this.S;\r\n        newColor.L = this.L;\r\n        return newColor;\r\n    }\r\n\r\n    /**\r\n         * @see https://en.wikipedia.org/wiki/HSL_and_HSV#Converting_to_RGB\r\n         * @this Color\r\n         * @returns {undefined}\r\n         */\r\n    hsl2rgb() {\r\n        const\r\n            H = 6 * this.H,\r\n            S = this.S,\r\n            L = this.L,\r\n            chroma = (1 - Math.abs(2 * L - 1)) * S,\r\n            x = chroma * (1 - Math.abs(H % 2 - 1));\r\n\r\n        let R = 0, G = 0, B = 0;\r\n\r\n        if (H < 3) {\r\n            if (H < 1) {\r\n                R = chroma; G = x; B = 0;\r\n            } else if (H < 2) {\r\n                R = x; G = chroma; B = 0;\r\n            } else {\r\n                // H == 2.\r\n                R = 0; G = chroma; B = x;\r\n            }\r\n        } else if (H < 4) {\r\n            R = 0; G = x; B = chroma;\r\n        } else if (H < 5) {\r\n            R = x; G = 0; B = chroma;\r\n        } else {\r\n            R = chroma; G = 0; B = x;\r\n        }\r\n\r\n        const shift = L - chroma * 0.5;\r\n        this.R = R + shift;\r\n        this.G = G + shift;\r\n        this.B = B + shift;\r\n    }\r\n\r\n    rgb2hsl() {\r\n        const R = this.R;\r\n        const G = this.G;\r\n        const B = this.B;\r\n\r\n        const min = Math.min(R, G, B);\r\n        const max = Math.max(R, G, B);\r\n        const delta = max - min;\r\n\r\n        this.L = 0.5 * (max + min);\r\n\r\n        if (delta < 0.000001) {\r\n            this.H = 0;\r\n            this.S = 0;\r\n        }\r\n        else {\r\n            this.S = delta / (1 - Math.abs(2 * this.L - 1));\r\n            if (max === R) {\r\n                if (G >= B) {\r\n                    this.H = INV6 * ((G - B) / delta);\r\n                } else {\r\n                    this.H = 1 - INV6 * ((B - G) / delta);\r\n                }\r\n            }\r\n            else if (max === G) {\r\n                this.H = INV6 * (2 + (B - R) / delta);\r\n            }\r\n            else {\r\n                this.H = INV6 * (4 + (R - G) / delta);\r\n            }\r\n        }\r\n    }\r\n\r\n    private parseHexa(text: string) {\r\n        if (text.charAt(0) !== '#') return false;\r\n        let R = 0, G = 0, B = 0, A = 1;\r\n\r\n        switch (text.length) {\r\n            case 4:\r\n                R = parseInt(text.charAt(1), 16) * INV15;\r\n                G = parseInt(text.charAt(2), 16) * INV15;\r\n                B = parseInt(text.charAt(3), 16) * INV15;\r\n                break;\r\n            case 5:\r\n                R = parseInt(text.charAt(1), 16) * INV15;\r\n                G = parseInt(text.charAt(2), 16) * INV15;\r\n                B = parseInt(text.charAt(3), 16) * INV15;\r\n                A = parseInt(text.charAt(4), 16) * INV15;\r\n                break;\r\n            case 7:\r\n                R = parseInt(text.substr(1, 2), 16) * INV255;\r\n                G = parseInt(text.substr(3, 2), 16) * INV255;\r\n                B = parseInt(text.substr(5, 2), 16) * INV255;\r\n                break;\r\n            case 9:\r\n                R = parseInt(text.substr(1, 2), 16) * INV255;\r\n                G = parseInt(text.substr(3, 2), 16) * INV255;\r\n                B = parseInt(text.substr(5, 2), 16) * INV255;\r\n                A = parseInt(text.substr(7, 2), 16) * INV255;\r\n                break;\r\n            default:\r\n        }\r\n\r\n        if (isNaN(R) || isNaN(G) || isNaN(B) || isNaN(A)) {\r\n            this.R = this.G = this.B = this.A = 0;\r\n        } else {\r\n            this.R = R;\r\n            this.G = G;\r\n            this.B = B;\r\n            this.A = A;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * @param   {string} text - `rgb(200, 140, 50)`\r\n     * @returns {boolean} `true` if `text` is a valid `rgb()` syntax.\r\n     */\r\n    private parseRGB(text: string) {\r\n        const m = RX_RGB.exec(text);\r\n        if (!m) return false;\r\n        this.R = clamp01(parseInt(m[1], 10) * INV255);\r\n        this.G = clamp01(parseInt(m[2], 10) * INV255);\r\n        this.B = clamp01(parseInt(m[3], 10) * INV255);\r\n        this.A = 1;\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * @param   {string} text - `rgba(200, 140, 50, 0.5)`\r\n     * @returns {boolean} `true` if `text` is a valid `rgba()` syntax.\r\n     */\r\n    private parseRGBA(text: string) {\r\n        const m = RX_RGBA.exec(text);\r\n        if (!m) return false;\r\n        this.R = clamp01(parseInt(m[1], 10) * INV255);\r\n        this.G = clamp01(parseInt(m[2], 10) * INV255);\r\n        this.B = clamp01(parseInt(m[3], 10) * INV255);\r\n        this.A = clamp01(parseFloat(m[4]));\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * @param   {string} text - `hsl(200, 140, 50)`\r\n     * @returns {boolean} `true` if `text` is a valid `hsl()` syntax.\r\n     */\r\n    private parseHSL(text: string) {\r\n        const m = RX_HSL.exec(text);\r\n        if (!m) return false;\r\n        this.H = clamp01(parseInt(m[1], 10) * INV359);\r\n        this.S = clamp01(parseInt(m[2], 10) * INV99);\r\n        this.L = clamp01(parseInt(m[3], 10) * INV99);\r\n        this.A = 1;\r\n        this.hsl2rgb();\r\n        return true;\r\n    }\r\n}\r\n\r\nconst\r\n    INV6 = 1 / 6,\r\n    INV15 = 1 / 15,\r\n    INV99 = 1 / 99,\r\n    INV255 = 1 / 255,\r\n    INV359 = 1 / 359;\r\n\r\nconst RX_RGB = /^RGB[\\s(]+([0-9]+)[^0-9]+([0-9]+)[^0-9]+([0-9]+)/;\r\nconst RX_RGBA = /^RGBA[\\s(]+([0-9]+)[^0-9]+([0-9]+)[^0-9]+([0-9]+)[^0-9.]+([0-9.]+)/;\r\nconst RX_HSL = /^HSL[\\s(]+([0-9]+)[^0-9]+([0-9]+)[^0-9]+([0-9]+)/;\r\n\r\nfunction clamp01(value: number): number {\r\n    if (value < 0) return 0;\r\n    if (value > 1) return 1;\r\n    return value;\r\n}\r\n\r\nfunction hexa2(value: number) {\r\n    let out = Math.floor(value).toString(16);\r\n    if (out.length < 2) out = \"0\" + out;\r\n    return out;\r\n}\r\n","import \"./theme.css\"\nimport Color from \"./color\"\n\n/**\n * Manage CSS styles.\n */\nexport default {\n    register: registerTheme,\n    apply: applyTheme,\n    get: getTheme,\n    bg0: makeGetCurrentColor(\"bg0\"),\n    bg1: makeGetCurrentColor(\"bg1\"),\n    bg2: makeGetCurrentColor(\"bg2\"),\n    bg3: makeGetCurrentColor(\"bg3\"),\n    bgP: makeGetCurrentColor(\"bgP\"),\n    bgPD: makeGetCurrentColor(\"bgPD\"),\n    bgPL: makeGetCurrentColor(\"bgPL\"),\n    bgS: makeGetCurrentColor(\"bgS\"),\n    bgSD: makeGetCurrentColor(\"bgSD\"),\n    bgSL: makeGetCurrentColor(\"bgSL\"),\n    black: makeGetCurrentColor(\"black\"),\n    white: makeGetCurrentColor(\"white\"),\n    isDark,\n    setFontSize,\n    normalize: completeWithDefaultValues\n};\n\ninterface IStyle {\n    bg0?: string;\n    bg1?: string;\n    bg2?: string;\n    bg3?: string;\n    bgP?: string;\n    bgPD?: string;\n    bgPL?: string;\n    bgS?: string;\n    bgSD?: string;\n    bgSL?: string;\n    fg0?: string;\n    fg1?: string;\n    fg2?: string;\n    fg3?: string;\n    fgP?: string;\n    fgPD?: string;\n    fgPL?: string;\n    fgS?: string;\n    fgSD?: string;\n    fgSL?: string;\n    black?: string;\n    white?: string;\n    [key: string]: string | undefined;\n};\n\ninterface ITheme {\n    bg0: string,\n    bg1: string,\n    bg2: string,\n    bg3: string,\n    bgP: string,\n    bgPL: string,\n    bgPD: string,\n    bgS: string,\n    bgSL: string,\n    bgSD: string,\n    black: string,\n    white: string\n}\n\n\n//################################################################################\n\ninterface IThemes {\n    css: { [name: string]: HTMLStyleElement };\n    vars: { [name: string]: IStyle }\n    current: string | null;\n}\n\n// Used for luminance computations. Because we need to know which text color\n// can be used based on the background's luminance.\nconst COLOR = new Color();\n\nconst THEME_COLOR_NAMES = [\"0\", \"1\", \"2\", \"3\", \"P\", \"PD\", \"PL\", \"S\", \"SD\", \"SL\"];\nconst THEMES: IThemes = {\n    css: {},\n    vars: {},\n    current: null\n};\n\nfunction registerTheme(themeName: string, _style: IStyle) {\n    const style = completeWithDefaultValues(_style);\n    THEMES.vars[themeName] = style;\n\n    let codeCSS = codeVariables(themeName, style);\n    codeCSS += codeBackground(themeName, style);\n    codeCSS += codeElevation(themeName, style);\n    codeCSS += codeText(themeName, style);\n\n    let styleElement = THEMES.css[themeName];\n    if (!styleElement) {\n        styleElement = document.createElement(\"style\");\n        document.getElementsByTagName('head')[0].appendChild(styleElement);\n        THEMES.css[themeName] = styleElement;\n    }\n\n    styleElement.textContent = codeCSS;\n}\n\nfunction codeText(themeName: string, style: IStyle) {\n    let codeCSS = '';\n    for (let depth = 1; depth <= 10; depth++) {\n        for (const colorName of THEME_COLOR_NAMES) {\n            const fgColorName = `fg${colorName}`;\n            const bgColorName = `bg${colorName}`;\n            const styleFgColorName: string = style[fgColorName] as string;\n            const styleBgColorName: string = style[bgColorName] as string;\n            const bgClass = \".thm-bg\" + colorName;\n            const fgClass = \".thm-fg\" + colorName;\n            for (let position = 1; position <= depth; position++) {\n                const piecesFG = [];\n                const piecesSVG = [];\n                const piecesBG = [];\n                for (let index = 1; index <= depth; index++) {\n                    piecesBG.push(position === index ? bgClass : '*');\n                    piecesSVG.push(position === index ? bgClass : '*');\n                    piecesFG.push(position === index ? fgClass : '*');\n                    if (index === depth) {\n                        piecesBG.push(piecesBG.pop() + \".thm-fg\");\n                        piecesFG.push(piecesFG.pop() + fgClass);\n                    }\n                }\n                codeCSS += \"body.dom-theme-\" + themeName + \" \"\n                    + piecesBG.join(\" > \")\n                    + \" { color: \" + styleFgColorName + \" }\\n\";\n                codeCSS += \"body.dom-theme-\" + themeName + \" \"\n                    + removeTail(piecesBG.join(\" > \"), \".thm-fg\")\n                    + \" { color: \" + styleFgColorName + \" }\\n\";\n                codeCSS += \"body.dom-theme-\" + themeName + \" \"\n                    + piecesFG.join(\" > \")\n                    + \" { color: \" + styleBgColorName + \" }\\n\";\n                codeCSS += \"body.dom-theme-\" + themeName + \" \"\n                    + piecesSVG.join(\" > \")\n                    + \" .thm-svg-fill0\"\n                    + \" { fill: \" + styleFgColorName + \" }\\n\";\n                codeCSS += \"body.dom-theme-\" + themeName + \" \"\n                    + piecesSVG.join(\" > \")\n                    + \" .thm-svg-stroke0\"\n                    + \" { stroke: \" + styleFgColorName + \" }\\n\";\n            }\n        }\n    }\n    return codeCSS;\n}\n\nconst ALPHA_HEXA = \"123456789ABCDE\";\nfunction codeVariables(themeName: string, style: IStyle) {\n    let codeCSS = \"body.dom-theme-\" + themeName + '{\\n';\n    THEME_COLOR_NAMES.forEach(function(colorName) {\n        const s = style[`bg${colorName}`] as string;\n        codeCSS += `  --thm-bg${colorName}: ${s};\\n`;\n        for (const a of ALPHA_HEXA) {\n            codeCSS += `  --thm-bg${colorName}-${a}: ${s}${a}${a};\\n`;\n        }\n        COLOR.parse(s);\n        const pen = COLOR.luminanceStep() ? style.black : style.white;\n        codeCSS += `  --thm-fg${colorName}: ${pen};\\n`;\n        for (const a of ALPHA_HEXA) {\n            codeCSS += `  --thm-fg${colorName}-${a}: ${pen}${a}${a};\\n`;\n        }\n    });\n    style.white = normalize(style.white);\n    style.black = normalize(style.black);\n    codeCSS += `  --thm-white: ${style.white};\\n`;\n    codeCSS += `  --thm-black: ${style.black};\\n`;\n    for (const letter of ALPHA_HEXA) {\n        codeCSS += `  --thm-white-${letter}: ${style.white}${letter}${letter};\\n`;\n        codeCSS += `  --thm-black-${letter}: ${style.black}${letter}${letter};\\n`;\n    }\n    codeCSS += \"}\\n\";\n    return codeCSS;\n}\n\n\nfunction codeBackground(themeName: string, style: IStyle) {\n    var codeCSS = '';\n    THEME_COLOR_NAMES.forEach(function(colorName) {\n        codeCSS += \"body.dom-theme-\" + themeName + \".thm-bg\" + colorName\n            + \" { background-color: \" + style[`bg${colorName}`] + \" }\\n\";\n        codeCSS += \"body.dom-theme-\" + themeName + \" .thm-fg\" + colorName\n            + \" { color: \" + style[`fg${colorName}`] + \" }\\n\";\n        codeCSS += \"body.dom-theme-\" + themeName + \" .thm-bg\" + colorName\n            + \" { background-color: \" + style[`bg${colorName}`] + \" }\\n\";\n        codeCSS += `body.dom-theme-${themeName} .thm-bg${colorName}-text`\n            + \" { background-color: \" + style[`fg${colorName}`] + \" }\\n\";\n        codeCSS += \"body.dom-theme-\" + themeName + \" .thm-bg\" + colorName + \"-bottom\"\n            + \" { background: linear-gradient(to top,\"\n            + style[`bg${colorName}`] + \",transparent) }\\n\";\n        codeCSS += \"body.dom-theme-\" + themeName + \" .thm-bg\" + colorName + \"-top\"\n            + \" { background: linear-gradient(to bottom,\"\n            + style[`bg${colorName}`] + \",transparent) }\\n\";\n        codeCSS += \"body.dom-theme-\" + themeName + \" .thm-bg\" + colorName + \"-left\"\n            + \" { background: linear-gradient(to right,\"\n            + style[`bg${colorName}`] + \",transparent) }\\n\";\n        codeCSS += \"body.dom-theme-\" + themeName + \" .thm-bg\" + colorName + \"-right\"\n            + \" { background: linear-gradient(to left,\"\n            + style[`bg${colorName}`] + \",transparent) }\\n\";\n\n        if (!isNaN(parseInt(colorName))) return;\n        codeCSS += \"body.dom-theme-\" + themeName + \" .thm-svg-fill\" + colorName\n            + \" { fill: \"\n            + style[`bg${colorName}`] + \" }\\n\";\n        codeCSS += \"body.dom-theme-\" + themeName + \" .thm-svg-stroke\" + colorName\n            + \" { stroke: \"\n            + style[`bg${colorName}`] + \" }\\n\";\n    });\n    return codeCSS;\n}\n\nconst ELEVATIONS: { [ele: string]: string[] } = {\n    \"0\": [\"none\"],\n    \"2\": [\"button\", \"card\"],\n    \"4\": [\"bar\"],\n    \"6\": [\"floating\"],\n    \"8\": [\"button:active\", \"button-raised\", \"card-raised\"],\n    \"9\": [\"sunmenu-0\"],\n    \"10\": [\"sunmenu-1\"],\n    \"11\": [\"sunmenu-2\"],\n    \"12\": [\"floating:active\"],\n    \"16\": [\"nav\"],\n    \"24\": [\"dialog\"]\n};\nfunction codeElevation(themeName: string, style: IStyle) {\n    COLOR.parse(style.bg2);\n    const luminance = COLOR.luminance();\n    var elevationColor = luminance < .6\n        ? addAlpha(style.white, 4)\n        : addAlpha(style.black, 6);\n    var codeCSS = '';\n    const elevationKeys = Object.keys(ELEVATIONS);\n    elevationKeys.forEach(function(elevationKey) {\n        const elevation = parseInt(elevationKey, 10);\n        ELEVATIONS[elevationKey].forEach(name => {\n            codeCSS += `body.dom-theme-${themeName} .thm-ele-${name} {\n  box-shadow: 0 ${elevation}px ${2 * elevation}px ${elevationColor}\n}\\n`;\n        })\n    });\n    return codeCSS;\n}\n\nfunction applyTheme(name: string, target: HTMLElement = document.body) {\n    if (!THEMES.css[name]) {\n        console.error(\"This theme has not been registered: \", name);\n        return;\n    }\n    var body = document.body;\n    if (typeof THEMES.current === 'string') {\n        body.classList.remove(`dom-theme-${THEMES.current}`);\n    }\n    THEMES.current = name;\n    body.classList.add(`dom-theme-${THEMES.current}`);\n}\n\nfunction getTheme(name: string = \"default\"): ITheme {\n    return THEMES.vars[name] as ITheme;\n}\n\nfunction completeBackgrounds(style: IStyle) {\n    let has0 = typeof style.bg0 === 'string';\n    const has1 = typeof style.bg1 === 'string';\n    const has2 = typeof style.bg2 === 'string';\n    let has3 = typeof style.bg3 === 'string';\n\n    if (has0 && has1 && has2 && has3) return\n\n    if (!has0 && !has1 && !has2 && !has3) {\n        style.bg0 = \"#E0E0E0\";\n        style.bg1 = \"#F5F5F5\";\n        style.bg2 = \"#FAFAFA\";\n        style.bg3 = \"#FFF\";\n        return;\n    }\n    if (has0 && !has1 && !has2 && !has3) {\n        style.bg3 = lightenBackground(style.bg0 as string);\n        has3 = true;\n    }\n    if (!has0 && !has1 && !has2 && has3) {\n        style.bg0 = darkenBackground(style.bg3 as string);\n        has3 = true;\n    }\n    const color0 = new Color(style.bg0);\n    const r0 = color0.R;\n    const g0 = color0.G;\n    const b0 = color0.B;\n    const color3 = new Color(style.bg3);\n    const r3 = color3.R;\n    const g3 = color3.G;\n    const b3 = color3.B;\n    const color1 = Color.newRGB((2 * r0 + r3) / 3, (2 * g0 + g3) / 3, (2 * b0 + b3) / 3);\n    const color2 = Color.newRGB((r0 + 2 * r3) / 3, (g0 + 2 * g3) / 3, (b0 + 2 * b3) / 3);\n    style.bg1 = color1.stringify();\n    style.bg2 = color2.stringify();\n}\n\nfunction completeWithDefaultValues(style: IStyle) {\n    if (typeof style === 'undefined') style = {};\n\n    completeBackgrounds(style);\n\n    if (typeof style.bgP !== 'string') style.bgP = \"#3E50B4\";\n    if (typeof style.bgPD !== 'string') style.bgPD = dark(style.bgP);\n    if (typeof style.bgPL !== 'string') style.bgPL = light(style.bgP);\n    if (typeof style.bgS !== 'string') style.bgS = rotateHue(style.bgP);\n    if (typeof style.bgSD !== 'string') style.bgSD = dark(style.bgS);\n    if (typeof style.bgSL !== 'string') style.bgSL = light(style.bgS);\n\n    if (typeof style.white !== 'string') style.white = '#fff';\n    if (typeof style.black !== 'string') style.black = '#000';\n\n    THEME_COLOR_NAMES.forEach(function(name) {\n        const bg: string = style[`bg${name}`] || '#000';\n        COLOR.parse(bg);\n        var luminance = COLOR.luminance();\n        style[`fg${name}`] = luminance < .6 ? style.white : style.black;\n    });\n\n    return style;\n}\n\nfunction dark(color: string) {\n    const percent = .25;\n    COLOR.parse(color);\n    COLOR.rgb2hsl();\n    COLOR.L *= 1 - percent;\n    COLOR.hsl2rgb();\n    return COLOR.stringify();\n}\n\nfunction darkenBackground(color: string) {\n    COLOR.parse(color);\n    COLOR.rgb2hsl();\n    COLOR.L = Math.max(0, COLOR.L - 0.15);\n    COLOR.hsl2rgb();\n    return COLOR.stringify();\n}\n\nfunction light(color: string) {\n    var percent = .4;\n    COLOR.parse(color);\n    COLOR.rgb2hsl();\n    COLOR.L = percent + (1 - percent) * COLOR.L;\n    COLOR.hsl2rgb();\n    return COLOR.stringify();\n}\n\nfunction lightenBackground(color: string) {\n    COLOR.parse(color);\n    COLOR.rgb2hsl();\n    COLOR.L = Math.min(1, COLOR.L + 0.3);\n    COLOR.hsl2rgb();\n    return COLOR.stringify();\n}\n\nfunction rotateHue(color: string): string {\n    COLOR.parse(color);\n    COLOR.rgb2hsl();\n    COLOR.H = COLOR.H + .5;\n    if (COLOR.H > 1) COLOR.H--;\n    COLOR.hsl2rgb();\n    return COLOR.stringify();\n}\n\n/**\n * @param {string} color - RGB color in format #xxx or #xxxxxx.\n * @param {string} alpha - Single char between 0 and F.\n */\nfunction addAlpha(color: string, alpha: string) {\n    if (color.length < 5) return color + alpha;\n    return color + alpha + alpha;\n}\n\nfunction removeTail(text: string, tail: string) {\n    return text.substr(0, text.length - tail.length);\n}\n\nfunction isDark(colorName: string = \"\"): boolean {\n    if (colorName === \"\") return isThemeGloballyDark();\n\n    const vars = THEMES.vars[THEMES.current || \"default\"];\n    const varName = `$isDark/${colorName}`;\n    let isDark = vars[varName];\n    if (typeof isDark === 'boolean') return isDark;\n\n    const color = new Color(vars[colorName]);\n    vars[varName] = !color.luminanceStep();\n    return vars[varName];\n}\n\nfunction isThemeGloballyDark(): boolean {\n    const vars = THEMES.vars[THEMES.current || \"default\"];\n    let isDark = vars.$isDark;\n    if (typeof isDark === 'boolean') return isDark;\n\n    const bg0 = new Color(vars.bg0);\n    const bg1 = new Color(vars.bg1);\n    const bg2 = new Color(vars.bg2);\n    const bg3 = new Color(vars.bg3);\n    const average = Color.mix(\n        Color.mix(bg0, bg1),\n        Color.mix(bg2, bg3)\n    );\n    vars.$isDark = !average.luminanceStep();\n    return vars.$isDark;\n}\n\nfunction makeGetCurrentColor(colorName: string): () => string {\n    return () => THEMES.vars[THEMES.current || \"default\"][colorName];\n}\n\nfunction setFontSize(size: \"small\" | \"medium\" | \"large\") {\n    const html = document.documentElement;\n    html.classList.remove(`thm-font-size-small`);\n    html.classList.remove(`thm-font-size-medium`);\n    html.classList.remove(`thm-font-size-large`);\n    html.classList.add(`thm-font-size-${size}`);\n}\n\nfunction normalize(hexa: string): string {\n    const color = new Color(hexa);\n    return color.stringify();\n}\n\nregisterTheme(\"default\", { bgP: \"#1e90ff\" });\n","export default function castInteger(v: any, defaultValue = 0): number {\r\n    const defVal = Math.floor(.5 + defaultValue);\r\n\r\n    switch (typeof v) {\r\n        case \"boolean\":\r\n            return v ? 1 : 0;\r\n        case \"number\":\r\n            return Math.floor(.5 + v);\r\n        case \"string\":\r\n            const text = v.trim().toLowerCase();\r\n            if (text.startsWith(\"0x\")) {\r\n                const hexa = parseInt(text.substr(2), 16);\r\n                return isNaN(hexa) ? defVal : hexa;\r\n            }\r\n            if (text.startsWith(\"0b\")) {\r\n                const hexa = parseInt(text.substr(2), 2);\r\n                return isNaN(hexa) ? defVal : hexa;\r\n            }\r\n            if (text.startsWith(\"0o\")) {\r\n                const hexa = parseInt(text.substr(2), 8);\r\n                return isNaN(hexa) ? defVal : hexa;\r\n            }\r\n            const num = parseFloat(text);\r\n            if (isNaN(num)) return defVal;\r\n            return Math.floor(.5 + num);\r\n        default:\r\n            return defVal;\r\n    }\r\n}\r\n","const RX_CSS_UNIT = /^(-?[.0-9]+)[ \\n\\r]*([a-z%]*)/;\r\n\r\nexport default function castUnit(v: any, defaultValue: string = \"100%\") {\r\n    if (typeof v === 'number') return `${v}px`;\r\n    if (typeof v !== 'string') return defaultValue;\r\n    const text = `${v}`.trim().toLowerCase();\r\n    if (text === 'auto' || text === 'inherit') return text;\r\n    if (text.startsWith(\"calc(\")) return text;\r\n    const m = RX_CSS_UNIT.exec(text);\r\n    if (!m) return defaultValue;\r\n    const scalar = parseFloat(m[1]);\r\n    if (isNaN(scalar) || scalar === 0) return \"0\";\r\n    const unit = m[2].length < 1 ? \"px\" : m[2];\r\n    return `${scalar}${unit}`;\r\n}\r\n","import castString from \"./string\";\n\n/**\n * If `value` is not an array, return `defaultArray`.\n * Else if `defaultString` is undefined, return `value`.\n * Else return a copy of `value` with a castString on all its elements.\n *\n * @param   value         [description]\n * @param   defaultArray  [description]\n * @param   defaultString [description]\n * @returns               [description]\n */\nexport default function castStringArray(\n    value: any, defaultArray: string[] = [], defaultString: string = \"\"\n) {\n    if (typeof value === 'string') return [value];\n    if (!Array.isArray(value)) return defaultArray;\n    if (typeof defaultString === 'undefined') return value;\n    return value.map(item => castString(item, defaultString));\n}\n","import React from \"react\"\r\n\r\nimport \"./label.css\"\r\n\r\ninterface ILabelProps {\r\n    label?: string;\r\n    htmlFor?: string;\r\n}\r\n\r\nexport default class Label extends React.Component<ILabelProps, {}> {\r\n    render() {\r\n        const label = this.props.label;\r\n        if( typeof label !== 'string' || label.trim().length === 0 ) return null;\r\n        return (<label className=\"tfw-view-Label\" htmlFor={this.props.htmlFor}>{\r\n            this.props.label\r\n        }</label>)\r\n    }\r\n}\r\n","export { default } from \"./label\"\n","import * as React from \"react\"\nimport castString from \"../converter/string\"\nimport castBoolean from \"../converter/boolean\"\nimport castStringArray from \"../converter/string-array\"\nimport \"./flex.css\"\n\ninterface IFlexProp {\n    wide?: boolean;\n    classes?: string[] | string;\n    dir?: \"row\" | \"row-reverse\" | \"column\" | \"column-reverse\" | \"wide\" | \"narrow\";\n    wrap?: \"nowrap\" | \"wrap\" | \"wrap-reverse\";\n    justifyContent?: \"flex-start\" | \"flex-end\" | \"center\" | \"space-around\" | \"space-between\" | \"space-evenly\";\n    alignItems?: \"stretch\" | \"flex-start\" | \"flex-end\" | \"center\";\n    children: React.ReactElement<any>[] | React.ReactElement<any>;\n}\n\nexport default class Flex extends React.Component<IFlexProp, {}> {\n    render() {\n        const p = this.props;\n        const wide = castBoolean(p.wide, true);\n        const dir = castString(p.dir, \"row\");\n        const style: React.CSSProperties = {\n            justifyContent: castString(p.justifyContent, \"space-around\"),\n            alignItems: castString(p.alignItems, \"center\"),\n            flexWrap: castString(p.wrap, \"wrap\")\n        };\n        const classes = [\"tfw-view-flex\", `dir-${dir}`];\n        classes.push(...castStringArray(p.classes));\n\n        if (wide) classes.push(\"wide\");\n\n        return (\n            <div className={classes.join(\" \")} style={style}>{\n                p.children\n            }</div>\n        )\n    }\n}\n","export default function castArray(v: any, defaultValue: any[] = []): any[] {\r\n    if (typeof v === 'undefined') return defaultValue;\r\n    if (Array.isArray(v)) return v;\r\n    return [v];\r\n}\r\n","import * as React from \"react\"\r\nimport \"./combo.css\"\r\nimport castString from \"../converter/string\"\r\nimport castBoolean from \"../converter/boolean\"\r\nimport castStringArray from \"../converter/string-array\"\r\nimport Touchable from \"../behavior/touchable\"\r\nimport Icon from \"./icon\"\r\nimport Label from \"./label\"\r\nimport Gesture from \"../gesture\"\r\nimport EscapeHandler from \"../escape-handler\"\r\n\r\ninterface IComboProps {\r\n    label?: string;\r\n    value?: string;\r\n    keys?: string[];\r\n    wide?: boolean;\r\n    onChange?: (value: string) => void;\r\n    children: React.ReactElement<any>[];\r\n}\r\n\r\nexport default class Combo extends React.Component<IComboProps, {}> {\r\n    readonly touchable: Touchable;\r\n\r\n    ref = React.createRef<HTMLButtonElement>()\r\n    list = React.createRef<HTMLDivElement>()\r\n    button = React.createRef<HTMLDivElement>()\r\n\r\n    bigList: HTMLElement | undefined;\r\n\r\n    keys: string[] = []\r\n    selectedKey: string = \"\"\r\n    selectedIndex: number = -1\r\n\r\n    constructor(props: IComboProps) {\r\n        super(props);\r\n        this.handleClick = this.handleClick.bind(this);\r\n        this.touchable = new Touchable({ onTap: this.handleClick });\r\n    }\r\n\r\n    handleClick() {\r\n        this.expand();\r\n    }\r\n\r\n    /**\r\n     * If there are only two items, we don't open the list: we just swap them.\r\n     */\r\n    _swapItems() {\r\n        // With two items, clicking will immediatly switch to the next one.\r\n        for (const key of this.keys) {\r\n            if (this.props.value !== key) {\r\n                const slot = this.props.onChange;\r\n                if (typeof slot === 'function') {\r\n                    slot(key);\r\n                }\r\n                return;\r\n            }\r\n        }\r\n    }\r\n\r\n    _computeDimensions(list: HTMLElement, button: HTMLElement): { left: number, top: number, width: number, height: number } {\r\n        let { left, top, height } = list.getBoundingClientRect();\r\n        const { width } = button.getBoundingClientRect();\r\n        height = Math.min(height, window.innerHeight - 32);\r\n        if (top + height > window.innerHeight) {\r\n            top -= 32 * Math.ceil(window.innerHeight - top - height / 32);\r\n        }\r\n        if (top < 0) {\r\n            top += 32 * Math.ceil(-top / 32);\r\n        }\r\n        return { left, top, width, height };\r\n    }\r\n\r\n    _showList(list: HTMLElement, button: HTMLElement, left: number, top: number, width: number, height: number): { screen: HTMLElement, bigList: HTMLElement } {\r\n        const screen = document.createElement(\"div\");\r\n        screen.className = \"tfw-view-combo-screen\";\r\n        const bigList = document.createElement(\"div\");\r\n        bigList.className = \"thm-ele-nav thm-bg3\";\r\n        bigList.innerHTML = list.innerHTML;\r\n\r\n        bigList.style.top = `${top}px`;\r\n        bigList.style.left = `${left}px`;\r\n        bigList.style.width = `${width}px`;\r\n        bigList.style.height = `${height}px`;\r\n        screen.appendChild(bigList);\r\n        document.body.appendChild(screen);\r\n\r\n        this.bigList = bigList;\r\n        return { screen, bigList };\r\n    }\r\n\r\n    _ensureSelectionVisible() {\r\n        let index = 0;\r\n        const bigList: HTMLElement | undefined = this.bigList;\r\n        if (!bigList) return;\r\n        const items = bigList.querySelectorAll(\"div.item\");\r\n        for (const key of this.keys) {\r\n            const item = items[index];\r\n            if (key === this.selectedKey) {\r\n                const rect = bigList.getBoundingClientRect();\r\n                bigList.scrollTop = (32 * index) - rect.height / 2;\r\n                this.selectedIndex = index;\r\n                item.classList.add(\"thm-bgSL\");\r\n            } else {\r\n                item.classList.remove(\"thm-bgSL\");\r\n            }\r\n            index++;\r\n        }\r\n    }\r\n\r\n    _handleKeyboard(event: React.KeyboardEvent) {\r\n        switch (event.key) {\r\n            case \"ArrowDown\":\r\n                this.selectedIndex++;\r\n                this.selectedKey = this.keys[this.selectedIndex % this.keys.length];\r\n                this._ensureSelectionVisible();\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n                return;\r\n            case \"ArrowUp\":\r\n                this.selectedIndex = (this.selectedIndex + this.keys.length - 1) % this.keys.length;\r\n                this.selectedKey = this.keys[this.selectedIndex];\r\n                this._ensureSelectionVisible();\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n                return;\r\n            case \"Enter\":\r\n            case \" \":\r\n                const slot = this.props.onChange;\r\n                if (typeof slot === 'function') {\r\n                    slot(this.selectedKey);\r\n                }\r\n                EscapeHandler.fire();\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n                return;\r\n        }\r\n    }\r\n\r\n    expand() {\r\n        if (this.keys.length < 3) {\r\n            this._swapItems();\r\n            return;\r\n        }\r\n\r\n        const list = this.list.current;\r\n        const button = this.button.current;\r\n        if (!list || !button) return;\r\n\r\n        const { left, top, width, height } = this._computeDimensions(list, button);\r\n        const { screen, bigList } = this._showList(list, button, left, top, width, height);\r\n        this.selectedKey = this.props.value || \"\";\r\n        window.setTimeout(() => this._ensureSelectionVisible(bigList), 10);\r\n\r\n        const handleKeyboard = this._handleKeyboard.bind(this);\r\n        document.addEventListener(\"keydown\", handleKeyboard, true);\r\n        EscapeHandler.add(() => {\r\n            document.body.removeChild(screen)\r\n            document.removeEventListener(\"keydown\", handleKeyboard, true);\r\n        });\r\n        Gesture(screen).on({ tap: () => {\r\n            EscapeHandler.fire()\r\n        }});\r\n        Gesture(bigList).on({\r\n            tap: evt => {\r\n                if (!evt || typeof evt.y === 'undefined') return;\r\n                const scroll = bigList.scrollTop;\r\n                const index = Math.floor((evt.y + scroll) / 32);\r\n                const value = this.keys[index];\r\n                EscapeHandler.fire()\r\n                requestAnimationFrame(() => {\r\n                    if (typeof this.props.onChange === 'function') {\r\n                        this.props.onChange(value)\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    componentDidMount() {\r\n        const element = this.ref.current;\r\n        if (!element) return;\r\n        this.touchable.element = element;\r\n    }\r\n\r\n    render() {\r\n        const p = this.props;\r\n        const children = p.children;\r\n        const label = castString(p.label, \"\").trim();\r\n        const wide = castBoolean(p.wide, false);\r\n        const keys = ensureGoodKeys(p.keys, children);\r\n        const value = castString(p.value, keys[0]);\r\n        const classes = [\"tfw-view-combo\"];\r\n        const items = children.map(item => {\r\n            const key = item.key;\r\n            return (<div className=\"item\" key={key} > {item} </div>);\r\n        });\r\n\r\n        if (wide) classes.push(\"wide\");\r\n\r\n        this.keys = keys;\r\n\r\n        const index = getIndex(keys, value);\r\n\r\n        return (\r\n            <button ref={this.ref} className={classes.join(\" \")}>\r\n                {label.length > 0 ? <Label label={label}/> : null}\r\n                <div ref={this.button} className=\"button thm-bg3 thm-ele-button\">\r\n                    <div className=\"list-container\"\r\n                        style={{\r\n                            transform: `translateY(-${32 * index}px)`\r\n                        }}>\r\n                        <div ref={this.list} className=\"tfw-view-combo-list\" >{items}</div>\r\n                    </div>\r\n                    <div className=\"icon\" >\r\n                        <Icon size=\"24px\" content=\"down\" />\r\n                    </div>\r\n                </div>\r\n            </button>\r\n        );\r\n    }\r\n}\r\n\r\nfunction getIndex(keys: string[], value: string) {\r\n    const index = keys.indexOf(value);\r\n    return Math.max(0, index);\r\n}\r\n\r\n/**\r\n * Keys must be non empty strings. If a key is not defined, it will take its index (stringified) as value.\r\n * And if a \"key\" its defined on a child, it will take precedence on anything else.\r\n *\r\n* @param  {string[]} keys\r\n* @param  {ReactElement[]} children\r\n          *\r\n* @return {string[]}\r\n*/\r\nfunction ensureGoodKeys(keys: string[] | undefined, children: React.ReactElement<any>[]): string[] {\r\n    const goodKeys: string[] = castStringArray(keys, []);\r\n    const minimalLength: number = children.length;\r\n\r\n    while (goodKeys.length < minimalLength) {\r\n        goodKeys.push(`${goodKeys.length}`);\r\n    }\r\n    for (let k = 0; k < goodKeys.length; k++) {\r\n        if (goodKeys[k].trim().length === 0) {\r\n            goodKeys[k] = `${k}`;\r\n        }\r\n    }\r\n    children.forEach((child, index) => {\r\n        const key = child.key;\r\n        if (typeof key === \"string\") {\r\n            goodKeys[index] = key;\r\n        } else {\r\n            child.key = goodKeys[index];\r\n        }\r\n    });\r\n\r\n    return goodKeys;\r\n}\r\n\r\n\r\nfunction onTap(elem: HTMLElement, handler: () => void) {\r\n    const slot = (event) => {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        elem.removeEventListener(\"mousedown\", slot);\r\n        elem.removeEventListener(\"touchdown\", slot);\r\n        handler();\r\n    };\r\n    elem.addEventListener(\"mousedown\", slot, false);\r\n    elem.addEventListener(\"touchdown\", slot, false);\r\n}\r\n","module.exports = {\"en\":{\"database\":\"Database connection\",\"db-pwd\":\"Password\",\"db-usr\":\"User name\",\"error\":\"Error\",\"error-2\":\"Unable to reach database server! It's either down or you provide a wrong host name.\",\"error-3\":\"We reached the database server, but the database name is unknown!\",\"error-4\":\"Invalid DB user/password!\",\"error-5\":\"A mandatory installation file is missing! Please tell your provider that \\\"install.sql\\\" is missing.\",\"error-6\":\"Your database is not empty! Please ask your provider to do a backup then remove all the tables in it.\",\"host\":\"Database host name\",\"install\":\"Terminate installation\",\"mandatory\":\"All fields are mandatory!\",\"name\":\"Database name\",\"ok\":\"Ok\",\"prefix\":\"Prefix\",\"pwd\":\"Password\",\"siteadmin\":\"website admin\",\"title\":\"Last step...\",\"usr\":\"User name\"},\"fr\":{\"database\":\"Connexion à la base de données\",\"db-pwd\":\"Mot de passe BD\",\"db-usr\":\"Utilisateur BD\",\"error\":\"Erreur récupérable\",\"error-2\":\"<html>Impossible d'accéder au serveur de bases de données ! Soit il est hors service, soit vous vous êtes trompé d'adresse : <b>$1</b> !\",\"error-3\":\"<html>Le serveur a répondu, mais il ne connais pas la base de données dont vous avez spécifié le nom : <b>$2</b>.<br/><br/>Demandez à votre administrateur de la créer.\",\"error-4\":\"Il y a une erreur dans le nom d'utilisateur et mot de passe de la base de données !\",\"error-5\":\"Un fichier indispensable à l'installation est manquant ! Veuillez avertir votre fournisseur qu'il manque \\\"install.sql\\\".\",\"error-6\":\"Votre base de données contient d'anciennes données ! Veuillez consulter votre fournisseur pour qu'il puisse faire une sauvegarde puis tout effacer.\",\"host\":\"Adresse du serveur de BD\",\"install\":\"Achever l'installation\",\"mandatory\":\"Tous les champs sont obligatoires !\",\"name\":\"Nom de la BD\",\"ok\":\"Ok\",\"prefix\":\"Préfixe\",\"pwd\":\"Mot de passe\",\"siteadmin\":\"Administrateur du site\",\"title\":\"Dernière étape...\",\"usr\":\"Utilisateur\"}}","module.exports = {\"en\":{\"cancel\":\"Cancel\",\"close\":\"Close\",\"ok\":\"Ok\"},\"fr\":{\"cancel\":\"Annuler\",\"close\":\"Fermer\",\"ok\":\"OK\"}}","module.exports = {\"en\":{\"bad-login\":\"User \\\"$1\\\" is unknown or the password is wrong!\"},\"fr\":{\"bad-login\":\"L'utilisateur \\\"$1\\\" est inconnu ou le mot de passe est erroné !\"}}","import * as React from \"react\"\nimport \"./input.css\"\nimport castInteger from \"../../converter/integer\"\nimport castBoolean from \"../../converter/boolean\"\nimport castString from \"../../converter/string\"\nimport castUnit from \"../../converter/unit\"\nimport Label from \"../label\"\n\ninterface IStringSlot {\n    (value: string): void;\n}\n\ninterface IInputProps {\n    value: string;\n    label?: string;\n    wide?: boolean;\n    size?: number;\n    focus?: boolean;\n    width?: string;\n    enabled?: boolean;\n    placeholder?: string;\n    type?: \"text\" | \"password\" | \"submit\" | \"color\" | \"date\"\n    | \"datetime-local\" | \"email\" | \"month\" | \"number\" | \"range\"\n    | \"search\" | \"tel\" | \"time\" | \"url\" | \"week\";\n    validator?: (value: string) => boolean | RegExp;\n    onValidation?: (validation: boolean) => void;\n    onChange?: IStringSlot,\n    onEnterPressed?: (value: string) => void\n}\n\nexport default class Input extends React.Component<IInputProps, {}> {\n    private readonly input: React.RefObject<HTMLInputElement> = React.createRef();\n\n    handleKeyDown = (evt: React.KeyboardEvent<HTMLInputElement>) => {\n        if (evt.key === \"Enter\") {\n            evt.preventDefault();\n            evt.stopPropagation();\n            const { onEnterPressed, value } = this.props;\n            if (typeof onEnterPressed === 'function') {\n                onEnterPressed(value);\n            }\n        }\n    }\n\n    onFocus = (event: React.FocusEvent<HTMLInputElement>): void => {\n        const input = this.input ? this.input.current : null;\n        if (!input) return;\n        if (!input.classList) return;\n        input.classList.remove(\"thm-bg3\");\n        input.classList.add(\"thm-bgSL\");\n        if (this.props.type !== 'number') {\n            // setSelectionRange fails for \"number\" input.\n            input.setSelectionRange(0, input.value.length);\n        }\n    }\n\n    onBlur = (event: React.FocusEvent<HTMLInputElement>): void => {\n        const input = this.input ? this.input.current : null;\n        if (!input) return;\n        if (!input.classList) return;\n        input.classList.add(\"thm-bg3\");\n        input.classList.remove(\"thm-bgSL\");\n    }\n\n    onChange = (event: React.ChangeEvent<HTMLInputElement>): void => {\n        //if (!this.checkValidity(event.target.value)) return;\n        const { onChange } = this.props;\n        if (typeof onChange === 'function') {\n            event.preventDefault();\n            onChange(event.target.value);\n        }\n    }\n\n    render() {\n        const\n            p = this.props,\n            type = castString(p.type, \"text\"),\n            label = castString(p.label, \"\"),\n            value = castString(p.value, \"\"),\n            placeholder = castString(p.placeholder, \"\"),\n            wide = castBoolean(p.wide, false),\n            focus = castBoolean(p.focus, false),\n            enabled = castBoolean(p.enabled, true),\n            size = Math.max(1, castInteger(p.size, 8)),\n            width = castUnit(p.width, \"auto\"),\n            id = nextId();\n        const classes = [\"tfw-view-input\"];\n        if (wide) classes.push(\"wide\");\n        /*\n        const header = (error ? <div className=\"error\">{error}</div> :\n            (label ? (<Label htmlFor={id} label={label}/>) : null));\n        */\n        const inputClassName = \"thm-ele-button \"\n            + (enabled ? 'thm-bg3' : 'thm-bg0');\n        return (<div\n                    className={classes.join(\" \")}\n                    style={{ width, maxWidth: width }}>\n            <Label htmlFor={id} label={label}/>\n            <input\n                ref={this.input}\n                autoFocus={focus}\n                className={inputClassName}\n                placeholder={placeholder}\n                disabled={!enabled}\n                type={type}\n                id={id}\n                size={size}\n                onFocus={this.onFocus}\n                onBlur={this.onBlur}\n                onChange={this.onChange}\n                onKeyDown={this.handleKeyDown}\n                value={value}/>\n        </div>);\n    }\n}\n\n\nlet globalId = 0;\nfunction nextId() {\n    return `tfw-view-input-${globalId++}`;\n}\n","/**\r\n * @example\r\n * import Storage from \"./tfw/storage\";\r\n * Storage.local.set(\"state\", {lang:\"jp\", currentPage: \"checkpoint-list\"});\r\n * const state = Storage.local.get(\"state\", {lang:\"jp\", currentPage: \"checkpoint-list\"});\r\n * Storage.local.del(\"state\");\r\n */\r\n\r\nexport default {\r\n    local: makeStorage(window.localStorage),\r\n    session: makeStorage(window.sessionStorage)\r\n};\r\n\r\ninterface IStorage {\r\n    getItem: (key: string)=>any;\r\n    setItem: (key: string, val: any)=>void;\r\n    removeItem: (key: string)=>void;\r\n}\r\n\r\nfunction makeStorage(storage:IStorage) {\r\n    return {\r\n        get(key: string, defaultValue: any): any {\r\n            const value = storage.getItem(key);\r\n            if( value === null) return defaultValue;\r\n            try {\r\n                return JSON.parse(value);\r\n            }\r\n            catch( ex ) {\r\n                console.error(`storage[\"${key}\"] is not parsable as a JSON object!\\n`\r\n                + `Its value is: \"${value}\".\\nThis item will be deleted.`);\r\n                storage.removeItem(key);\r\n                return defaultValue;\r\n            }\r\n        },\r\n\r\n        set(key: string, value: any) {\r\n            storage.setItem(key, JSON.stringify(value));\r\n        },\r\n\r\n        del(key: string) {\r\n            storage.removeItem(key);\r\n        }\r\n    }\r\n}\r\n","import React from 'react'\nimport Icon from \"./tfw/view/icon\"\nimport Input from \"./tfw/view/input\"\nimport Button from \"./tfw/view/button\"\nimport Dialog from \"./tfw/factory/dialog\"\nimport WebService from \"./tfw/web-service\"\nimport Storage from \"./tfw/storage\"\nimport { IUser } from \"./types\"\n\nimport \"./Login.css\"\nimport Combo from \"./tfw/view/combo\"\n\nimport Intl from \"./tfw/intl\";\nconst _ = Intl.make(require(\"./Login.yaml\"));\n\nconst AsyncStart = import(\"./main\");\n\ninterface ILoginState {\n    lang: string;\n    email: string;\n    password: string;\n}\n\nexport default class App extends React.Component<{}, ILoginState> {\n    constructor(props: {}) {\n        super(props);\n        this.state = Storage.local.get(\n            \"web-soins/login\", { lang: Intl.lang, email: \"eric\", password: \"\" });\n    }\n\n    componentDidMount() {\n        const password = Storage.session.get(\"web-soins/password\", \"\")\n        if (!password || password.length ===0) return\n\n        if (WebService.isLocalhost()) {\n            this.setState(\n                { email: \"eric\", password },\n                this.handleLogin\n            )\n        }\n    }\n\n    componentDidUpdate() {\n        Storage.local.set(\"web-soins/login\", { lang: this.state.lang, email: this.state.email });\n    }\n\n    handleLanguageChange = (value: string) => {\n        Intl.lang = value;\n        this.setState({ lang: value });\n    }\n\n    handleLogin = () => {\n        const { email, password } = this.state\n        WebService.login(email, password)\n            .then((user: IUser) => this.start(user))\n            .catch(err => this.badLogin(err));\n    }\n\n    handleUsernameChange = (email: string) => {\n        this.setState({ email })\n    }\n\n    handlePasswordChange = (password: string) => {\n        this.setState({ password })\n    }\n\n    async start(user: IUser) {\n        Storage.session.set(\"web-soins/password\", this.state.password)\n        \n        const elem = document.getElementById(\"LOGIN\");\n        if (elem) elem.classList.add(\"hide\");\n        const applicationStarter = await AsyncStart;\n        applicationStarter.default.start(user);\n        document.body.classList.add(\"start\");\n        setTimeout(() => {\n            const body = document.body;\n            const splash1 = document.getElementById(\"splash1\");\n            const splash2 = document.getElementById(\"splash2\");\n            if (splash1) body.removeChild(splash1);\n            if (splash2) body.removeChild(splash2);\n        }, 1000);\n    }\n\n    badLogin(err: {}) {\n        console.log(\"err:\", err);\n        Dialog.alert(_('bad-login', this.state.email));\n    }\n\n    render() {\n        return (\n            <div className=\"app-login thm-bg0 thm-ele-dialog\" >\n                <Input\n                    wide={true}\n                    label=\"Utilisateur\"\n                    onChange={this.handleUsernameChange}\n                    value={this.state.email}\n                    size={20}\n                    focus={true} />\n                <Input\n                    wide={true}\n                    label=\"Mot de passe\"\n                    focus={true}\n                    onChange={this.handlePasswordChange}\n                    onEnterPressed={this.handleLogin}\n                    value={this.state.password}\n                    size={20}\n                    type=\"password\" />\n                <Combo label=\"Language\"\n                       value={this.state.lang}\n                       wide={true}\n                       onChange={this.handleLanguageChange}>\n                    <div key=\"en\" className=\"login-flex\"><Icon content=\"flag-en\" /> English</div>\n                    <div key=\"fr\" className=\"login-flex\"><Icon content=\"flag-fr\" /> French</div>\n                </Combo>\n                <Button\n                    label=\"Connexion\"\n                    onClick={this.handleLogin}\n                    icon=\"user\"\n                    flat={true} />\n            </div>\n        );\n    }\n}\n","import * as React from \"react\";\nimport Touchable from \"../behavior/touchable\"\nimport \"./checkbox.css\";\n\nimport castString from \"../converter/string\"\nimport castBoolean from \"../converter/boolean\"\n\n\ninterface IBooleanSlot {\n    (value: boolean): void;\n}\n\ninterface ICheckboxProps {\n    value?: boolean;\n    label?: string;\n    wide?: boolean;\n    reverse?: boolean;\n    onChange?: IBooleanSlot\n}\n\nexport default class Checkbox extends React.Component<ICheckboxProps, {}> {\n    readonly touchable: Touchable;\n    readonly ref;\n\n    constructor(props: ICheckboxProps) {\n        super(props);\n        this.handleChange = this.handleChange.bind(this);\n        this.touchable = new Touchable({ onTap: this.handleChange });\n        this.ref = React.createRef();\n    }\n\n    componentDidMount() {\n        const button = this.ref.current;\n        if (button) this.touchable.element = button;\n    }\n\n    private handleChange(): void {\n        const slot = this.props.onChange;\n        if (typeof slot === 'function') {\n            const value = castBoolean(this.props.value, false);\n            slot(!value);\n        }\n    }\n\n    render() {\n        const label = castString(this.props.label, \"\");\n        const value = castBoolean(this.props.value, false);\n        const wide = castBoolean(this.props.wide, false);\n        const reverse = castBoolean(this.props.reverse, false);\n        const classes = [\"tfw-view-checkbox\"];\n        if (value) classes.push(\"ok\");\n        if (wide) classes.push(\"wide\");\n        if (reverse) classes.push(\"reverse\");\n\n        return (<button ref={this.ref} className={classes.join(\" \")} >\n            <div className=\"pin\" >\n                <div className={`thm-ele-button bar ${value ? \"thm-bgSL\" : \"thm-bg1\"}`}> </div>\n                <div className={`thm-ele-button btn ${value ? \"thm-bgS\" : \"thm-bg0\"}`\r\n                }> </div>\n            </div>\n            <label >{label}</label>\n        </button>);\n    }\n}\n","import React from \"react\"\nimport Checkbox from '../tfw/view/checkbox'\nimport Input from '../tfw/view/input'\nimport Intl from '../tfw/intl'\n\nconst _ = Intl.make(require(\"./install.yaml\"))\n\n\nimport \"./install.view.css\"\n\ninterface IInstallProps {\n    prefix: string,\n    onUpdate: (state: IInstallState) => void\n}\n\ntype IStateAttributes =\n    \"databaseHost\" | \"databaseName\" |\n    \"databaseLogin\" | \"databasePassword\" |\n    \"appAdminLogin\" | \"appAdminPassword\" | \"appAdminPasswordBis\"\n\nexport interface IInstallState {\n    createDatabase: boolean,\n    databaseHost: string,\n    databaseName: string,\n    databaseLogin: string,\n    databasePassword: string,\n    appAdminLogin: string,\n    appAdminPassword: string\n    appAdminPasswordBis: string\n}\n\nexport default class Install extends React.Component<IInstallProps, IInstallState> {\n    constructor( props: IInstallProps ) {\n        super( props );\n        this.state = {\n            createDatabase: true,\n            databaseHost: 'localhost',\n            databaseName: '',\n            databaseLogin: '',\n            databasePassword: '',\n            appAdminLogin: 'admin',\n            appAdminPassword: '',\n            appAdminPasswordBis: ''\n        }\n    }\n\n    fire = () => {\n        this.props.onUpdate(this.state)\n    }\n\n    on(attributeName: IStateAttributes) {\n        return (value: string) => {\n            const state = { [attributeName]: value }\n            this.setState(state, this.fire)\n        }\n    }\n\n    handleCreateDatabaseChanged = (createDatabase: boolean) => {\n        this.setState({ createDatabase })\n    }\n\n    render() {\n        const { databaseHost, databaseName, databaseLogin, databasePassword } = this.state\n        const { appAdminLogin, appAdminPassword, appAdminPasswordBis } = this.state\n\n        return (<div className=\"Install\">\n            <fieldset>\n                <legend>{_('database')}</legend>\n                <div className='flex'>\n                    <Input label={_('host')} value={databaseHost}\n                        wide={true}\n                        onChange={this.on('databaseHost')}/>\n                    <Input label={_('name')} value={databaseName}\n                        wide={true}\n                        onChange={this.on('databaseName')}/>\n                </div>\n                <div className='flex'>\n                    <Input label={_('db-usr')} value={databaseLogin}\n                        wide={true}\n                        onChange={this.on('databaseLogin')}/>\n                    <Input label={_('db-pwd')} value={databasePassword}\n                        wide={true}\n                        onChange={this.on('databasePassword')}/>\n                </div>\n            </fieldset>\n            <Checkbox label=\"Create database structure\"\n                value={this.state.createDatabase}\n                onChange={this.handleCreateDatabaseChanged}/>\n            {\n                !this.state.createDatabase ? null :\n                <fieldset>\n                    <legend>{_('siteadmin')}</legend>\n                    <Input label={_('usr')} value={appAdminLogin}\n                        wide={true}\n                        onChange={this.on('appAdminLogin')}/>\n                    <div className='flex'>\n                        <Input label={_('pwd')} value={appAdminPassword}\n                            wide={true} type='password'\n                            onChange={this.on('appAdminPassword')}/>\n                        <Input label={_('pwd')} value={appAdminPasswordBis}\n                            wide={true} type='password'\n                            onChange={this.on('appAdminPasswordBis')}/>\n                    </div>\n                </fieldset>\n            }\n        </div>)\n    }\n}\n","import React from \"react\"\n\nimport WS from '../tfw/web-service'\nimport Button from '../tfw/view/button'\nimport Dialog from '../tfw/factory/dialog'\nimport Install, { IInstallState } from './install.view'\nimport Intl from '../tfw/intl'\n\nconst _ = Intl.make(require(\"./install.yaml\"))\n\n\nexport default { check }\n\n/**\n * Check if the Database has been correctly installed.\n */\nasync function check(tablesPrefix: string): Promise<boolean> {\n    return new Promise(async (resolve) => {\n        //  First step:\n        //  -----------\n        //  Call tfw.Install( tablesPrefix ).\n        //  If the result is 0, everything is already installed.\n        //  Otherwise, the result will be -9.\n\n        const installationStatus = await WS.exec(\"tfw.Install\", tablesPrefix)\n        if (installationStatus === 0) {\n            resolve(true)\n            return\n        }\n\n        let installState: IInstallState = {\n            createDatabase: true,\n            databaseHost: 'localhost',\n            databaseName: '',\n            databaseLogin: '',\n            databasePassword: '',\n            appAdminLogin: 'admin',\n            appAdminPassword: '',\n            appAdminPasswordBis: ''\n        }\n\n        const onClose = async () => {\n            const databaseConnectionStatus = await WS.exec(\"tfw.Install\", {\n                createDatabase: installState.createDatabase,\n                prefix: tablesPrefix,\n                host: installState.databaseHost,\n                name: installState.databaseName,\n                dbUsr: installState.databaseLogin,\n                dbPwd: installState.databasePassword,\n                usr: installState.appAdminLogin,\n                pwd: installState.appAdminPassword\n            })\n            console.info(\"databaseConnectionStatus=\", databaseConnectionStatus);\n            switch( databaseConnectionStatus ) {\n                case 0:\n                    resolve(true)\n                    dialog.hide()\n                    return\n                case -1: return Dialog.alert(\"Missing mandatory argument!\")\n                case -2: return Dialog.alert(\"Unknown host!\")\n                case -3: return Dialog.alert(\"Database not found!\")\n                case -4: return Dialog.alert(\"Invalid user name or password!\")\n                case -5: return Dialog.alert(\"Missing 'pri/install.sql' file!\")\n                case -6: return Dialog.alert(\"Database is not empty!\")\n                default: return Dialog.alert(`Unknown error: ${databaseConnectionStatus}!`)\n            }\n        }\n\n        const view = <Install prefix={tablesPrefix}\n                onUpdate={(state: IInstallState) => installState = state}/>\n\n        const dialog = Dialog.show({\n            closeOnEscape: false,\n            content: view,\n            footer: <Button label={_(\"ok\")} wide={true} onClick={onClose}/>\n        })\n    })\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport Login from './Login'\nimport \"./tfw/font/josefin.css\"\nimport \"./index.css\"\nimport Theme from \"./tfw/theme\"\nimport WebService from \"./tfw/web-service\"\nimport Install from './install'\n\nconsole.info(\"location.hostname=\", location.hostname);\nif (location.hostname !== 'localhost') {\n    WebService.setRoot(\"https://web-soins.com/\");\n}\n\n\nTheme.register(\"soin\", {\n    white: \"#fda\", black: \"#420\",\n    bg0: \"#ffcb97\", bg1: \"#ffdab3\", bg2: \"#ffe6cc\", bg3: \"#fff3e6\",\n    bgP: \"#742\", bgPL: \"#953\", bgPD: \"#531\",\n    bgS: \"#ff9f30\", bgSD: \"#ff7f00\", bgSL: \"#ffbf60\"\n});\nTheme.apply(\"soin\");\n\n\nasync function start() {\n    try {\n        const isInstallationOK = await Install.check(\"soin\")\n        console.info(\"isInstallationOK=\", isInstallationOK);\n        if (!isInstallationOK) {\n            window.location.reload()\n        }\n\n        console.log(\"Render <Login/>...\")\n        ReactDOM.render(\n            <Login />,\n            document.getElementById('LOGIN'));\n    }\n    catch( ex ) {\n        console.error(ex)\n    }\n}\n\nstart()\n"],"sourceRoot":""}