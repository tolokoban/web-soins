(window.webpackJsonp=window.webpackJsonp||[]).push([[2],Array(113).concat([function(e,t){e.exports={fr:{"err-1":"Une ligne non vide et non comment\xe9e doit toujours commencer par au moins une ast\xe9risque pour indiquer le niveau hi\xe9rarchique.","err-2":"<html>Vous avez saut\xe9 au moins un niveau hi\xe9rarchique:<br/><code>$1</code> !<br/><br/>Vous \xe9tiez au niveau <b>$2</b> et vous d\xe9finissez maintenant le niveau <b>$3</b>.","err-3":"<html>Vous avez d\xe9j\xe0 d\xe9clar\xe9 cet identifiant : <b>$1</b> !"}}},function(e,t,n){},function(e,t,n){},function(e,t){e.exports={en:{close:"Close",export:"Export to Spreadsheet","no-data":"There is no data for this period!"},fr:{close:"Fermer",export:"Exporter vers un tableur","no-data":"Il n'y a aucune donn\xe9e sur cette p\xe9riode !"}}},function(e,t,n){},function(e,t,n){},function(e,t){e.exports={en:{"button-patient":"Patients","button-reports":"Reports","button-stats":"Stat.","button-struct":"Struct.",cancel:"Cancel",close:"Close",code:"Code:",consultations:"Consultations","consultations-count":"Consultations:","counting-reports":"Counting Reports","create-stat":"Create Statistics","create-stat-consultation":"Consult. Statistics","create-stat-patient":"Patients Statistics","date-min":"Start Date","date-max":"End Date","execute-query":"Execute Query",extractions:"Extractions of Patients and Consultations",filter:"Filter",firstname:"Firstname",gender:"Gender","gender-female":"Female","gender-male":"Male","gender-undefined":"Undefined","generating-report":"Generating report...","hint-report-templates":"Report templates are spreadsheet saved as <b>Flat XML Spreadsheet</b> with placeholders like the following ones:",identifier:"ID",lastname:"Lastname",loading:"Loading in progress...","loading-report":"Loading report template...",logout:"Logout",patients:"Patients","patients-count":"Patients:","query-in-progress":"Query in progress...",report:"To add an annual report, clic on the left pane's button bearing the following icon:",secondname:"Secondname",size:"Size","stat-type":"Statistic Type",struct:"Structure:",welcome:"To add new statistics, clic on the left pane's button bearing the following icon:"},fr:{"button-patient":"Patients","button-reports":"Rapports","button-stats":"Stat.","button-struct":"Struct.",cancel:"Annuler",close:"Fermer",code:"Code :",consultations:"Consultations","consultations-count":"Consultations :","counting-reports":"Rapports de d\xe9comptes","create-stat":"Cr\xe9er des statistiques","create-stat-consultation":"Stats consultations","create-stat-patient":"Stats patients","date-min":"Date de d\xe9but","date-max":"Date de fin","execute-query":"Executer la requ\xeate",extractions:"Extractions de patients et de consultations",filter:"Filtre",firstname:"Pr\xe9nom",gender:"Genre","gender-female":"F\xe9minin","gender-male":"Masculin","gender-undefined":"Non d\xe9fini","generating-report":"Rapport en cours de r\xe9alisation...","hint-report-templates":"Les mod\xe8les de rapports sont des fichier <b>Open Office Calc Flat XML Spreadsheet</b> avec des requ\xeates int\xe9gr\xe9es comme celles-ci:",identifier:"ID",lastname:"Nom",loading:"Chargement en cours...","loading-report":"Chargement du mod\xe8le de rapport...",logout:"D\xe9connexion",patients:"Patients","patients-count":"Patients :","query-in-progress":"Requ\xeate en cours...",report:"Pour \xe9diter un rapport annuel, cliquez sur le bouton avec l'ic\xf4ne suivante dans le panneau de gauche :",secondname:"Second P.",size:"Taille","stat-type":"Type de statistique",struct:"Structure :",welcome:"Pour ajouter des statistiques, cliquez sur le bouton avec l'ic\xf4ne suivante dans le panneau de gauche : "}}},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t){e.exports={en:{ok:"Ok"},fr:{ok:"Valider"}}},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t){e.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEBLAEsAAD//gATQ3JlYXRlZCB3aXRoIEdJTVD/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wgARCAAwAeADAREAAhEBAxEB/8QAGgABAAMBAQEAAAAAAAAAAAAAAAECAwQFB//EABgBAQEBAQEAAAAAAAAAAAAAAAADAQUG/9oADAMBAAIQAxAAAAH7353vddZAAACQAQASAQSQCQAAAAAAAAAAAAAAAAAYSra0tKyyKkksA0NmwZkMhtWSXbYqQSVIZY2bYoVAAIJLlwAAAAAAAAAAAYRrz6wrHh1Q1xUGh1nc2hxMzKFSx0mhmUIIKmx6DbHOZgEEFSxudJYAAAAAAAAAAAwjXDVKy5WQaAEnQdTYOZmZUq2WbElSrRDKmp2NsZGZBIBUGxsWAAAAAAAAAAAMI1y10VlBBJIIZZtgVBAIJJIABBJckgggEggFiQAAAAAAAAAAAYRrySr1VlIAAAAAAAAAAAAAAAAAAAAAAAAAAABhGn//xAAeEAADAAMBAQEBAQAAAAAAAAAAAhMBERIDM0AQIP/aAAgBAQABBQLx8sZWKEUIoRQihFCKEUIoRQihFCKEUIoRQihFCKEUIoRQihFCKEUIoRQihFCKEUIoRQihFCKEUIoRQihFCKEUIoRQihFCKEUIoRQihFCKEUIoRQ9fLGF8PlljPoVKFShQw5szk7OzsoUMOdHR2dnZQw5jP82dHR0dHR0dG/0+3z8vl6MM5hsnR1k6yYYTJgYzk6OjowwuTZnJs6OjoTIpkzk2bNmzZsxkXJj9Ht8/L5MmzPiY8SRIiSFQxgbBnzJkiRMwhycHBMmTFQxj+ZU5OTk5ODg4MKY/R7fPw+Wjk5OTk5OTX90aOTk5NGjRo5OTk1/jRo0aNGjX6vb5+PrjC2QshZCyFkLIWQshZCyFkLIWQshZCyFkLIWQshZCyFkLIWQshZCyFkLIWQshZCyFkLIWQshZCyFkLIWQshZCyFkLIWQshZCyFkLIWQshZCyHr64yv//EABsRAAMAAwEBAAAAAAAAAAAAAAACEwEDMhFQ/9oACAEDAQE/AdmzOM+YKMUYoxRijFGKMUYoxRijFGKMUYoxRijFGKMUYoxRijFGKMUYoxRijFGKMUYoxRijFGKMUYoxRijFGKMUYoxRijFGKMUYoxRijFGKMUYoxRjXsznPmTZ19vX0bOvt6+jZ19vX0bOvt6+jZrznPuCbE2JsTYmxNibE2JsTYmxNibE2JsTYmxNibE2JsTYmxNibE2JsTYmxNibE2JsTYmxNibE2JsTYmxNibE2JsTYmxNibE2JsTYmxNibE2JsTY1684z7k/8QAGxEAAwEBAQEBAAAAAAAAAAAAAAITAQMyEVD/2gAIAQIBAT8B5883PukkJISQkhJCSEkJISQkhJCSEkJISQkhJCSEkJISQkhJCSEkJISQkhJCSEkJISQkhJCSEkJISQkhJCSEkJISQkhJCSEkJISQkhJCSEkJISQkh055mfcOXjP2+vjTl4/b6+NOXj9vr405eM/b6+NOfTMz5pVCqFUKoVQqhVCqFUKoVQqhVCqFUKoVQqhVCqFUKoVQqhVCqFUKoVQqhVCqFUKoVQqhVCqFUKoVQqhVCqFUKoVQqhVCqFUKoVQqhVCqFUKodOmbnzD/xAAYEAEBAQEBAAAAAAAAAAAAAAAAMQERUP/aAAgBAQAGPwLuoiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiI7jPb1nt6z29Z7euaqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqrmP/8QAHhAAAwACAgMBAAAAAAAAAAAAAAERECAhQDAxUFH/2gAIAQEAAT8hX+e/bCSSQkgCQkAAEkkkgkkkkkkkkkkkkk9fINBiJRH7jBONhCI9WUwesqFBse8NFWJ9nMLEMwqHgnDB+Bx43G5YweMtG5Q2KGj8ZV5GxZY3tjLd3QlBI4CpYZeBGQy9USJDWB7eISE7eNmdQRSGvKjwikQngAJdrL/BBfakkkkkkkkkkkkkkkkkkkkkkkkkkkkk9/Kf/9oADAMBAAIAAwAAABCLbbbJJbZJZbJZJJJJbbbbbbbbbbbbAJLP/wC2abWyW/yW2SSS222222222222DE2y+3fb/wC+30klskstttttttttttths2/3k2933l/9kksllttttttttttttolst1tllskktsktktltttttttttttthkkkltkkkkkkttktktttttttttttts//EABsRAQEBAAMBAQAAAAAAAAAAAABhMRARUFEg/9oACAEDAQE/EPhRdddddddddddddddddddddddddddddddddddddddddddddddddddddddddfgpv7ebf9d+rm346dexm39vN9KJppppppppppppppppppppppppppppppppppppppppppppppppppppppppp8FP/8QAGREBAQEBAQEAAAAAAAAAAAAAAGExEVBg/9oACAECAQE/EN+9SSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSZ957omHuTD7iCZ94ssssssssssssssssssssssssssssssssssssssssssssssssssssssssss3/1//8QAJBABAQACAQQCAwEBAQAAAAAAAQAR8FEhMUGxEGFAceGBkfH/2gAIAQEAAT8QPDPsM9oP+20LaFtC2hbQtoWz/wBNm/tta2tbctvW0LaFt62tbUtvW3Lb1ty29bN/bbVta2tbWtrW1ra1ty2tbWttW2rbVtq21battW2rbVtq21battW2rbVtq21battW2rbVtq21bas+PPuM97/oPcfneUjNA832TzQHzB5RJBAPMjmSeZOe8HmDysYzzY8wcd5B5sOYkdbAsEJ5kWPNhzY8yLHmB8xTJ+R6vuxfofdmIPlnPdjDCb9016s5JmOEZfk3q+bJkEh8IT806khJGPpILOSzsvhOCcnwkcTyfker7v8AMPu6zpIvaUe0PHa6/F+ky7Ss6WLCwbgX030X6yj2mHaaR8S3xZSuJee0rOliWcs3j4c4+l+s/SevtYnt8DAfker7jn/T3IfED4jgseIHFhxYcQHiwWWS2NhxI4sOIB4kNjxY8WHFhxYcQlgmNRY2NhYWMEsMGPyPV9z559jjvf8AhtrG1jaxtY2sbWNvG2jbRto2sbWNrG1jaxtY2sbWNrG1jaxtY20baNtG2jbxt420baNvG2jbRto20baNtG2jbRto20baNtG2jbRto20baNtG2jbRto20baNtG2jbRnz59zjtf//Z"},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t){e.exports={en:{invalid:"Invalid date!","month-0":"Jan","month-1":"Feb","month-2":"Mar","month-3":"Apr","month-4":"May","month-5":"Jun","month-6":"Jul","month-7":"Aug","month-8":"Sep","month-9":"Oct","month-10":"Nov","month-11":"Dec"},fr:{invalid:"Date invalide !","month-0":"Jan","month-1":"F\xe9v","month-2":"Mar","month-3":"Avr","month-4":"Mai","month-5":"Jun","month-6":"Jul","month-7":"Aou","month-8":"Sep","month-9":"Oct","month-10":"Nov","month-11":"D\xe9c"}}},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){e.exports=n.p+"static/media/report.035dce20.fods"},function(e,t,n){},function(e,t,n){},function(e,t){e.exports={en:{ok:"Ok"},fr:{ok:"Valider"}}},function(e,t,n){},function(e,t){e.exports={en:{ok:"Ok"},fr:{ok:"Valider"}}},function(e,t,n){},function(e,t){e.exports={en:{ok:"Ok"},fr:{ok:"Valider"}}},function(e,t,n){},function(e,t){e.exports={en:{ok:"Ok"},fr:{ok:"Valider"}}},function(e,t,n){e.exports=n.p+"static/media/welcome.897fab41.svg"},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(5),r=n.n(a),i=n(10),c=n(1),s=n.n(c),o=n(25),u=n.n(o),l=n(100),d=n(11),p=n(102),f={INITIAL_STATE:{},reducer:function(e,t){var n=t.type;if(!n.startsWith("current:"))return e;switch(t.type.substr("current:".length)){case"set":return function(e,t){return Object(d.a)({},e,t)}(e,t.current);default:throw Error('Unknown action "'.concat(n,'"!'))}},set:function(e){return{type:"current:set",current:e}}};var h=n(16),m=new Set(["nickname","language"]),v={INITIAL_STATE:{email:"",nickname:"",language:"",roles:[]},reducer:function(e,t){if(!t.type.startsWith("user:"))return e;var n=t.type.substr("user:".length);if(!m.has(n))throw Error('Unknown attribute "'.concat(n,'"!'));var a=t.data;return Object.assign(e,Object(h.a)({},n,a))},setLanguage:function(e){return{type:"user:language",data:e}},setNickname:function(e){return{type:"user:nickname",data:e}}},b={INITIAL_STATE:[],reducer:function(e,t){var n=t.type;if(!n.startsWith("organization:"))return e;switch(t.type.substr("organization:".length)){case"set":return t.organizations.slice();case"add":return function(e,t){var n=e.slice();return n.push(t),n}(e,t.organization);case"update":return function(e,t){return e.map(function(e){return e.id===t.id?t:e})}(e,t.organization);default:throw Error('Unknown action "'.concat(n,'"!'))}},setOrganizations:function(e){return{type:"organization:set",organizations:e}},addOrganization:function(e){return{type:"organization:add",organization:e}},updateOrganization:function(e){return{type:"organization:update",organization:e}}};var g={INITIAL_STATE:"welcome",reducer:function(e,t){var n=t.type;if(!n.startsWith("page:"))return e;switch(t.type.substr("page:".length)){case"page":return t.page;default:throw Error('Unknown action "'.concat(n,'"!'))}},page:function(e){return{type:"page:page",page:e}}},y={INITIAL_STATE:[],reducer:function(e,t){var n=t.type;if(!n.startsWith("carecenter:"))return e;switch(t.type.substr("carecenter:".length)){case"set":return t.carecenters.slice();case"add":return function(e,t){var n=e.slice();return n.push(t),n}(e,t.carecenter);case"update":return function(e,t){return e.map(function(e){return e.id===t.id?Object.assign(e,t):e})}(e,t.carecenter);default:throw Error('Unknown action "'.concat(n,'"!'))}},setCarecenters:function(e){return{type:"carecenter:set",carecenters:e}},addCarecenter:function(e){return{type:"carecenter:add",carecenter:e}},updateCarecenter:function(e){return{type:"carecenter:update",carecenter:e}}};var A=n(3),k=n(12),E={createPatientsFieldsFromStructure:function(e){var t={};return e.patientFields.forEach(function(e){t[e.id]=!0}),t},createPatientsFieldsCaptionsFromStructure:function(e){var t={};return e.patientFields.forEach(function(e){t[e.id]=k.a.toText(e.caption)}),t},getFieldCaption:function(e,t){if("#"!==e.charAt(0))return e;var n=t.formFields[e];return n?k.a.toText(n.caption):e},getCurrentStructure:function(){var e=F.store.getState(),t=e.current.carecenter;if(!t)return null;var n=t.structureId,a=e.structures.find(function(e){return e.id===n});return a||null}};var C={INITIAL_STATE:[],reducer:function(e,t){var n=t.type;if(!n.startsWith("structure:"))return e;switch(t.type.substr("structure:".length)){case"set":return t.structures.slice();case"add":return function(e,t){var n=e.slice();return n.push(t),n}(e,t.structure);case"update":return function(e,t){return e.map(function(e){return e.id===t.id?Object.assign(e,t):e})}(e,t.structure);default:throw Error('Unknown action "'.concat(n,'"!'))}},setStructures:function(e){return{type:"structure:set",structures:e}},addStructure:function(e){return{type:"structure:add",structure:e}},updateStructure:function(e){return{type:"structure:update",structure:e}}};var O=n(6),j=n(4),w={INITIAL_STATE:{statsType:"consultations",dateMin:function(){var e=new Date;if(1!==e.getDate()){var t=new Date(e.getFullYear(),e.getMonth(),1);return t.getTime()}var n=new Date(e.getFullYear(),e.getMonth()-1,e.getDate());return n.getTime()}(),dateMax:Date.now(),patientsFields:{birthday:!0,size:!1,nationality:!0},patientsFieldsCaptions:{birthday:"Date de naissance",size:"Taille",nationality:"Nationalit\xe9"},carecenter:{id:0,organizationId:0,structureId:0,patientsCount:0,consultationsCount:0,name:"",code:""}},reducer:function(e,t){var n=t.type;if(!n.startsWith("stats-config:"))return e;switch(t.type.substr("stats-config:".length)){case"setType":return function(e,t){return Object(d.a)({},e,{statsType:t.statsType||"consultations"})}(e,t);case"setDateMin":return function(e,t){return Object(d.a)({},e,{dateMin:t.date})}(e,t);case"setDateMax":return function(e,t){return Object(d.a)({},e,{dateMax:t.date})}(e,t);case"setPatientsFields":return function(e,t){return Object(d.a)({},e,{patientsFields:t.fields||{}})}(e,t);case"setPatientField":return function(e,t){if("string"!==typeof t.fieldName)throw Error('action must have an attribute "fieldName" of type "string" but we found "'.concat(typeof t.fieldName,'"'));var n=Object(O.a)(t.fieldName,""),a=Object(j.a)(t.fieldVisibility,!1);return Object(d.a)({},e,{patientsFields:Object(d.a)({},e.patientsFields,Object(h.a)({},n,a))})}(e,t);default:throw Error('Unknown action "'.concat(n,'"!'))}},setType:function(e){return{type:"stats-config:setType",statsType:e}},setDateMin:function(e){return{type:"stats-config:setDateMin",date:e}},setDateMax:function(e){return{type:"stats-config:setDateMax",date:e}},setPatientsFields:function(e){return{type:"stats-config:setPatientsFields",fields:e}},setPatientField:function(e,t){return{type:"stats-config:setPatientField",fieldName:e,fieldVisibility:t}}};var x={INITIAL_STATE:[],reducer:function(e,t){var n=t.type;if(!n.startsWith("stats:"))return e;switch(t.type.substr("stats:".length)){case"addStat":return function(e,t){var n=e.stats.slice();return n.push(t.stat),n}(e,t);default:throw Error('Unknown action "'.concat(n,'"!'))}},addStat:function(e){return{type:"stats:addStat",stat:e}}};var S={statsConfig:function(e){return"".concat(e.statsType,"/").concat(e.dateMin,"-").concat(e.dateMax)}};var N={current:f.INITIAL_STATE,carecenters:y.INITIAL_STATE,organizations:b.INITIAL_STATE,page:g.INITIAL_STATE,stats:x.INITIAL_STATE,statsConfig:w.INITIAL_STATE,structures:C.INITIAL_STATE,user:v.INITIAL_STATE};var I=Object(p.b)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"initStatsConfig":return function(e,t){var n=t.carecenterId,a=e.carecenters.find(function(e){return e.id===n});if(!a)throw Error("There is no Carecenter with id=".concat(n,"!"));var r=a.structureId;if("number"!==typeof r)throw Error('Missing attribute number "structureId"!');var i=e.structures.find(function(e){return e.id===r});if(!i)throw Error("There is no structure with id ".concat(r,"!"));return Object(d.a)({},e,{statsConfig:Object(d.a)({},e.statsConfig,{carecenter:a,patientsFields:E.createPatientsFieldsFromStructure(i),patientsFieldsCaptions:E.createPatientsFieldsCaptionsFromStructure(i)})})}(e,t);case"addStat":return function(e,t){var n=S.statsConfig(e.statsConfig),a=e.stats.filter(function(e){return S.statsConfig(e)!==n});return a.push(Object(d.a)({},e.statsConfig)),Object(d.a)({},e,{stats:a})}(e);case"removeStat":return function(e,t){var n=e.stats.filter(function(e){return S.statsConfig(e)!==t.key});return Object(d.a)({},e,{stats:n})}(e,t);default:return{current:f.reducer(e.current,t),user:v.reducer(e.user,t),stats:x.reducer(e.stats,t),organizations:b.reducer(e.organizations,t),page:g.reducer(e.page,t),carecenters:y.reducer(e.carecenters,t),structures:C.reducer(e.structures,t),statsConfig:w.reducer(e.statsConfig,t)}}});var F={store:I,dispatch:function(e){I.dispatch(e)},Current:f,Page:g,User:v,Organizations:b,Carecenters:y,Structures:C,StatsConfig:w,initStatsConfig:function(e){return{type:"initStatsConfig",carecenterId:e}},addStat:function(){return{type:"addStat"}},removeStat:function(e){return{type:"removeStat",key:e}}},T=n(18),M={list:function(){var e=Object(i.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.exec("orga.list");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},Q={list:function(){var e=Object(i.a)(r.a.mark(function e(t){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.exec("carecenter.list",t);case 2:return n=e.sent,e.abrupt("return",n.map(function(e){return{id:e.id,name:e.name,code:e.code,patientsCount:e.patientsCount,consultationsCount:e.consultationsCount,structureId:e.structure,organizationId:t}}));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},R=k.a.make(n(113)),D=/^(#[A-Z0-9-]+)?([^\(@]*)(\([^\)]*\)\+?)?(@[A-Z0-9,-]+)?/;var P={parse:function(e){var t={},n=[t];return"string"!==typeof e&&(e="".concat(e)),e.split("\n").forEach(function(e,t){try{if(0===(e=e.trim()).length)return;if("//"===e.substr(0,2))return;if("*"!==e.charAt(0))throw R("err-1");var a=function(e){for(var t=0;"*"==e.charAt(0);)e=e.substr(1),t++;return t}(e);if(e=e.substr(a).trim(),a>n.length)throw R("err-2",e,n.length-1,a);for(;n.length>a;)n.pop();var r=function(e){var t={children:{}},n=D.exec(e.trim());return n[2]&&(t.caption=n[2].trim()),n[1]?t.id=n[1].trim():t.id=t.caption.toUpperCase(),n[3]&&(t.type=n[3].substr(1,n[3].length-2).trim()),n[4]&&(t.tags=n[4].trim().substr(1).split(",").map(function(e){return e.trim()})),t}(e);if("undefined"!==typeof n[n.length-1][r.id])throw R("err-3",r.id);n[n.length-1][r.id]=r,n.push(r.children||{})}catch(i){throw{lineNumber:t+1,message:i}}}),t},flattenFormsFields:function(e){var t=[];return function e(t,n,a){Object.keys(t).forEach(function(r){var i=t[r];"string"===typeof i.id&&"#"===i.id.charAt(0)?n.push({id:i.id,caption:i.caption,path:a.slice()}):i.children&&(a.push(i.caption),e(i.children,n,a),a.pop())})}(e,t,[]),t.sort(function(e,t){var n=e.caption,a=t.caption;return n<a?-1:n>a?1:0}),t}},B={list:function(){var e=Object(i.a)(r.a.mark(function e(t){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.exec("structure.list",t);case 2:return n=e.sent,e.abrupt("return",n.map(function(e){return{id:e.id,organizationId:t,name:e.name,patientFields:U(e.patient),formFields:q(e),exams:L(e.exams),vaccins:L(e.vaccins),forms:L(e.forms),types:L(e.types),sources:{exams:e.exams,vaccins:e.vaccins,patient:e.patient,forms:e.forms,types:e.types}}}));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()};function L(e){try{return P.parse(e)}catch(t){console.error("[parsePatient] ",t),console.log(e)}return null}function U(e){try{var t=P.parse(e);return Object.keys(t).map(function(e){var n=t[e];return{id:e,type:n.type,caption:k.a.toIntl(n.caption)}})}catch(n){console.error("[parsePatient] ",n)}return[]}function q(e){for(var t={},n=[L(e.forms)];n.length>0;)for(var a=n.shift(),r=Object.keys(a),i=0;i<r.length;i++){var c=r[i],s=a[c];t[c]={caption:k.a.toIntl(s.caption)},s.type&&(t[c].type=s.type),s.children&&n.push(s.children)}return t}var Y=n(2),z=n(8),V=n(7),J=n(9),G=n(20),W=n(14),K=n(31),Z=n(23),_=(n(114),["#b37036","#cc7529","#e67717","#ff7700","#765"]),H=function(e){function t(){var e,n;Object(A.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(z.a)(this,(e=Object(V.a)(t)).call.apply(e,[this].concat(r)))).canvas=c.createRef(),n}return Object(J.a)(t,e),Object(Y.a)(t,[{key:"componentDidMount",value:function(){this.paint()}},{key:"componentDidUpdate",value:function(){this.paint()}},{key:"paint",value:function(){if(this.canvas.current){var e=this.canvas.current,t=this.props.values,n=Object(K.a)(this.props.colors,_).slice(),a=e.width,r=Math.floor(a/2)-3,i=2*Math.PI,c=i/a,s=this.props.values.reduce(function(e,t){return t+e}),o=e.getContext("2d");if(o){var u=0,l=0,d=function(e){return o.lineTo(r*Math.sin(e),-r*Math.cos(e))};if(o.save(),o.clearRect(0,0,a,a),s>0){o.translate(a/2,a/2),o.fillStyle="#000",o.globalAlpha=.5,o.ellipse(0,0,a/2,a/2,0,0,2*Math.PI),o.fill(),o.strokeStyle="#000",o.lineWidth=1;for(var p=0;p<n.length;p++){var f=n[p%n.length];o.fillStyle=f,o.beginPath(),o.moveTo(0,0),l=u+i*t[p]/s;do{d(u),u+=c}while(u<l);d(l),u=l,o.closePath(),o.globalAlpha=1,o.fill(),o.globalAlpha=.2,o.stroke()}}o.restore()}}}},{key:"render",value:function(){var e=this.props,t=(Object(K.a)(e.colors,_),Object(Z.a)(e.size,200));return c.createElement("canvas",{ref:this.canvas,width:t,height:t,className:"presentation-pie"})}}]),t}(c.Component),X=n(32),$=n(19),ee=(n(115),n(37)),te=n(24),ne=n(40),ae=n(33),re=n(27),ie=function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(z.a)(this,Object(V.a)(t).call(this,e))).touchable=void 0,n.ref=c.createRef(),n.list=c.createRef(),n.button=c.createRef(),n.bigList=void 0,n.keys=[],n.selectedKey="",n.selectedIndex=-1,n.handleClick=n.handleClick.bind(Object(W.a)(Object(W.a)(n))),n.touchable=new te.a({onTap:n.handleClick}),n}return Object(J.a)(t,e),Object(Y.a)(t,[{key:"handleClick",value:function(){this.expand()}},{key:"_swapItems",value:function(){var e=!0,t=!1,n=void 0;try{for(var a,r=this.keys[Symbol.iterator]();!(e=(a=r.next()).done);e=!0){var i=a.value;if(this.props.value!==i){var c=this.props.onChange;return void("function"===typeof c&&c(i))}}}catch(s){t=!0,n=s}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}},{key:"_computeDimensions",value:function(e,t){var n=e.getBoundingClientRect(),a=n.left,r=n.top,i=n.height,c=t.getBoundingClientRect().width;return r+(i=Math.min(i,window.innerHeight-32))>window.innerHeight&&(r-=32*Math.ceil(window.innerHeight-r-i/32)),r<0&&(r+=32*Math.ceil(-r/32)),{left:a,top:r,width:c,height:i}}},{key:"_showList",value:function(e,t,n,a,r,i){var c=document.createElement("div");c.className="tfw-view-combo-screen";var s=document.createElement("div");return s.className="thm-ele-nav thm-bg3",s.innerHTML=e.innerHTML,s.style.top="".concat(a,"px"),s.style.left="".concat(n,"px"),s.style.width="".concat(r,"px"),s.style.height="".concat(i,"px"),c.appendChild(s),document.body.appendChild(c),this.bigList=s,{screen:c,bigList:s}}},{key:"_ensureSelectionVisible",value:function(){var e=0,t=this.bigList;if(t){var n=t.querySelectorAll("div.item"),a=!0,r=!1,i=void 0;try{for(var c,s=this.keys[Symbol.iterator]();!(a=(c=s.next()).done);a=!0){var o=c.value,u=n[e];if(o===this.selectedKey){var l=t.getBoundingClientRect();t.scrollTop=32*e-l.height/2,this.selectedIndex=e,u.classList.add("thm-bgSL")}else u.classList.remove("thm-bgSL");e++}}catch(d){r=!0,i=d}finally{try{a||null==s.return||s.return()}finally{if(r)throw i}}}}},{key:"_handleKeyboard",value:function(e){switch(e.key){case"ArrowDown":return this.selectedIndex++,this.selectedKey=this.keys[this.selectedIndex%this.keys.length],this._ensureSelectionVisible(),e.preventDefault(),void e.stopPropagation();case"ArrowUp":return this.selectedIndex=(this.selectedIndex+this.keys.length-1)%this.keys.length,this.selectedKey=this.keys[this.selectedIndex],this._ensureSelectionVisible(),e.preventDefault(),void e.stopPropagation();case"Enter":case" ":var t=this.props.onChange;return"function"===typeof t&&t(this.selectedKey),re.a.fire(),e.preventDefault(),void e.stopPropagation()}}},{key:"expand",value:function(){var e=this;if(this.keys.length<3)this._swapItems();else{var t=this.list.current,n=this.button.current;if(t&&n){var a=this._computeDimensions(t,n),r=a.left,i=a.top,c=a.width,s=a.height,o=this._showList(t,n,r,i,c,s),u=o.screen,l=o.bigList;this.selectedKey=this.props.value||"",window.setTimeout(function(){return e._ensureSelectionVisible(l)},10);var d=this._handleKeyboard.bind(this);document.addEventListener("keydown",d,!0),re.a.add(function(){document.body.removeChild(u),document.removeEventListener("keydown",d,!0)}),Object(ae.a)(u).on({tap:function(){re.a.fire()}}),Object(ae.a)(l).on({tap:function(t){if(t&&"undefined"!==typeof t.y){var n=l.scrollTop,a=Math.floor((t.y+n)/32),r=e.keys[a];re.a.fire(),requestAnimationFrame(function(){"function"===typeof e.props.onChange&&e.props.onChange(r)})}}})}}}},{key:"componentDidMount",value:function(){var e=this.ref.current;e&&(this.touchable.element=e)}},{key:"render",value:function(){var e=this.props,t=e.children,n=Object(O.a)(e.label,"").trim(),a=Object(j.a)(e.wide,!1),r=function(e,t){var n=Object(ee.a)(e,[]),a=t.length;for(;n.length<a;)n.push("".concat(n.length));for(var r=0;r<n.length;r++)0===n[r].trim().length&&(n[r]="".concat(r));return t.forEach(function(e,t){var a=e.key;"string"===typeof a?n[t]=a:e.key=n[t]}),n}(e.keys,t),i=Object(O.a)(e.value,r[0]),s=["tfw-view-combo"],o=t.map(function(e){var t=e.key;return c.createElement("div",{className:"item",key:t}," ",e," ")});a&&s.push("wide"),this.keys=r;var u=function(e,t){var n=e.indexOf(t);return Math.max(0,n)}(r,i);return c.createElement("button",{ref:this.ref,className:s.join(" ")},n.length>0?c.createElement(ne.a,{label:n}):null,c.createElement("div",{ref:this.button,className:"button thm-bg3 thm-ele-button"},c.createElement("div",{className:"list-container",style:{transform:"translateY(-".concat(32*u,"px)")}},c.createElement("div",{ref:this.list,className:"tfw-view-combo-list"},o)),c.createElement("div",{className:"icon"},c.createElement($.a,{size:"24px",content:"down"}))))}}]),t}(c.Component);var ce=n(17),se={saveAs:function(e,t){var n=window.URL.createObjectURL(e),a=document.createElement("a");a.style.display="none",a.href=n,a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a),setTimeout(function(){window.URL.revokeObjectURL(n)},5e3)}},oe={extract:function(){var e=Object(i.a)(r.a.mark(function e(t){var n,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.exec("extract",{carecenter:t.carecenter.id,begin:ue(t.dateMin),end:ue(t.dateMax)});case 2:return n=e.sent,a={},Object.values(n.data).forEach(function(e){Object.keys(e).filter(function(e){return"#"===e.charAt(0)}).forEach(function(t){var n=e[t];"undefined"===typeof a[t]&&(a[t]={});var r=a[t];"undefined"===typeof r[n]?r[n]=1:r[n]++})}),e.abrupt("return",le(a));case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()};function ue(e){return Math.floor(.5+.001*e)}function le(e){var t={};return Object.keys(e).forEach(function(n){var a={sum:0,occ:[]};t[n]=a;var r=e[n];Object.keys(r).forEach(function(e){var t=r[e];a.sum+=t,a.occ.push([e,t])}),a.occ.sort(de)}),t}function de(e,t){var n=e[1];return t[1]-n}n(117);var pe=k.a.make(n(116)),fe=["#b37036","#cc7529","#e67717","#ff7700","#765"],he=function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(z.a)(this,Object(V.a)(t).call(this,e))).state={selectedField:""},n.handleClose=n.handleClose.bind(Object(W.a)(Object(W.a)(n))),n}return Object(J.a)(t,e),Object(Y.a)(t,[{key:"handleClose",value:function(){var e=this.props.onClose;if("function"===typeof e)try{e()}catch(t){console.error("Error in handleClose(): "),console.error(t)}}},{key:"componentDidUpdate",value:function(){this.state.dataFromService||(console.log("componentDidUpdate"),this.refresh())}},{key:"componentDidMount",value:function(){console.log("componentDidMount"),this.refresh()}},{key:"refresh",value:function(){var e=Object(i.a)(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.extract(this.props.stat);case 2:t=e.sent,console.info("data=",t),this.setState({dataFromService:t});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"export",value:function(){var e=this.state.dataFromService;if(e){var t=me(e,this.props.structure),n=t.keys,a=t.values,r=["Code du champ\tNom du champ\tValeur\tOccurences"];n.forEach(function(t,n){var i=a[n];e[t].occ.forEach(function(e){var n=Object(G.a)(e,2),a=n[0],c=n[1];r.push("".concat(t,"\t").concat(i,"\t").concat(a,"\t").concat(c))})});se.saveAs(new Blob([r.join("\n")],{type:"text/csv"}),"statistics.xls")}}},{key:"render",value:function(){var e=this,t=this.state.dataFromService,n=null;if(t){var a=me(t,this.props.structure),r=a.keys,i=a.values,s=this.state.selectedField;-1===r.indexOf(s)&&(s=r[0]);var o=t[s];n=o?c.createElement("div",null,c.createElement(ie,{keys:r,onChange:function(t){console.info("[onChange] selectedField=",t),e.setState({selectedField:t})},value:s},i.map(function(e,t){var n=r[t];return c.createElement("div",{key:n},c.createElement("b",null,"".concat(e," ")),c.createElement("small",{className:"grey"},n))})),c.createElement("br",null),c.createElement("center",null,c.createElement(H,{colors:fe,values:be(o)})),c.createElement("div",null,o.occ.map(function(e,t){var n=Object(G.a)(e,2),a=n[0],r=n[1],i=Math.min(fe.length-1,t),s=fe[i];return c.createElement(X.a,{key:t,justifyContent:"space-between",alignItems:"center",dir:"row",classes:t%2?"thm-bg1":"thm-bg2"},c.createElement(X.a,{justifyContent:"space-between",wide:!1,dir:"row",alignItems:"center"},c.createElement("div",{className:"bullet",style:{background:s}}),c.createElement("span",null,a)),c.createElement("div",null,c.createElement("b",null,r)))})),c.createElement(ce.a,{wide:!0,icon:"export",label:pe("export"),onClick:function(){return e.export()}})):c.createElement("div",null,pe("no-data"))}else n=c.createElement(X.a,null,c.createElement($.a,{content:"wait",animate:!0}),c.createElement("div",null,"Chargement en cours..."));var u=this.props.stat;return c.createElement("div",{className:"presentational-stat thm-ele-card thm-bg1"},c.createElement("div",{className:"thm-bgPD"},"".concat(u.carecenter.name,", du ").concat(ve(u.dateMin)," au ").concat(ve(u.dateMax))),c.createElement("div",null,n),c.createElement("hr",null),c.createElement(X.a,{dir:"row",justifyContent:"flex-end"},c.createElement(ce.a,{onClick:this.handleClose,icon:"close",label:pe("close"),flat:!0})))}}]),t}(c.Component);function me(e,t){var n=Object.keys(e),a=n.map(function(e){return E.getFieldCaption(e,t)}),r=n.map(function(e,t){return[e,a[t]]});return r.sort(function(e,t){var n=e[1],a=t[1];return n<a?-1:n>a?1:0}),{keys:r.map(function(e){return e[0]}),values:r.map(function(e){return e[1]})}}function ve(e){var t=new Date(e);return"".concat(t.getDate(),"-").concat(1+t.getMonth(),"-").concat(t.getFullYear())}function be(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=e.sum,a=e.occ,r=[],i=0,c=0;c<Math.min(t,a.length);c++){var s=Object(G.a)(a[c],2)[1];r.push(s),i+=s}return n>i&&r.push(n-i),r}n(118);var ge=function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(z.a)(this,Object(V.a)(t).call(this,e))).refMenu=s.a.createRef(),n.handleShowChange=n.handleShowChange.bind(Object(W.a)(Object(W.a)(n))),n}return Object(J.a)(t,e),Object(Y.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.refMenu.current;t&&Object(ae.a)(t).on({swipeleft:function(){var t=e.props.onShowChange;"function"===typeof t&&t(!1)}})}},{key:"handleShowChange",value:function(){var e=this.props.onShowChange;"function"===typeof e&&e(!Object(j.a)(this.props.show,window.innerWidth>480))}},{key:"render",value:function(){var e=Object(j.a)(this.props.show,window.innerWidth>480),t=Object(O.a)(this.props.head,""),n=["tfw-layout-sidemenu thm-bg0"].concat(Object(K.a)(this.props.classes));return e&&n.push("show"),s.a.createElement("div",{className:n.join(" ")},s.a.createElement("div",{className:"body thm-bg0"},this.props.body),s.a.createElement("div",{className:"menu thm-ele-nav thm-bg1",ref:this.refMenu},s.a.createElement("header",{className:"thm-ele-nav thm-bgPD"},t),s.a.createElement("menu",null," ",this.props.menu," ")),s.a.createElement("div",{className:"icon thm-bgPD"},s.a.createElement(ce.a,{icon:"menu",flat:!0,onClick:this.handleShowChange})))}}]),t}(s.a.Component),ye=n(30),Ae=n(15),ke=k.a.make(n(119)),Ee=new(function(){function e(){Object(A.a)(this,e)}return Object(Y.a)(e,[{key:"genderValue",value:function(e){switch(e.trim().toUpperCase()){case"M":return ke("gender-male");case"F":return ke("gender-female");default:return ke("gender-undefined")}}},{key:"buttonPatient",get:function(){return ke("button-patient")}},{key:"buttonReports",get:function(){return ke("button-reports")}},{key:"buttonStats",get:function(){return ke("button-stats")}},{key:"buttonStruct",get:function(){return ke("button-struct")}},{key:"cancel",get:function(){return ke("cancel")}},{key:"close",get:function(){return ke("close")}},{key:"code",get:function(){return ke("code")}},{key:"consultations",get:function(){return ke("consultations")}},{key:"consultationsCount",get:function(){return ke("consultations-count")}},{key:"countingReports",get:function(){return ke("counting-reports")}},{key:"createStat",get:function(){return ke("create-stat")}},{key:"createStatConsultation",get:function(){return ke("create-stat-consultation")}},{key:"createStatPatient",get:function(){return ke("create-stat-patient")}},{key:"dateMin",get:function(){return ke("date-min")}},{key:"dateMax",get:function(){return ke("date-max")}},{key:"executeQuery",get:function(){return ke("execute-query")}},{key:"extractions",get:function(){return ke("extractions")}},{key:"filter",get:function(){return ke("filter")}},{key:"firstName",get:function(){return ke("firstname")}},{key:"gender",get:function(){return ke("gender")}},{key:"generatingReport",get:function(){return ke("generating-report")}},{key:"hintReportTemplates",get:function(){return ke("hint-report-templates")}},{key:"identifier",get:function(){return ke("identifier")}},{key:"lastName",get:function(){return ke("lastname")}},{key:"loading",get:function(){return ke("loading")}},{key:"loadingReport",get:function(){return ke("loading-report")}},{key:"logout",get:function(){return ke("logout")}},{key:"patients",get:function(){return ke("patients")}},{key:"patientsCount",get:function(){return ke("patients-count")}},{key:"queryInProgress",get:function(){return ke("query-in-progress")}},{key:"report",get:function(){return ke("report")}},{key:"secondName",get:function(){return ke("secondname")}},{key:"size",get:function(){return ke("size")}},{key:"statType",get:function(){return ke("stat-type")}},{key:"struct",get:function(){return ke("struct")}},{key:"welcome",get:function(){return ke("welcome")}}]),e}()),Ce=(n(120),Ae.a.View.Button),Oe=function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(z.a)(this,Object(V.a)(t).call(this,e))).handleStatClick=function(){n.setCurrent(),F.dispatch(F.Page.page("stats"))},n.handleStructClick=function(){n.setCurrent(),F.dispatch(F.Page.page("struct"))},n.handleReportClick=function(){n.setCurrent(),F.dispatch(F.Page.page("reports"))},n.handlePatientClick=function(){n.setCurrent(),F.dispatch(F.Page.page("patients"))},n.handleStatClick=n.handleStatClick.bind(Object(W.a)(Object(W.a)(n))),n}return Object(J.a)(t,e),Object(Y.a)(t,[{key:"setCurrent",value:function(){var e=this.props,t=e.carecenter,n=e.organization;F.dispatch(F.Current.set({carecenter:t,organization:n}))}},{key:"render",value:function(){var e=this.props.carecenter,t=this.props.structures.find(function(t){return t.id===e.structureId});return c.createElement("div",{className:"presentational-carecenter-header"},c.createElement("div",null,c.createElement("div",{className:"name"},e.name),c.createElement("div",{className:"prop"},c.createElement("div",null,Ee.code),c.createElement("div",null,e.id,"-",e.code)),c.createElement("div",{className:"prop"},c.createElement("div",null,Ee.patientsCount),c.createElement("div",null,e.patientsCount)),c.createElement("div",{className:"prop"},c.createElement("div",null,Ee.consultationsCount),c.createElement("div",null,e.consultationsCount)),c.createElement("div",{className:"prop"},c.createElement("div",null,Ee.struct),c.createElement("div",null,t?t.name:"..."))),c.createElement("div",{className:"buttons"},c.createElement(Ce,{icon:"stat",label:Ee.buttonStats,small:!0,onClick:this.handleStatClick}),c.createElement(Ce,{icon:"report",label:Ee.buttonReports,small:!0,onClick:this.handleReportClick}),c.createElement("br",null),c.createElement(Ce,{icon:"user",label:Ee.buttonPatient,small:!0,onClick:this.handlePatientClick}),c.createElement("br",null),c.createElement(Ce,{icon:"sitemap",label:Ee.buttonStruct,small:!0,onClick:this.handleStructClick}),c.createElement("br",null)))}}]),t}(c.Component),je=(n(121),function(e){function t(){return Object(A.a)(this,t),Object(z.a)(this,Object(V.a)(t).apply(this,arguments))}return Object(J.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"webSoins-Wait"},s.a.createElement($.a,{content:"wait",animate:!0}),s.a.createElement("div",null,this.props.label||Ee.loading))}}]),t}(s.a.Component)),we=(n(122),Ae.a.View.Button),xe=(Ae.a.Intl.make(n(123)),function(e){function t(){var e,n;Object(A.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(z.a)(this,(e=Object(V.a)(t)).call.apply(e,[this].concat(r)))).state={},n}return Object(J.a)(t,e),Object(Y.a)(t,[{key:"renderCareCenterHeader",value:function(e){var t=this.props,n=t.carecenters,a=t.structures,r=n.filter(function(t){return t.organizationId===e.id});return 0===r.length?s.a.createElement(je,null):r.map(function(t){return s.a.createElement(Oe,{key:t.id,carecenter:t,organization:e,structures:a})})}},{key:"render",value:function(){var e=this,t=this.props.organizations,n=["view-MainPanel"].concat(Object(ye.a)(Ae.a.Converter.StringArray(this.props.className,[])));return s.a.createElement("div",{className:n.join(" ")},s.a.createElement("ul",null,t.map(function(t){return s.a.createElement("li",{key:t.id},t.name,s.a.createElement("ul",null,e.renderCareCenterHeader(t)))})),s.a.createElement("br",null),s.a.createElement("hr",null),s.a.createElement("br",null),s.a.createElement(we,{label:Ee.logout,icon:"logout",wide:!0,onClick:function(){return window.location.reload()}}))}}]),t}(s.a.Component)),Se=(n(124),Ae.a.View.Icon),Ne=function(e){function t(){var e,n;Object(A.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(z.a)(this,(e=Object(V.a)(t)).call.apply(e,[this].concat(r)))).state={},n}return Object(J.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){var e=this.props,t=e.organization,n=e.carecenter,a=e.label,r=e.icon,i=e.children,c=["view-PageHeader","thm-bg0","thm-ele-nav"].concat(Object(ye.a)(Ae.a.Converter.StringArray(this.props.className,[])));return s.a.createElement("div",{className:c.join(" ")},s.a.createElement("header",{className:"thm-bgPD"},s.a.createElement("div",{className:"thm-bgPL"},r&&s.a.createElement(Se,{content:r}),s.a.createElement("div",{className:"label"},a)),s.a.createElement("div",null,t.name," / ",n.name)),s.a.createElement("section",null,i))}}]),t}(s.a.Component);var Ie=Object(l.b)(function(e){return{organization:e.current.organization,carecenter:e.current.carecenter}},function(e){return{}})(Ne),Fe=Ae.a.WebService,Te=Ae.a.Converter.String,Me=Ae.a.Converter.Integer,Qe=[" ","-","'"],Re={list:function(){var e=Object(i.a)(r.a.mark(function e(t){var n,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fe.exec("carecenter.listPatients",t);case 2:return n=e.sent,(a=n.list.map(function(e){return{id:Me(e.id),key:Te(e.key,""),firstName:Pe(Te(e["#PATIENT-FIRSTNAME"],"").trim(),Qe),secondName:Pe(Te(e["#PATIENT-SECONDNAME"],"").trim(),Qe),lastName:Te(e["#PATIENT-LASTNAME"],"").trim().toUpperCase(),country:Te(e["#PATIENT-COUNTRY"],""),sex:De(e["#PATIENT-GENDER"]),size:Me(e["#PATIENT-SIZE"])}})).sort(function(e,t){var n=e.lastName.trim().toUpperCase(),a=t.lastName.trim().toUpperCase();if(n<a)return-1;if(n>a)return 1;var r="".concat(e.firstName," / ").concat(e.secondName).trim().toUpperCase(),i="".concat(t.firstName," / ").concat(e.secondName).trim().toUpperCase();return r<i?-1:r>i?1:0}),e.abrupt("return",a);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),consultations:function(){var e=Object(i.a)(r.a.mark(function e(t){var n,a,i,c,s,o,u,l,d,p,f,h,m,v,b;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fe.exec("patient.listConsultations",t);case 2:for(n=e.sent,a=[],i={id:0,date:new Date,fields:{}},c=0,s=!0,o=!1,u=void 0,e.prev=9,l=n[Symbol.iterator]();!(s=(d=l.next()).done);s=!0)p=d.value,f=Object(G.a)(p,4),h=f[0],m=f[1],v=f[2],b=f[3],c!==h&&(i={id:h,date:new Date(1e3*m),fields:{}},a.push(i),c=h),i.fields[v]=b;e.next=17;break;case 13:e.prev=13,e.t0=e.catch(9),o=!0,u=e.t0;case 17:e.prev=17,e.prev=18,s||null==l.return||l.return();case 20:if(e.prev=20,!o){e.next=23;break}throw u;case 23:return e.finish(20);case 24:return e.finish(17);case 25:return e.abrupt("return",a);case 26:case"end":return e.stop()}},e,null,[[9,13,17,25],[18,,20,24]])}));return function(t){return e.apply(this,arguments)}}()};function De(e){switch(Te(e,"")){case"#H":return"M";case"#F":return"F";default:return"?"}}function Pe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(0===t.length){var n=e.trim().toLowerCase();return"".concat(n.charAt(0).toUpperCase()).concat(n.substr(1))}var a=t.slice(1),r=t[0];return e.trim().split(r).map(function(e){return Pe(e,a)}).join(r)}n(125);var Be=Ae.a.View.Touchable,Le=function(e){function t(){var e,n;Object(A.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(z.a)(this,(e=Object(V.a)(t)).call.apply(e,[this].concat(r)))).state={},n}return Object(J.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){var e=this.props,t=e.patient,n=e.onClick,a=["view-PatientButton","thm-bg2"].concat(Object(ye.a)(Ae.a.Converter.StringArray(this.props.className,[])));return s.a.createElement(Be,{className:a.join(" "),onClick:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return n(t)})},s.a.createElement("div",{className:"lastName"},t.lastName),s.a.createElement("div",{className:"firstName"},t.firstName),s.a.createElement("div",{className:"secondName"},t.secondName))}}]),t}(s.a.Component),Ue=(n(126),function(e){function t(){var e,n;Object(A.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(z.a)(this,(e=Object(V.a)(t)).call.apply(e,[this].concat(r)))).state={},n}return Object(J.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){var e=["view-ConsultationViewer",Ae.a.Converter.String(this.props.className,"")],t=this.props,n=t.consultationData,a=t.structureData;return console.info("consultationData=",n),s.a.createElement("div",{className:e.join(" ")},s.a.createElement("ul",null,Object.keys(n.fields).map(function(e){var t=n.fields[e],r=E.getFieldCaption(e,a);return s.a.createElement("li",{key:"field-".concat(e)},s.a.createElement("span",{className:"key"},r),s.a.createElement("span",null,": "),s.a.createElement("span",{className:"val"},t))})))}}]),t}(s.a.Component)),qe=(n(127),function(e){function t(){var e,n;Object(A.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(z.a)(this,(e=Object(V.a)(t)).call.apply(e,[this].concat(r)))).state={},n}return Object(J.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){var e=this.props.children;if(!e)return null;if("string"===typeof e&&0===e.trim().length)return null;var t=["view-Info",Ae.a.Converter.String(this.props.className,"")];return s.a.createElement("div",{className:t.join(" ")},s.a.createElement("div",{className:"label"},this.props.label),s.a.createElement("div",null,e))}}]),t}(s.a.Component)),Ye=n(128),ze=n.n(Ye),Ve=(n(129),Ae.a.View.Button,Ae.a.View.Expand),Je=Ae.a.View.Input,Ge=Ae.a.View.List,We=function(e){function t(){var e,n;Object(A.a)(this,t);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(n=Object(z.a)(this,(e=Object(V.a)(t)).call.apply(e,[this].concat(c)))).state={patients:[],filter:"daline",page:"list",consultations:[]},n.handlePatientClick=function(){var e=Object(i.a)(r.a.mark(function e(t){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({patient:t,consultations:[]}),e.next=3,Re.consultations(t.id);case 3:a=e.sent,n.setState({consultations:a});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.renderPatient=function(e){return s.a.createElement(Le,{patient:e,onClick:n.handlePatientClick})},n.renderConsulation=function(e,t){var n=E.getCurrentStructure();return n?s.a.createElement(Ve,{key:"consultation-".concat(e.id),value:0===t,label:e.date.toLocaleString()},s.a.createElement(Ue,{consultationData:e,structureData:n})):null},n}return Object(J.a)(t,e),Object(Y.a)(t,[{key:"componentDidMount",value:function(){var e=Object(i.a)(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Re.list(this.props.carecenter.id);case 2:t=e.sent,this.setState({patients:t});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.patients,a=t.patient,r=t.filter,i=t.consultations,c=["view-pages-Patients"].concat(Object(ye.a)(Ae.a.Converter.StringArray(this.props.className,[]))),o=n.filter(function(e){var t=r.trim().toLowerCase();return 0===t.length||-1!=="".concat(e.lastName.toLowerCase()," ").concat(e.firstName.toLowerCase()," ").concat(e.secondName.toLowerCase()).indexOf(t)});return s.a.createElement("div",{className:c.join(" ")},s.a.createElement(Ie,{key:"list",label:Ee.buttonPatient,icon:"user"},s.a.createElement("div",{className:"view-pages-Patients-list"},s.a.createElement("div",{className:"list"},s.a.createElement(Je,{wide:!0,label:"".concat(Ee.filter," ").concat(o.length," / ").concat(n.length),value:r,onChange:function(t){return e.setState({filter:t})}}),s.a.createElement(Ge,{className:"patients-list",placeholder:ze.a,itemHeight:48,items:o,mapper:this.renderPatient})),a&&s.a.createElement("div",{className:"detail thm-bg1"},s.a.createElement("header",{className:"thm-bgPD"},s.a.createElement(qe,{label:Ee.lastName},a.lastName),s.a.createElement(qe,{label:Ee.firstName},a.firstName),s.a.createElement(qe,{label:Ee.secondName},a.secondName),s.a.createElement(qe,{label:Ee.gender},Ee.genderValue(a.sex)),s.a.createElement(qe,{label:Ee.size},"".concat(a.size," cm")),s.a.createElement(qe,{label:Ee.identifier},a.key)),s.a.createElement("section",null,i.map(this.renderConsulation))))))}}]),t}(s.a.Component);var Ke=Object(l.b)(function(e){return{carecenter:e.current.carecenter}},function(e){return{}})(We),Ze=(n(130),Ae.a.View.Icon),_e=Ae.a.View.Touchable,He=new Ae.a.Storage.PrefixedLocalStorage("web-soins/view/section"),Xe=Ae.a.Converter.String,$e=Ae.a.Converter.Boolean,et=function(e){function t(){var e,n;Object(A.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(z.a)(this,(e=Object(V.a)(t)).call.apply(e,[this].concat(r)))).state={expanded:n.props.storage?He.get(n.props.storage,$e(n.props.default,!0)):$e(n.props.default,!0)},n.handleClick=function(){var e=!n.state.expanded,t=n.props.storage;t&&He.set(t,e),n.setState({expanded:e})},n}return Object(J.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){var e=this.props,t=e.label,n=e.children,a=e.background,r=["view-Section",Xe(a,"thm-bg1")].concat(Object(ye.a)(Ae.a.Converter.StringArray(this.props.className,[]))),i=this.state.expanded;return i&&r.push("expanded"),s.a.createElement("div",{className:r.join(" ")},s.a.createElement(_e,{className:"header thm-bgPL thm-ele-button",onClick:this.handleClick},s.a.createElement(Ze,{content:"tri-right",rotate:i?90:0}),s.a.createElement("div",null,t)),s.a.createElement("div",{className:"body"},n))}}]),t}(s.a.Component),tt=1,nt=2,at=3,rt=4,it=5,ct=6,st=7,ot=8,ut=["???","OBJ_OPEN","OBJ_CLOSE","ARR_OPEN","ARR_CLOSE","STRING","NUMBER","SPECIAL","COLON"],lt={OBJ_OPEN:tt,OBJ_CLOSE:nt,ARR_OPEN:at,ARR_CLOSE:rt,STRING:it,NUMBER:ct,SPECIAL:st,COLON:ot,tokenize:function(e){return(new mt).tokenize(e)},getTypeName:function(e){return ut[e]}},dt=/^-?(\.[0-9]+|[0-9]+(\.[0-9]+)?)([eE]-?[0-9]+)?$/,pt=/^-?0x[0-9a-f]+$/i,ft=/^-?0o[0-7]+$/i,ht=/^-?0b[01]+$/i,mt=function(){function e(){var t=this;Object(A.a)(this,e),this.eaters=void 0,this.source="",this.index=0,this.end=0,this.tokens=[],this.eatBlanks=function(){for(;-1!==" \t\n\r".indexOf(t.peek()||"?");)t.index++},this.eatSymbol=function(){var e=null;switch(t.peek()){case"{":e=tt;break;case"}":e=nt;break;case"[":e=at;break;case"]":e=rt;break;case":":e=ot;break;case",":return void t.index++}e&&(t.addToken(e),t.index++)},this.eatComment=function(){if("/"===t.peek()){t.index++;var e=t.next();if("/"==e){var n=t.source.indexOf("\n",t.index);t.index=-1===n?t.end:n+1}else if("*"==e){var a=t.source.indexOf("*/",t.index);t.index=-1===a?t.end:a+1}else t.fail("'/' looks like a comment, but it is not!")}},this.eatString=function(){var e=t.index,n=t.peek();if('"'===n||"'"===n){t.index++;for(var a=!1,r="";!t.eos();){var i=t.next();if(a)a=!1,"n"===i?i="\n":"r"===i?i="\r":"t"===i&&(i="\t"),r+=i;else if("\\"===i)a=!0;else{if(i===n)return void t.addToken(it,e,r);r+=i}}t.index=e,t.fail("Missing en of string")}},this.eatIdentifier=function(){var e=t.index,n=t.peek()||"?";if(-1===" \t\n\r,:[]{}/".indexOf(n)){t.index++;for(var a=n;!t.eos()&&(n=t.peek()||"?",-1===" \t\n\r,:[]{}/".indexOf(n));)a+=n,t.index++;if(dt.test(a))t.addToken(ct,e,parseFloat(a));else if(pt.test(a))t.addToken(ct,e,parseInt(a,16));else if(ft.test(a))a="-"==a.charAt(0)?"-"+a.substr(3):a.substr(2),t.addToken(ct,e,parseInt(a,8));else if(ht.test(a))a="-"==a.charAt(0)?"-"+a.substr(3):a.substr(2),t.addToken(ct,e,parseInt(a,2));else{var r=st;"null"===a?a=null:"undefined"===a?a=void 0:"true"===a?a=!0:"false"===a?a=!1:r=it,t.addToken(r,e,a)}}},this.eaters=[this.eatBlanks,this.eatSymbol,this.eatComment,this.eatString,this.eatIdentifier]}return Object(Y.a)(e,[{key:"tokenize",value:function(e){for(this.source=e,this.end=e.length,this.index=0,this.tokens=[];this.index<this.end;){for(var t=this.index,n=0;n<this.eaters.length;n++){if((0,this.eaters[n])(),this.index!==t)break}this.index===t&&this.fail("Unexpected token at pos ".concat(this.index,":\n").concat(e.substr(this.index,80)))}return this.tokens}},{key:"fail",value:function(e){throw"undefined"===typeof e&&(e="Invalid char at "+this.index+"!"),{index:this.index,source:this.source,message:e}}},{key:"eos",value:function(){return this.index>=this.end}},{key:"peek",value:function(){return this.eos()?null:this.source[this.index]}},{key:"next",value:function(){return this.eos()?null:this.source[this.index++]}},{key:"back",value:function(){this.index>0&&this.index--}},{key:"addToken",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";-1===t&&(t=this.index),this.tokens.push({type:e,index:t,value:n})}}]),e}(),vt={parse:bt,isValid:function(e){try{return bt(e),!0}catch(t){return!1}}};function bt(e){try{var t=lt.tokenize(e);return new gt(t).parse()}catch(n){throw n.type,n}}var gt=function(){function e(t){Object(A.a)(this,e),this.tokens=t,this.index=0}return Object(Y.a)(e,[{key:"peek",value:function(){return this.tokens[this.index]}},{key:"next",value:function(){return this.tokens[this.index++]}},{key:"back",value:function(){this.index=Math.max(0,this.index-1)}},{key:"parse",value:function(){var e=this.next();switch(e.type){case lt.OBJ_OPEN:return this.parseObject();case lt.ARR_OPEN:return this.parseArray();case lt.STRING:case lt.NUMBER:case lt.SPECIAL:return e.value}throw this.back(),this.fail(e)}},{key:"parseArray",value:function(){for(var e,t=this.index,n=[];void 0!==(e=this.peek());){if(e.type===lt.ARR_CLOSE)return this.next(),n;n.push(this.parse())}throw this.fail("Opening braket at position ".concat(t," has no corresponding closing one!"),t)}},{key:"parseObject",value:function(){for(var e,t=this.index,n={},a=0;void 0!==(e=this.peek());){if(e.type===lt.OBJ_CLOSE)return this.next(),n;var r=this.parse();if((e=this.peek()).type===lt.OBJ_CLOSE)return n[a++]=r,this.next(),n;if(e.type===lt.COLON){this.next();var i=this.parse();n[r]=i}else n[a++]=r}throw this.fail("Opening brace at position "+t+" has no corresponding closing one!",t)}},{key:"fail",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return t<0&&(t=this.index),"string"===typeof e?{message:e,index:t}:{index:e.index,message:"Unexpected token "+lt.getTypeName(e.type)+" at position "+e.index+"!"}}}]),e}(),yt=n(13),At={padNumber:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0",a="".concat(e);a.length<t;)a=n.charAt(0)+a;return a},clamp:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e<t?t:e>n?n:e},loadTextFromFile:function(e){return new Promise(function(t,n){var a=new FileReader;a.onload=function(e){var n="".concat(e.target.result);t(n)},a.onerror=function(e){n(e)},a.readAsText(e)})},loadTextFromURL:function(e){return new Promise(function(t,n){fetch(e).then(function(e){return e.ok||n("Error ".concat(e.status,": ").concat(e.statusText,"!")),e.text()}).then(t).catch(n)})},loadJsonFromURL:function(e){return new Promise(function(t,n){fetch(e).then(function(e){return e.json()}).then(t).catch(n)})}},kt=n(131),Et=n.n(kt),Ct=(n(132),function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(z.a)(this,Object(V.a)(t).call(this,e))).refInput=s.a.createRef(),n.handleClick=n.handleClick.bind(Object(W.a)(Object(W.a)(n))),n.handleFileChange=n.handleFileChange.bind(Object(W.a)(Object(W.a)(n))),n}return Object(J.a)(t,e),Object(Y.a)(t,[{key:"handleFileChange",value:function(e){if(e.target){var t=this.props.onClick;if("function"===typeof t)try{var n=e.target.files;if(!n)return;t(n)}catch(a){console.error("Error in handleFileChange(): "),console.error(a)}}}},{key:"handleClick",value:function(){var e=this.refInput.current;e&&e.click()}},{key:"render",value:function(){var e=this.props,t=["tfw-view-InputFile"];return!0===e.wide&&t.push("wide"),s.a.createElement("div",{className:t.join(" ")},s.a.createElement(ce.a,{label:e.label,icon:e.icon,wide:e.wide,wait:e.wait,flat:e.flat,small:e.small,warning:e.warning,enabled:e.enabled,classes:e.classes,onClick:this.handleClick}),s.a.createElement("input",{ref:this.refInput,type:"file",accept:e.accept,multiple:!0===e.multiple,onChange:this.handleFileChange}))}}],[{key:"readFileAsText",value:function(e){return new Promise(function(t,n){var a=new FileReader;a.onload=function(e){var n=e.target.result;t(n)},a.onerror=function(e){n(e)},a.readAsText(e)})}}]),t}(s.a.Component)),Ot=(n(133),function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(z.a)(this,Object(V.a)(t).call(this,e))).touchable=void 0,n.ref=c.createRef(),n.handleClick=n.handleClick.bind(Object(W.a)(Object(W.a)(n))),n.touchable=new te.a({onTap:n.handleClick,color:e.color}),n}return Object(J.a)(t,e),Object(Y.a)(t,[{key:"componentDidMount",value:function(){var e=this.ref.current;e&&(this.touchable.element=e)}},{key:"handleClick",value:function(){var e=this.props.onClick;"function"===typeof e&&e()}},{key:"render",value:function(){var e=this.props,t=Object(j.a)(e.enabled,!0),n=["tfw-view-touchable"].concat(Object(K.a)(e.classNames));return t&&n.push("enabled"),c.createElement("div",{ref:this.ref,tabIndex:0,className:n.join(" "),title:e.title},e.children)}}]),t}(c.Component)),jt=(n(134),function(e){function t(){var e,n;Object(A.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(z.a)(this,(e=Object(V.a)(t)).call.apply(e,[this].concat(r)))).handleValueChange=function(){n.props.onValueChange(!n.props.value)},n}return Object(J.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){var e=["tfw-view-Expand"];return this.props.value&&e.push("expand"),s.a.createElement("div",{className:e.join(" ")},s.a.createElement(Ot,{classNames:["head"],onClick:this.handleValueChange},s.a.createElement("div",{className:"icons"},s.a.createElement($.a,{content:"plus-o",size:24}),s.a.createElement($.a,{content:"minus-o",size:24})),s.a.createElement("div",null,this.props.label)),s.a.createElement("div",{className:"body"},this.props.children))}}]),t}(s.a.Component)),wt=n(38),xt=(n(42),n(135),function(e,t){var n=0;return function(){for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];n&&window.clearTimeout(n),n=window.setTimeout(function(){n=0,e.apply(void 0,r)},t)}}),St=k.a.make(n(136)),Nt=function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(z.a)(this,Object(V.a)(t).call(this,e))).inputDay=void 0,n.inputMonth=void 0,n.inputYear=void 0,n.state={},n.handleChange=xt(n.handleChange.bind(Object(W.a)(Object(W.a)(n))),300),n.inputDay=c.createRef(),n.inputMonth=c.createRef(),n.inputYear=c.createRef(),n}return Object(J.a)(t,e),Object(Y.a)(t,[{key:"handleChange",value:function(){try{var e=parseInt(this.inputDay.current.value);if(isNaN(e))throw"day is not a number!";var t=parseInt(this.inputMonth.current.value);if(isNaN(t))throw"month is not a number!";var n=parseInt(this.inputYear.current.value);if(isNaN(n))throw"year is not a number!";var a=new Date(n,t,e);if(a.getFullYear()!==n||a.getMonth()!==t||a.getDate()!==e)throw"Invalid date!";this.setState({error:""});var r=this.props.onChange;if("function"!==typeof r)return;r(a.getTime())}catch(i){this.setState({error:St("invalid")})}}},{key:"render",value:function(){var e=this.props,t=Object(O.a)(e.label,""),n=Object(Z.a)(e.value,0),a=Object(j.a)(e.wide,!1),r=Object(O.a)(this.state.error,""),i=new Date(n),s="tfw-view-input-".concat(It++),o=["tfw-view-input-date","thm-ele-button"];a&&o.push("wide");var u=r.length>0?c.createElement("div",{className:"thm-bgSD error"},r):t?c.createElement("label",{htmlFor:s,className:"thm-bgPD"},t):null;return c.createElement("div",{className:o.join(" ")},u,c.createElement("div",{className:"inputs"},c.createElement("input",{ref:this.inputDay,className:"day",type:"number",maxLength:"2",min:"1",max:"31",id:s,size:"2",onChange:this.handleChange,defaultValue:i.getDate()}),c.createElement("select",{ref:this.inputMonth,onChange:this.handleChange,defaultValue:i.getMonth()},[0,1,2,3,4,5,6,7,8,9,10,11].map(function(e){return c.createElement("option",{key:e,value:e},St("month-".concat(e)))})),c.createElement("input",{ref:this.inputYear,className:"year",type:"number",maxLength:"4",size:"4",onChange:this.handleChange,defaultValue:i.getFullYear()})))}}]),t}(c.Component),It=0;var Ft=n(21),Tt=(n(137),function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(z.a)(this,Object(V.a)(t).call(this,e))).setValue=function(e,t){var a=Object(d.a)({},n.state.values,Object(h.a)({},e,t));Ft.a.local.set("web-soins/form-field/values",a),n.setState({values:a},function(){console.info("key, val, values=",e,t,a)})},n.renderField=function(e){var t=e.id,a=e.caption,r=e.children;return"#"===t.charAt(0)?n.renderTypedField(e,n.props.types):s.a.createElement(jt,{key:t,label:a,value:n.state.values[t],onValueChange:function(e){return n.setValue(t,e)}},s.a.createElement("div",null,Object.values(r).map(n.renderField)))},n.state={values:Ft.a.local.get("web-soins/form-field/values",{})},n}return Object(J.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"FormField"},this.renderField(this.props.field))}},{key:"renderTypedField",value:function(e,t){var n=this,a=e.id,r=e.caption,i=e.tags,c=t[e.type||"?"];if(!c){if(Array.isArray(i)){if(i.indexOf("@BOOL"))return s.a.createElement(wt.a,{key:a,label:"".concat(r," (").concat(a,")"),value:this.state.values[a],onChange:function(e){return n.setValue(a,e)}});if(i.indexOf("@DATE"))return s.a.createElement(Nt,{key:a,label:"".concat(r," (").concat(a,")"),value:this.state.values[a],onChange:function(e){return n.setValue(a,e)}})}return s.a.createElement("pre",{key:a,className:"error"},JSON.stringify(e,null,"  ")+"\nTAGS: "+JSON.stringify(i))}return s.a.createElement(ie,{key:a,label:"".concat(r," (").concat(a,")"),value:this.state.values[a],onChange:function(e){return n.setValue(a,e)}},Object.values(c.children).map(function(e){return s.a.createElement("div",{key:e.id},e.caption," ",s.a.createElement("em",null,"(",e.id,")"))}))}}]),t}(s.a.Component)),Mt=(n(138),function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(z.a)(this,Object(V.a)(t).call(this,e))).handleQueryChange=function(e){var t=e.target;if(t){var a=t.value,r=vt.isValid(a);n.setState({query:a,valid:r})}},n.handleExecuteClick=function(){var e=n.state,t=e.query,a=e.valid,r=e.dateMin,i=e.dateMax;a&&(Ft.a.local.set("web-soins/container-query/query",t),(0,n.props.onQueryClick)(vt.parse(t),r,i))},n.handleDateMinChange=function(e){n.setState({dateMin:e})},n.handleDateMaxChange=function(e){n.setState({dateMax:e})},n.state={dateMin:Ft.a.local.get("web-soins/container-query/dateMin",Qt()),dateMax:Ft.a.local.get("web-soins/container-query/dateMax",Date.now()),valid:!0,query:Ft.a.local.get("web-soins/container-query/query","[\n    OR\n    [= #VIH #POSITIVE]\n    [= #DIAGNOSIS-VIH #POSITIVE]\n]")},n}return Object(J.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){var e=this.state,t=e.query,n=e.valid,a=e.dateMin,r=e.dateMax;return s.a.createElement("div",{className:["presentational-ConsultationQuery"].join(" ")},s.a.createElement(X.a,null,s.a.createElement("div",null,s.a.createElement(Nt,{label:Ee.dateMin(),onChange:this.handleDateMinChange,value:a})),s.a.createElement("div",null,s.a.createElement(Nt,{label:Ee.dateMax(),onChange:this.handleDateMaxChange,value:r}))),s.a.createElement("label",null,Ee.filter()),s.a.createElement("br",null),s.a.createElement("textarea",{className:n?"valid":"invalid",rows:15,onChange:this.handleQueryChange},t),s.a.createElement("br",null),s.a.createElement(ce.a,{icon:"play",label:Ee.executeQuery(),enabled:n,onClick:this.handleExecuteClick}))}}]),t}(s.a.Component));function Qt(){var e=new Date;return new Date(e.getFullYear()-1,0,1).valueOf()}var Rt={getConsultationIds:function(e){return Dt.apply(this,arguments)},getConsultationsFields:function(e){return Pt.apply(this,arguments)}};function Dt(){return(Dt=Object(i.a)(r.a.mark(function e(t){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.exec("query.consultation",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Pt(){return(Pt=Object(i.a)(r.a.mark(function e(t){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.exec("consultation.list",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}n(139);var Bt=function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(z.a)(this,Object(V.a)(t).call(this,e))).handleFilesChange=function(e){n.props.onFilesChange(e)},n.handleQueryClick=function(){var e=Object(i.a)(r.a.mark(function e(t,a,i){var c,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.info("filter=",t),console.info("minDate=",a),console.info("maxDate=",i),e.next=5,yt.a.wait(Ee("query-in-progress"),n.queryConsultations(t,a,i));case 5:c=e.sent,s=new Blob([c],{type:"text/csv;charset=utf-8"}),Et()(s,"consultations.".concat(Lt(a/1e3),".").concat(Lt(i/1e3),".csv"));case 8:case"end":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}(),n.state={forms:{},types:{}},n}return Object(J.a)(t,e),Object(Y.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.carecenter,t=F.store.getState().structures.find(function(t){return t.id===e});t&&this.setState({forms:t.forms,types:t.types})}},{key:"queryConsultations",value:function(){var e=Object(i.a)(r.a.mark(function e(t,n,a){var i,c,s,o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rt.getConsultationIds({filter:t,minDate:n,maxDate:a});case 2:return i=e.sent,e.next=5,Rt.getConsultationsFields(i);case 5:return c=e.sent,s='"Patient","Consultation Date ",'.concat(c.fields.map(function(e){return'"'.concat(e,'"')}).join(",")),o=Object.keys(c.patients).map(function(e){return c.patients[e].map(function(t){return(n=JSON.stringify([e,Lt(t[0])].concat(Object(ye.a)(t.slice(1))))).substr(1,n.length-2);var n}).join("\n")}).join("\n"),e.abrupt("return","".concat(s,"\n").concat(o));case 9:case"end":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.forms,n=e.types;return s.a.createElement("div",{className:"report-ReportView"},s.a.createElement("div",null,s.a.createElement(Ct,{wide:!0,icon:"table",label:"Load report template from disk (*.fods)",accept:"fods",multiple:!0,onClick:this.handleFilesChange}),s.a.createElement("p",{dangerouslySetInnerHTML:{__html:Ee("hint-report-templates")}}),s.a.createElement("ul",null,s.a.createElement("li",null,s.a.createElement("code",null,"{{newPatients [Y,1,1] [Y,4,1]}}"),": "),s.a.createElement("li",null,s.a.createElement("code",null,"{{newPatients [Y,1,1] [Y,4,1] filter:[GENDER #F]}}"),": "),s.a.createElement("li",null,s.a.createElement("code",null,"{{newPatients [Y,1,1] [Y,4,1] filter:[age 18 40]}}"),": "),s.a.createElement("li",null,s.a.createElement("code",null,"{{visits [Y,1,1] [Y,4,1]}}</code>"),": "),s.a.createElement("li",null,s.a.createElement("code",null,"{{visits [Y,1,1] [Y,4,1] filter:{MOTIF-CONSULTATION: #GENITAL-LEAK}}}"),": "),s.a.createElement("li",null,s.a.createElement("code",null,"{{visits [Y,1,1] [Y,4,1] group:day}}"),": ")),s.a.createElement("hr",null),s.a.createElement(Mt,{onQueryClick:this.handleQueryClick})),s.a.createElement("div",null,Object.values(t).map(function(e){return s.a.createElement(Tt,{key:e.id,types:n,field:e})})))}}]),t}(s.a.Component);function Lt(e){for(var t=new Date(1e3*e),n=t.getFullYear(),a="".concat(t.getMonth()+1),r="".concat(t.getDate());a.length<2;)a="0".concat(a);for(;r.length<2;)r="0".concat(r);return"".concat(n,"-").concat(a,"-").concat(r)}var Ut=n(140),qt=n.n(Ut),Yt=(n(141),{doGenerate:Wt,generate:function(e){return zt.apply(this,arguments)},generateFromTemplate:Vt,generateFromUserProvidedFile:Gt});function zt(){return(zt=Object(i.a)(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:yt.a.alert(s.a.createElement("div",{className:"report-icons-container"},s.a.createElement("div",null,s.a.createElement($.a,{content:"report",size:96,onClick:function(){return Vt(t)}}),s.a.createElement("div",null,"Rapport annuel")),s.a.createElement("div",null,s.a.createElement($.a,{content:"file",size:96,onClick:function(){return Gt(t)}}),s.a.createElement("div",null,s.a.createElement("i",null,"G\xe9n\xe9rique...")))));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Vt(e){return Jt.apply(this,arguments)}function Jt(){return(Jt=Object(i.a)(r.a.mark(function e(t){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yt.a.wait(Ee.loadingReport(),At.loadTextFromURL(qt.a));case 2:n=e.sent,yt.a.wait(Ee.generatingReport(),Wt(n,t));case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Gt(e){var t=function(){var t=Object(i.a)(r.a.mark(function t(a){var i,c,s,o,u,l,d;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=!0,c=!1,s=void 0,t.prev=3,o=a[Symbol.iterator]();case 5:if(i=(u=o.next()).done){t.next=14;break}return l=u.value,t.next=9,At.loadTextFromFile(l);case 9:d=t.sent,yt.a.wait(Ee.generatingReport(),Wt(d,e));case 11:i=!0,t.next=5;break;case 14:t.next=20;break;case 16:t.prev=16,t.t0=t.catch(3),c=!0,s=t.t0;case 20:t.prev=20,t.prev=21,i||null==o.return||o.return();case 23:if(t.prev=23,!c){t.next=26;break}throw s;case 26:return t.finish(23);case 27:return t.finish(20);case 28:n.hide();case 29:case"end":return t.stop()}},t,null,[[3,16,20,28],[21,,23,27]])}));return function(e){return t.apply(this,arguments)}}(),n=yt.a.show({content:s.a.createElement(Bt,{carecenter:e.carecenter,onFilesChange:t}),footer:s.a.createElement(ce.a,{label:"Close",icon:"cancel",onClick:function(){return n.hide()}})})}function Wt(e,t){return Kt.apply(this,arguments)}function Kt(){return(Kt=Object(i.a)(r.a.mark(function e(t,n){var a,i,c,s,o,u,l;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=new DOMParser,i=a.parseFromString(t,"application/xml"),c=[],Zt(i.documentElement,c),s=c.map(function(e){var t=(e.textContent||"{}").trim().substr(1);try{return Object(d.a)({},vt.parse(t.substr(0,t.length-1)),n)}catch(r){var a;return console.error(r),console.info("elem=",e),a={},Object(h.a)(a,0,"echo"),Object(h.a)(a,1,t),a}}),console.info("query=",s),e.next=8,T.a.exec("report",s);case 8:return o=e.sent,console.info("data=",o),o.forEach(function(e,t){var n=c[t],a=parseFloat(e);if(n.textContent=e,!Number.isNaN(a)){var r=n.parentElement;if(!r)return;r.setAttribute("office:value-type","float"),r.setAttribute("calcext:value-type","float"),r.setAttribute("office:value",e)}}),u=new XMLSerializer,l=u.serializeToString(i),e.next=15,se.saveAs(new Blob([l]),"report.ods");case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Zt(e,t){switch(e.nodeType){case Node.ELEMENT_NODE:if("text:p"===e.nodeName){var n=(e.textContent||"").trim();n.startsWith("{{")&&n.endsWith("}}")&&t.push(e)}else{var a=!0,r=!1,i=void 0;try{for(var c,s=e.childNodes[Symbol.iterator]();!(a=(c=s.next()).done);a=!0){Zt(c.value,t)}}catch(o){r=!0,i=o}finally{try{a||null==s.return||s.return()}finally{if(r)throw i}}}}}n(142);var _t=Ae.a.View.Button,Ht=Ae.a.Factory.Dialog,Xt=Ae.a.View.InputFile,$t=(Ae.a.Intl.make(n(143)),function(e){function t(){var e,n;Object(A.a)(this,t);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(n=Object(z.a)(this,(e=Object(V.a)(t)).call.apply(e,[this].concat(c)))).state={},n.handleFilesChange=function(){var e=Object(i.a)(r.a.mark(function e(t){var n,a,i,c,s,o,u;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=!0,a=!1,i=void 0,e.prev=3,c=t[Symbol.iterator]();case 5:if(n=(s=c.next()).done){e.next=14;break}return o=s.value,e.next=9,Ae.a.Util.loadTextFromFile(o);case 9:u=e.sent,Ht.wait(Ee.generatingReport(),Yt.doGenerate(u,{}));case 11:n=!0,e.next=5;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(3),a=!0,i=e.t0;case 20:e.prev=20,e.prev=21,n||null==c.return||c.return();case 23:if(e.prev=23,!a){e.next=26;break}throw i;case 26:return e.finish(23);case 27:return e.finish(20);case 28:case"end":return e.stop()}},e,null,[[3,16,20,28],[21,,23,27]])}));return function(t){return e.apply(this,arguments)}}(),n}return Object(J.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){var e=["view-CountingReports"].concat(Object(ye.a)(Ae.a.Converter.StringArray(this.props.className,[])));return s.a.createElement("div",{className:e.join(" ")},s.a.createElement(_t,{label:"Rapport annuel",icon:"report",onClick:function(){return Yt.generateFromTemplate({})}}),s.a.createElement(_t,{label:"Ajouter un nouveau rapport",enabled:!1,icon:"add",warning:!0,onClick:function(){return Yt.generateFromUserProvidedFile({})}}),s.a.createElement(Xt,{icon:"import",label:"Importer un fichier",accept:"fods",flat:!0,multiple:!0,onClick:this.handleFilesChange}),s.a.createElement(et,{label:"Documentation",default:!1,background:"thm-bg2"},s.a.createElement("div",null,s.a.createElement("p",{dangerouslySetInnerHTML:{__html:Ee.hintReportTemplates()}}),s.a.createElement("ul",null,s.a.createElement("li",null,s.a.createElement("code",null,"{{newPatients [Y,1,1] [Y,4,1]}}"),":",s.a.createElement("br",null),s.a.createElement("span",{className:"hint"},"Nombre de nouveaux patients entre le 1",s.a.createElement("sup",null,"er")," janvier de cette ann\xe9e et le 1",s.a.createElement("sup",null,"er")," avril.")),s.a.createElement("li",null,s.a.createElement("code",null,"{{newPatients [Y,1,1] [Y,4,1] filter:[GENDER #F]}}"),":",s.a.createElement("br",null),s.a.createElement("span",{className:"hint"},"Nombre de nouveaux patients entre le 1",s.a.createElement("sup",null,"er")," janvier de cette ann\xe9e et le 1",s.a.createElement("sup",null,"er")," avril de sexe f\xe9minin.")),s.a.createElement("li",null,s.a.createElement("code",null,"{{newPatients [Y,1,1] [Y,4,1] filter:[age 18 40]}}"),":",s.a.createElement("br",null),s.a.createElement("span",{className:"hint"},"Nombre de nouveaux patients entre le 1",s.a.createElement("sup",null,"er")," janvier de cette ann\xe9e et le 1",s.a.createElement("sup",null,"er")," avril ag\xe9e de 18 \xe0 40 ans.")),s.a.createElement("li",null,s.a.createElement("code",null,"{{visits [Y,1,1] [Y,4,1]}}</code>"),":",s.a.createElement("br",null),s.a.createElement("span",{className:"hint"},"Nombre de consultations entre le 1",s.a.createElement("sup",null,"er")," janvier de cette ann\xe9e et le 1",s.a.createElement("sup",null,"er")," avril.")),s.a.createElement("li",null,s.a.createElement("code",null,"{{visits [Y,1,1] [Y,4,1] filter:{MOTIF-CONSULTATION: #GENITAL-LEAK}}}"),":",s.a.createElement("br",null),s.a.createElement("span",{className:"hint"},"Nombre de consultations entre le 1",s.a.createElement("sup",null,"er")," janvier de cette ann\xe9e et le 1",s.a.createElement("sup",null,"er")," avril dont le motif de consultation est ",s.a.createElement("b",null,"genital leak"),".")),s.a.createElement("li",null,s.a.createElement("code",null,"{{visits [Y,1,1] [Y,4,1] group:day}}"),":",s.a.createElement("br",null),s.a.createElement("span",{className:"hint"},"Nombre de jours de consultations entre le 1",s.a.createElement("sup",null,"er")," janvier de cette ann\xe9e et le 1",s.a.createElement("sup",null,"er")," avril."))))))}}]),t}(s.a.Component)),en=(n(144),Ae.a.Intl.make(n(145)),function(e){function t(){var e,n;Object(A.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(z.a)(this,(e=Object(V.a)(t)).call.apply(e,[this].concat(r)))).state={},n.handleQueryClick=function(){},n}return Object(J.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){var e=["view-pages-Reports"].concat(Object(ye.a)(Ae.a.Converter.StringArray(this.props.className,[])));return s.a.createElement("div",{className:e.join(" ")},s.a.createElement(Ie,{label:Ee.buttonReports(),icon:"report"},s.a.createElement(et,{label:Ee.countingReports(),storage:"counting-reports"},s.a.createElement($t,null)),s.a.createElement(et,{label:Ee.extractions(),storage:"extractions"},s.a.createElement(Mt,{onQueryClick:this.handleQueryClick}))))}}]),t}(s.a.Component));var tn=Object(l.b)(function(e){return{carecenter:e.current.carecenter}},function(e){return{}})(en),nn=(n(146),Ae.a.View.Button,Ae.a.Intl.make(n(147)),function(e){function t(){var e,n;Object(A.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(z.a)(this,(e=Object(V.a)(t)).call.apply(e,[this].concat(r)))).state={},n}return Object(J.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){var e=["view-pages-Stats"].concat(Object(ye.a)(Ae.a.Converter.StringArray(this.props.className,[])));return s.a.createElement("div",{className:e.join(" ")},s.a.createElement(Ie,{label:Ee.buttonStats(),icon:"stat"}))}}]),t}(s.a.Component));var an=Object(l.b)(function(e){return{carecenter:e.current.carecenter}},function(e){return{}})(nn),rn=(n(148),Ae.a.View.Button,Ae.a.Intl.make(n(149)),function(e){function t(){var e,n;Object(A.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(z.a)(this,(e=Object(V.a)(t)).call.apply(e,[this].concat(r)))).state={},n}return Object(J.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){var e=["view-pages-Struct"].concat(Object(ye.a)(Ae.a.Converter.StringArray(this.props.className,[])));return s.a.createElement("div",{className:e.join(" ")},s.a.createElement(Ie,{label:Ee.buttonStruct(),icon:"sitemap"}))}}]),t}(s.a.Component));var cn=Object(l.b)(function(e){return{carecenter:e.current.carecenter}},function(e){return{}})(rn),sn=n(150),on=n.n(sn),un=(n(151),function(e){function t(){var e,n;Object(A.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(z.a)(this,(e=Object(V.a)(t)).call.apply(e,[this].concat(r)))).refDiv=s.a.createRef(),n.state={loaded:!1},n}return Object(J.a)(t,e),Object(Y.a)(t,[{key:"componentDidMount",value:function(){var e=Object(i.a)(r.a.mark(function e(){var t,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae.a.Util.loadTextFromURL(on.a);case 2:if(t=e.sent,n=this.refDiv.current){e.next=6;break}return e.abrupt("return");case 6:n.innerHTML=t,this.setState({loaded:!0});case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=["view-pages-Welcome"].concat(Object(ye.a)(Ae.a.Converter.StringArray(this.props.className,[])));return this.state.loaded&&e.push("loaded"),s.a.createElement("div",{ref:this.refDiv,className:e.join(" ")})}}]),t}(s.a.Component)),ln=(n(152),Ae.a.Layout.Stack),dn=function(e){function t(){var e,n;Object(A.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(z.a)(this,(e=Object(V.a)(t)).call.apply(e,[this].concat(r)))).state={},n}return Object(J.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){var e=["view-Pages"].concat(Object(ye.a)(Ae.a.Converter.StringArray(this.props.className,[])));return s.a.createElement(ln,{className:e.join(" "),fullscreen:!0,value:this.props.page},s.a.createElement(un,{key:"welcome"}),s.a.createElement(Ke,{key:"patients"}),s.a.createElement(tn,{key:"reports"}),s.a.createElement(an,{key:"stats"}),s.a.createElement(cn,{key:"struct"}))}}]),t}(s.a.Component);n(153);var pn=Object(l.b)(function(e){return e.stats.map(function(t){var n=t.carecenter,a=n.id,r=e.structures.find(function(e){return e.id===a});if(!r)return console.error("There is no Structure with id=".concat(a,' in carecenter "').concat(n.name,'"!')),null;var i=S.statsConfig(t);return c.createElement(he,{key:i,stat:t,onClose:function(){return F.dispatch(F.removeStat(i))},structure:r})}),{head:e.user.nickname,menu:c.createElement(xe,{carecenters:e.carecenters,organizations:e.organizations,structures:e.structures}),body:c.createElement(dn,{page:e.page})}},function(e){return{onLanguageClick:function(){e(v.setLanguage("jp"))},onLogoutClick:function(){window.location.reload()}}})(ge),fn=(n(154),function(e){function t(){return Object(A.a)(this,t),Object(z.a)(this,Object(V.a)(t).apply(this,arguments))}return Object(J.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){return c.createElement(pn,{classes:"App"})}}]),t}(c.Component));t.default={start:function(){var e=Object(i.a)(r.a.mark(function e(t){var n,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=document.getElementById("root"),u.a.render(s.a.createElement(l.a,{store:F.store},s.a.createElement(fn,{user:t})),n),F.dispatch(F.User.setLanguage(k.a.lang)),F.dispatch(F.User.setNickname(t.nickname)),e.next=6,M.list();case 6:a=e.sent,F.dispatch(F.Organizations.setOrganizations(a)),F.dispatch(F.Carecenters.setCarecenters([])),a.forEach(function(){var e=Object(i.a)(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.list(t.id);case 2:return e.sent.forEach(function(e){F.dispatch(F.Structures.addStructure(e))}),e.next=6,Q.list(t.id);case 6:e.sent.forEach(function(e){F.dispatch(F.Carecenters.addCarecenter(e))});case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}}])]);
//# sourceMappingURL=2.cbfadcee.chunk.js.map